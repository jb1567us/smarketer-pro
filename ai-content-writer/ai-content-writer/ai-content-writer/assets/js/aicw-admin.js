jQuery((function(e){"use strict";var t={init:function(){e("table.aicw_repeat_table").on("click","a.insert",this.insert_row).on("click","a.delete",this.delete_row).on("update",this.update_index)},insert_row:function(t){return t.preventDefault(),e(this).closest("table").find("tbody").append(e(this).data("row")).trigger("update"),!1},delete_row:function(t){return t.preventDefault(),e(this).closest("tr").remove().closest("table").trigger("update"),!1},update_index:function(){e(this).find("tbody tr").each((function(t){e(this).find("input, select, textarea").each((function(){var a=e(this);a.attr("name",a.attr("name").replace(/\[\d+\]/,"["+t+"]"))}))}))}};({init:function(){this.bindEvents(),this.updateCampaignFields(e("#campaign_type").val())},bindEvents:function(){e('.aicw-featured-image__image-label input[type="radio"]').on("change",this.toggleSelectedImage),e("#generate_content").on("click",this.handleFormSubmit),e("#campaign_type").on("change",(t=>{this.updateCampaignFields(e(t.target).val())})),e('.range_slider input[type="range"]').on("input",this.updateSliderValue),e(".aicw_delete_temp_post").on("click",this.deleteTempPost),e("#aicw_run_campaign").on("click",this.handleRunCampaign)},toggleSelectedImage:function(){e(".aicw-featured-image__image").removeClass("selected"),e(this).closest(".aicw-featured-image__image").addClass("selected")},handleFormSubmit:function(){const t=e(".aicw__sidebar__footer .spinner");e(this).closest("form")[0].checkValidity()&&t.addClass("active").show()},updateCampaignFields:function(t){e(".hide-if__"+t).hide(),e(".show-if__"+t).show()},updateSliderValue:function(){const t=e(this).val();e(this).next(".range_slider_value").text(t)},deleteTempPost:function(t){t.preventDefault();const a=e(this).data("post-id");confirm("Are you sure you want to delete this post? This action cannot be undone.")&&e.ajax({url:aicw_object.ajax_url,type:"POST",data:{action:"aicw_delete_temp_post",post_id:a,nonce:aicw_object.nonce},success:function(e){alert(e.data.message),e.success&&location.reload()},error:function(){alert("Something went wrong. Please try again later.")}})},handleRunCampaign:function(t){t.preventDefault();const a=e(this).data("campaign-id");if(!confirm("Are you sure you want to run this campaign?"))return;const i=e("#aicw_run_campaign_spinner");i.addClass("active").show(),e.ajax({url:aicw_object.ajax_url,type:"POST",data:{action:"aicw_run_campaign",campaign_id:a,nonce:aicw_object.nonce},success:function(e){alert(e.data.message),e.success?location.reload():i.removeClass("active").hide()},error:function(){alert("Something went wrong. Please try again later."),i.removeClass("active").hide()}})}}).init(),t.init()}));