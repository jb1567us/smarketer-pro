<?php
$data = "PD9waHANCnJlcXVpcmVfb25jZSgnd3AtbG9hZC5waHAnKTsNCg0KLy8gRW5hYmxlIGRldGFpbGVkIGxvZ2dpbmcNCmluaV9zZXQoJ2Rpc3BsYXlfZXJyb3JzJywgMSk7DQplcnJvcl9yZXBvcnRpbmcoRV9BTEwpOw0KDQplY2hvICI8cHJlPkZpeGluZyBQYWdlIE1hcmt1cCAoQWRkaW5nIDxzdHlsZT4gYW5kIDxzY3JpcHQ+IHRhZ3MpLi4uPGJyPiI7DQoNCi8vIEdldCBhbGwgcGFnZXMNCiRhcmdzID0gWw0KICAgICdwb3N0X3R5cGUnID0+ICdwYWdlJywNCiAgICAncG9zdHNfcGVyX3BhZ2UnID0+IC0xLA0KICAgICdwb3N0X3N0YXR1cycgPT4gJ3B1Ymxpc2gnLA0KXTsNCiRxdWVyeSA9IG5ldyBXUF9RdWVyeSgkYXJncyk7DQoNCiRjb3VudCA9IDA7DQokZml4ZWRfY3NzID0gMDsNCiRmaXhlZF9qc29uID0gMDsNCg0KZm9yZWFjaCAoJHF1ZXJ5LT5wb3N0cyBhcyAkcG9zdCkgew0KICAgICRjb250ZW50ID0gJHBvc3QtPnBvc3RfY29udGVudDsNCiAgICAkb3JpZ2luYWxfY29udGVudCA9ICRjb250ZW50Ow0KICAgICRwaWQgPSAkcG9zdC0+SUQ7DQoNCiAgICAvLyAxLiBGaXggQ1NTDQogICAgLy8gQ2hlY2sgaWYgaXQgaGFzIFJhdyBDU1MgYnV0IE5PIDxzdHlsZT4gdGFnIGFyb3VuZCAiRm9udCBJbXBvcnRzIg0KICAgIGlmIChzdHJwb3MoJGNvbnRlbnQsICcvKiBGb250IEltcG9ydHMgKi8nKSAhPT0gZmFsc2UgJiYgc3RycG9zKCRjb250ZW50LCAnPHN0eWxlPi8qIEZvbnQgSW1wb3J0cyAqLycpID09PSBmYWxzZSkgew0KICAgICAgICAvLyBSYW5nZTogRnJvbSAiLyogRm9udCBJbXBvcnRzICovIiB0byAiPCEtLSBWaXN1YWxBcnR3b3JrIFNjaGVtYSAtLT4iDQogICAgICAgIC8vIFJlZ2V4OiBNYXRjaCB0aGUgYmxvY2ssIHJlcGxhY2Ugd2l0aCA8c3R5bGU+JDA8L3N0eWxlPg0KICAgICAgICAvLyBOb3RlOiBUaGUgY29tbWVudCA8IS0tIFByZW1pdW0gQXJ0d29yayBQYWdlIFN0eWxlcyAtLT4gaXMgYmVmb3JlIGl0Lg0KICAgICAgICAvLyBMZXQncyBqdXN0IHdyYXAgZnJvbSBTdGFydCBvZiBDU1MgdG8gZW5kIG9mIENTUy4NCg0KICAgICAgICAkcGF0dGVybl9jc3MgPSAnLyhcL1wqIEZvbnQgSW1wb3J0cyBcKlwvLio/KVxzKig/PTwhLS0gVmlzdWFsQXJ0d29yayBTY2hlbWEgLS0+KS9zJzsNCiAgICAgICAgaWYgKHByZWdfbWF0Y2goJHBhdHRlcm5fY3NzLCAkY29udGVudCkpIHsNCiAgICAgICAgICAgICRjb250ZW50ID0gcHJlZ19yZXBsYWNlKCRwYXR0ZXJuX2NzcywgIjxzdHlsZT4kMTwvc3R5bGU+IiwgJGNvbnRlbnQpOw0KICAgICAgICAgICAgJGZpeGVkX2NzcysrOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgLy8gMi4gRml4IEpTT04gU2NoZW1hDQogICAgLy8gQ2hlY2sgaWYgaXQgaGFzIFNjaGVtYSBidXQgTk8gPHNjcmlwdD4gdGFnDQogICAgaWYgKHN0cnBvcygkY29udGVudCwgJ3sgIkBjb250ZXh0IicpICE9PSBmYWxzZSAmJiBzdHJwb3MoJGNvbnRlbnQsICc8c2NyaXB0IHR5cGU9ImFwcGxpY2F0aW9uL2xkK2pzb24iPnsgIkBjb250ZXh0IicpID09PSBmYWxzZSkgew0KICAgICAgICAvLyBSYW5nZTogRnJvbSAneyAiQGNvbnRleHQiJyB0byB0aGUgY2xvc2luZyBicmFjZSBiZWZvcmUgJzxkaXYnDQogICAgICAgIC8vIFRoZSBwcmV2aW91cyBzdGVwIG1pZ2h0IGhhdmUgc2hpZnRlZCB0aGluZ3MuDQogICAgICAgIC8vIFJlZ2V4OiBsb29rIGZvciB0aGUgSlNPTiBibG9jay4gSXQgZW5kcyBiZWZvcmUgPGRpdiBjbGFzcz0iYXJ0d29yay4uLiBvciA8ZGl2IGNsYXNzPSJhcnR3b3JrLXBhZ2UtY29udGFpbmVyIg0KDQogICAgICAgIC8vIFJvYnVzdCBtYXRjaDogeyAiQGNvbnRleHQiIC4uLiB9IA0KICAgICAgICAvLyBXZSBjYW4gbWF0Y2ggYmFsYW5jZWQgYnJhY2VzIGJ1dCBQSFAgcmVnZXggaXMgdHJpY2t5Lg0KICAgICAgICAvLyBTaW1wbGVyOiBNYXRjaCB1bnRpbCA8ZGl2IGNsYXNzPSJhcnR3b3JrLXBhZ2UtY29udGFpbmVyIj4NCg0KICAgICAgICAkcGF0dGVybl9qc29uID0gJy8oXHsgIkBjb250ZXh0IjouKj9cfSlccyooPz08ZGl2IGNsYXNzPSJhcnR3b3JrLXBhZ2UtY29udGFpbmVyIj4pL3MnOw0KICAgICAgICBpZiAocHJlZ19tYXRjaCgkcGF0dGVybl9qc29uLCAkY29udGVudCkpIHsNCiAgICAgICAgICAgICRjb250ZW50ID0gcHJlZ19yZXBsYWNlKCRwYXR0ZXJuX2pzb24sICc8c2NyaXB0IHR5cGU9ImFwcGxpY2F0aW9uL2xkK2pzb24iPiQxPC9zY3JpcHQ+JywgJGNvbnRlbnQpOw0KICAgICAgICAgICAgJGZpeGVkX2pzb24rKzsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIGlmICgkY29udGVudCAhPT0gJG9yaWdpbmFsX2NvbnRlbnQpIHsNCiAgICAgICAgd3BfdXBkYXRlX3Bvc3QoWydJRCcgPT4gJHBpZCwgJ3Bvc3RfY29udGVudCcgPT4gJGNvbnRlbnRdKTsNCiAgICAgICAgZWNobyAi4pyFIEZpeGVkIFBhZ2UgJHBpZCAoeyRwb3N0LT5wb3N0X3RpdGxlfSk8YnI+IjsNCiAgICAgICAgJGNvdW50Kys7DQogICAgfQ0KfQ0KDQplY2hvICI8YnI+U3VtbWFyeTo8YnI+IjsNCmVjaG8gIlRvdGFsIFBhZ2VzIFNjYW5uZWQ6ICIgLiBjb3VudCgkcXVlcnktPnBvc3RzKSAuICI8YnI+IjsNCmVjaG8gIlBhZ2VzIFVwZGF0ZWQ6ICRjb3VudDxicj4iOw0KZWNobyAiQ1NTIEZpeGVzIEFwcGxpZWQ6ICRmaXhlZF9jc3M8YnI+IjsNCmVjaG8gIkpTT04gRml4ZXMgQXBwbGllZDogJGZpeGVkX2pzb248YnI+IjsNCmVjaG8gIjwvcHJlPiI7DQo/Pg==";
$decoded = base64_decode($data);
if (file_put_contents(__DIR__ . '/run_fix_markup.php', $decoded)) {
    echo "✅ Successfully deployed run_fix_markup.php (" . strlen($decoded) . " bytes)";
} else {
    echo "❌ Failed to write run_fix_markup.php";
}
?>