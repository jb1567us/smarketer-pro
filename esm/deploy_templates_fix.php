<?php
// deploy_templates_fix.php
// Deploys updated templates to fix spec sheet links (Slug Logic)
header('Content-Type: text/plain');
echo "Starting Template Deployment...\n";
$base_dir = $_SERVER['DOCUMENT_ROOT'];
// Deploying esm-artwork-template.php
$esm_artwork_template_php_b64 = 'PD9waHANCi8qDQpQbHVnaW4gTmFtZTogRVNNIEFydHdvcmsgTWFzdGVyIFRlbXBsYXRlDQpEZXNjcmlwdGlvbjogRnVsbC1wYWdlIG92ZXJyaWRlIHRvIHJlbmRlciBwcmVtaXVtIGFydHdvcmsgbGF5b3V0cywgYnlwYXNzaW5nIHRoZSBhY3RpdmUgdGhlbWUuDQpWZXJzaW9uOiAzLjANCkF1dGhvcjogRVNNIERldg0KKi8NCg0KLy8gUHJldmVudCBkaXJlY3QgYWNjZXNzDQovLyBQcmV2ZW50IGRpcmVjdCBhY2Nlc3MgLSBvciBsb2FkIFdQIGVudmlyb25tZW50IGZvciBJREUvRGVidWcgY29udGV4dA0KaWYgKCFkZWZpbmVkKCdBQlNQQVRIJykpIHsNCiAgICBpZiAoZmlsZV9leGlzdHMoX19ESVJfXyAuICcvd3AtbG9hZC5waHAnKSkgew0KICAgICAgICByZXF1aXJlX29uY2UgX19ESVJfXyAuICcvd3AtbG9hZC5waHAnOw0KICAgIH0gZWxzZSB7DQogICAgICAgIGV4aXQ7DQogICAgfQ0KfQ0KDQppZiAoIWNsYXNzX2V4aXN0cygnRVNNX0FydHdvcmtfVGVtcGxhdGUnKSkgew0KY2xhc3MgRVNNX0FydHdvcmtfVGVtcGxhdGUNCnsNCg0KICAgIHByaXZhdGUgJGRhdGFfbWFwID0gW107DQoNCiAgICBwdWJsaWMgZnVuY3Rpb24gX19jb25zdHJ1Y3QoKQ0KICAgIHsNCiAgICAgICAgLy8gVXNlIHRlbXBsYXRlX2luY2x1ZGUgdG8gb3ZlcnJpZGUgdGhlIGVudGlyZSBwYWdlIGNvbnRlbnQNCiAgICAgICAgYWRkX2ZpbHRlcigndGVtcGxhdGVfaW5jbHVkZScsIFskdGhpcywgJ292ZXJyaWRlX3RlbXBsYXRlJ10pOw0KICAgICAgICBhZGRfZmlsdGVyKCd3cF9sYXp5X2xvYWRpbmdfZW5hYmxlZCcsICdfX3JldHVybl9mYWxzZScpOyAvLyBEaXNhYmxlIENvcmUgTGF6eSBMb2FkDQogICAgICAgIGFkZF9hY3Rpb24oJ3dwX2hlYWQnLCBbJHRoaXMsICdkZWJ1Z19pbmZvJ10pOw0KICAgICAgICAkdGhpcy0+bG9hZF9kYXRhKCk7DQogICAgfQ0KDQogICAgcHVibGljIGZ1bmN0aW9uIGRlYnVnX2luZm8oKSB7DQogICAgICAgIGdsb2JhbCAkcG9zdDsNCiAgICAgICAgJHRpdGxlID0gJHBvc3QgPyAkcG9zdC0+cG9zdF90aXRsZSA6ICdOTyBQT1NUJzsNCiAgICAgICAgJHNsdWcgPSAkcG9zdCA/ICRwb3N0LT5wb3N0X25hbWUgOiAnTk8gU0xVRyc7DQogICAgICAgICRrZXkgPSBzdHJ0b2xvd2VyKHRyaW0oJHRpdGxlKSk7DQogICAgICAgICRtYXRjaCA9IGlzc2V0KCR0aGlzLT5kYXRhX21hcFska2V5XSkgPyAnWUVTJyA6ICdOTyc7DQogICAgICAgIGVjaG8gIlxuPCEtLSBFU00gREVCVUc6IFRpdGxlPSd7JHRpdGxlfScsIFNsdWc9J3skc2x1Z30nLCBLZXk9J3ska2V5fScsIE1hdGNoPSd7JG1hdGNofScgLS0+XG4iOw0KICAgIH0NCg0KICAgIHByaXZhdGUgZnVuY3Rpb24gbG9hZF9kYXRhKCkNCiAgICB7DQogICAgICAgICRmaWxlID0gX19ESVJfXyAuICcvYXJ0d29ya19kYXRhLmpzb24nOw0KICAgICAgICBpZiAoIWZpbGVfZXhpc3RzKCRmaWxlKSkNCiAgICAgICAgICAgICRmaWxlID0gQUJTUEFUSCAuICdhcnR3b3JrX2RhdGEuanNvbic7DQogICAgICAgIA0KICAgICAgICBpZiAoZmlsZV9leGlzdHMoJGZpbGUpKSB7DQogICAgICAgICAgICAkanNvbiA9IGZpbGVfZ2V0X2NvbnRlbnRzKCRmaWxlKTsNCiAgICAgICAgICAgICRkYXRhID0ganNvbl9kZWNvZGUoJGpzb24sIHRydWUpOw0KICAgICAgICAgICAgaWYgKCRkYXRhKSB7DQogICAgICAgICAgICAgICAgZm9yZWFjaCAoJGRhdGEgYXMgJGl0ZW0pIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGlzc2V0KCRpdGVtWyd0aXRsZSddKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgJGtleSA9IHN0cnRvbG93ZXIodHJpbSgkaXRlbVsndGl0bGUnXSkpOw0KICAgICAgICAgICAgICAgICAgICAgICAgJHRoaXMtPmRhdGFfbWFwWyRrZXldID0gJGl0ZW07DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBwdWJsaWMgZnVuY3Rpb24gb3ZlcnJpZGVfdGVtcGxhdGUoJHRlbXBsYXRlKQ0KICAgIHsNCiAgICAgICAgaWYgKCFpc19zaW5ndWxhcigpICYmICFpc19wYWdlKCkpIHsNCiAgICAgICAgICAgIHJldHVybiAkdGVtcGxhdGU7DQogICAgICAgIH0NCg0KDQogICAgICAgICRwb3N0ID0gZ2V0X3Bvc3QoKTsNCiAgICAgICAgaWYgKCEkcG9zdCkgcmV0dXJuICR0ZW1wbGF0ZTsNCg0KICAgICAgICAvLyBFeHBsaWNpdGx5IHJvdXRlIENvbGxlY3Rpb24gcGFnZXMgdG8gdGhlaXIgb3duIHRlbXBsYXRlDQogICAgICAgICRzbHVnID0gJHBvc3QtPnBvc3RfbmFtZTsNCiAgICAgICAgJGNvbGxlY3Rpb25fc2x1Z3MgPSBbDQogICAgICAgICAgICAnZ29sZC1jb2xsZWN0aW9uJywNCiAgICAgICAgICAgICdibHVlLXR1cnF1b2lzZS1jb2xsZWN0aW9uJywNCiAgICAgICAgICAgICdvdmVyc2l6ZWQtc3RhdGVtZW50LXBpZWNlcycsDQogICAgICAgICAgICAnc2N1bHB0dXJlLWNvbGxlY3Rpb24nLA0KICAgICAgICAgICAgJ3BhdHRlcm4tZ2VvbWV0cmljJywNCiAgICAgICAgICAgICdtaW5pbWFsaXN0LWFic3RyYWN0JywNCiAgICAgICAgICAgICduZXV0cmFsLXRvbmVzJw0KICAgICAgICBdOw0KICAgICAgICANCiAgICAgICAgaWYgKGluX2FycmF5KCRzbHVnLCAkY29sbGVjdGlvbl9zbHVncykpIHsNCiAgICAgICAgICAgICR0aGlzLT5yZW5kZXJfY29sbGVjdGlvbl9wYWdlKCRwb3N0KTsNCiAgICAgICAgICAgIGV4aXQ7DQogICAgICAgIH0NCg0KICAgICAgICAvLyBDaGVjayBpZiB0aGlzIHBhZ2UgbWF0Y2hlcyBhbiBhcnR3b3JrIGluIG91ciBEQg0KICAgICAgICAkdGl0bGUgPSB0cmltKCRwb3N0LT5wb3N0X3RpdGxlKTsNCiAgICAgICAgJGtleSA9IHN0cnRvbG93ZXIoJHRpdGxlKTsNCg0KICAgICAgICBpZiAoaXNzZXQoJHRoaXMtPmRhdGFfbWFwWyRrZXldKSkgew0KICAgICAgICAgICAgLy8gTUFUQ0ggRk9VTkQ6IFJlbmRlciBvdXIgY3VzdG9tIGxheW91dCBhbmQgZXhpdA0KICAgICAgICAgICAgJHRoaXMtPnJlbmRlcl9mdWxsX3BhZ2UoJHBvc3QsICR0aGlzLT5kYXRhX21hcFska2V5XSk7DQogICAgICAgICAgICBleGl0OyAvLyBTdG9wIFdvcmRQcmVzcyBmcm9tIGxvYWRpbmcgdGhlIHRoZW1lIHRlbXBsYXRlDQogICAgICAgIH0NCg0KICAgICAgICByZXR1cm4gJHRlbXBsYXRlOw0KICAgIH0NCg0KICAgIHByaXZhdGUgZnVuY3Rpb24gcmVuZGVyX2Z1bGxfcGFnZSgkcG9zdCwgJGRhdGEpDQogICAgew0KICAgICAgICAkdGl0bGUgPSB0cmltKCRwb3N0LT5wb3N0X3RpdGxlKTsNCiAgICAgICAgDQogICAgICAgIC8vIC0tLSBEQVRBIFBSRVAgLS0tDQogICAgICAgICRwcmljZSA9IGlzc2V0KCRkYXRhWydwcmljZSddKSA/ICckJyAuIG51bWJlcl9mb3JtYXQoJGRhdGFbJ3ByaWNlJ10pIDogJ0lucXVpcmUnOw0KICAgICAgICAkZGltZW5zaW9ucyA9IGlzc2V0KCRkYXRhWydkaW1lbnNpb25zJ10pID8gJGRhdGFbJ2RpbWVuc2lvbnMnXSA6ICcnOw0KICAgICAgICBpZiAoISRkaW1lbnNpb25zICYmIGlzc2V0KCRkYXRhWyd3aWR0aCddLCAkZGF0YVsnaGVpZ2h0J10pKSB7DQogICAgICAgICAgICAkZGltZW5zaW9ucyA9ICJ7JGRhdGFbJ3dpZHRoJ119IFcgeCB7JGRhdGFbJ2hlaWdodCddfSBIIGluIjsNCiAgICAgICAgfQ0KICAgICAgICAkd2lkdGggPSBpc3NldCgkZGF0YVsnd2lkdGgnXSkgPyAkZGF0YVsnd2lkdGgnXSA6ICcnOw0KICAgICAgICAkaGVpZ2h0ID0gaXNzZXQoJGRhdGFbJ2hlaWdodCddKSA/ICRkYXRhWydoZWlnaHQnXSA6ICcnOw0KDQogICAgICAgICRtZWRpdW0gPSBpc3NldCgkZGF0YVsnbWVkaXVtc0RldGFpbGVkJ10pID8gJGRhdGFbJ21lZGl1bXNEZXRhaWxlZCddIDogKGlzc2V0KCRkYXRhWydtZWRpdW0nXSkgPyAkZGF0YVsnbWVkaXVtJ10gOiAnTWl4ZWQgTWVkaWEnKTsNCiAgICAgICAgJHllYXIgPSBpc3NldCgkZGF0YVsneWVhciddKSA/ICRkYXRhWyd5ZWFyJ10gOiAnJzsNCiAgICAgICAgJHN0eWxlcyA9IGlzc2V0KCRkYXRhWydzdHlsZXMnXSkgPyAkZGF0YVsnc3R5bGVzJ10gOiAnJzsNCiAgICAgICAgDQogICAgICAgICRkZXRlY3RlZF9jb2xvcnMgPSBpc3NldCgkZGF0YVsnZGV0ZWN0ZWRfY29sb3JzJ10pICYmIGlzX2FycmF5KCRkYXRhWydkZXRlY3RlZF9jb2xvcnMnXSkgPyBpbXBsb2RlKCcsICcsICRkYXRhWydkZXRlY3RlZF9jb2xvcnMnXSkgOiAnJzsNCiAgICAgICAgJHRhZ3NfY29tYmluZWQgPSBbXTsNCiAgICAgICAgaWYgKCRzdHlsZXMpICR0YWdzX2NvbWJpbmVkW10gPSAkc3R5bGVzOw0KICAgICAgICBpZiAoJGRldGVjdGVkX2NvbG9ycykgJHRhZ3NfY29tYmluZWRbXSA9ICRkZXRlY3RlZF9jb2xvcnM7DQogICAgICAgICR0YWdzX2Rpc3BsYXkgPSBpbXBsb2RlKCcsICcsICR0YWdzX2NvbWJpbmVkKTsNCg0KICAgICAgICAvLyBVc2UgY3VzdG9tIGRlc2NyaXB0aW9uIGlmIGF2YWlsYWJsZSwgb3RoZXJ3aXNlIGZhbGxiYWNrIHRvIGdlbmVyYXRlZA0KICAgICAgICBpZiAoIWVtcHR5KCRkYXRhWydkZXNjcmlwdGlvbiddKSkgew0KICAgICAgICAgICAgJGRlc2MgPSAkZGF0YVsnZGVzY3JpcHRpb24nXTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICRkZXNjID0gIk9yaWdpbmFsIHskbWVkaXVtfSBwYWludGluZyBieSBFbGxpb3QgU3BlbmNlciBNb3JnYW4uIjsNCiAgICAgICAgICAgIGlmICgkeWVhcikgJGRlc2MgLj0gIiBDcmVhdGVkIGluIHskeWVhcn0uIjsNCiAgICAgICAgICAgIGlmICgkc3R5bGVzKSAkZGVzYyAuPSAiIEZlYXR1cmluZyBlbGVtZW50cyBvZiB7JHN0eWxlc30uIjsNCiAgICAgICAgICAgICRkZXNjIC49ICIgUGVyZmVjdCBmb3IgaW50ZXJpb3IgZGVzaWduIHByb2plY3RzLCBoaWdoLWVuZCByZXNpZGVudGlhbCBzcGFjZXMsIGFuZCBob3NwaXRhbGl0eSBlbnZpcm9ubWVudHMuIjsNCiAgICAgICAgICAgICRkZXNjIC49ICIgU2lnbmVkIGFuZCBkZWxpdmVyZWQgd2l0aCBhIENlcnRpZmljYXRlIG9mIEF1dGhlbnRpY2l0eS4gQXZhaWxhYmxlIGZvciB0cmFkZSBwcm9mZXNzaW9uYWxzLiI7DQogICAgICAgIH0NCg0KICAgICAgICAkaW5zdGFsbGF0aW9uID0gaXNzZXQoJGRhdGFbJ3JlYWR5VG9IYW5nJ10pID8gJGRhdGFbJ3JlYWR5VG9IYW5nJ10gOiAiV2lyZWQgJiBSZWFkeSB0byBIYW5nIjsNCiAgICAgICAgaWYgKCRpbnN0YWxsYXRpb24gPT09ICdObycpICRpbnN0YWxsYXRpb24gPSAiUmVxdWlyZXMgRnJhbWluZyI7DQogICAgICAgIA0KICAgICAgICAkZnJhbWluZyA9IGlzc2V0KCRkYXRhWydmcmFtZSddKSA/ICRkYXRhWydmcmFtZSddIDogIlVuZnJhbWVkIjsNCiAgICAgICAgJHNoaXBwaW5nID0gaXNzZXQoJGRhdGFbJ3NoaXBwaW5nRnJvbSddKSA/ICRkYXRhWydzaGlwcGluZ0Zyb20nXSA6ICJVbml0ZWQgU3RhdGVzIjsNCiAgICAgICAgJHBhY2thZ2luZyA9IGlzc2V0KCRkYXRhWydwYWNrYWdpbmcnXSkgPyAkZGF0YVsncGFja2FnaW5nJ10gOiAiU2hpcHMgaW4gYSBCb3giOw0KDQogICAgICAgICRpbWFnZV91cmwgPSBpc3NldCgkZGF0YVsnaW1hZ2VfdXJsJ10pID8gJGRhdGFbJ2ltYWdlX3VybCddIDogJyc7DQogICAgICAgICRzYWF0Y2hpX3VybCA9IGlzc2V0KCRkYXRhWydzYWF0Y2hpX3VybCddKSA/ICRkYXRhWydzYWF0Y2hpX3VybCddIDogJyc7DQoNCiAgICAgICAgLy8gLS0tIEZJTFRFUklORyBDQVRFR09SSUVTIC0tLQ0KICAgICAgICAkd19udW0gPSBmbG9hdHZhbCgkd2lkdGgpOw0KICAgICAgICAkc2l6ZV9jYXQgPSAnbWVkaXVtJzsNCiAgICAgICAgaWYgKCR3X251bSA8IDI0KSAkc2l6ZV9jYXQgPSAnc21hbGwnOw0KICAgICAgICBlbHNlaWYgKCR3X251bSA+PSAyNCAmJiAkd19udW0gPCA0MCkgJHNpemVfY2F0ID0gJ21lZGl1bSc7DQogICAgICAgIGVsc2VpZiAoJHdfbnVtID49IDQwICYmICR3X251bSA8IDYwKSAkc2l6ZV9jYXQgPSAnbGFyZ2UnOw0KICAgICAgICBlbHNlaWYgKCR3X251bSA+PSA2MCkgJHNpemVfY2F0ID0gJ292ZXJzaXplZCc7DQoNCiAgICAgICAgJHByaWNlX251bSA9IGZsb2F0dmFsKGlzc2V0KCRkYXRhWydwcmljZSddKSA/ICRkYXRhWydwcmljZSddIDogMCk7DQogICAgICAgICRwcmljZV9yYW5nZSA9ICd1bmRlci0xMDAwJzsNCiAgICAgICAgaWYgKCRwcmljZV9udW0gPCAxMDAwKSAkcHJpY2VfcmFuZ2UgPSAndW5kZXItMTAwMCc7DQogICAgICAgIGVsc2VpZiAoJHByaWNlX251bSA+PSAxMDAwICYmICRwcmljZV9udW0gPCAyMDAwKSAkcHJpY2VfcmFuZ2UgPSAnMTAwMC0yMDAwJzsNCiAgICAgICAgZWxzZWlmICgkcHJpY2VfbnVtID49IDIwMDAgJiYgJHByaWNlX251bSA8IDMwMDApICRwcmljZV9yYW5nZSA9ICcyMDAwLTMwMDAnOw0KICAgICAgICBlbHNlaWYgKCRwcmljZV9udW0gPj0gMzAwMCAmJiAkcHJpY2VfbnVtIDwgNTAwMCkgJHByaWNlX3JhbmdlID0gJzMwMDAtNTAwMCc7DQogICAgICAgIGVsc2VpZiAoJHByaWNlX251bSA+PSA1MDAwKSAkcHJpY2VfcmFuZ2UgPSAnNTAwMC1wbHVzJzsNCg0KICAgICAgICAvLyBGaWxlIExvb2t1cHMNCiAgICAgICAgJGNhbmRpZGF0ZXMgPSBbDQogICAgICAgICAgICBpc3NldCgkZGF0YVsnc2x1ZyddKSA/ICRkYXRhWydzbHVnJ10gLiAnX3NwZWMucGRmJyA6ICcnLCAvLyBQcmlvcml0eSAxOiBFeGFjdCBKU09OIHNsdWcNCiAgICAgICAgICAgIGlzc2V0KCRkYXRhWyd0aXRsZSddKSA/ICRkYXRhWyd0aXRsZSddIC4gJ19zcGVjLnBkZicgOiAnJywNCiAgICAgICAgICAgICR0aXRsZSAuICdfc3BlYy5wZGYnLA0KICAgICAgICAgICAgc2FuaXRpemVfdGl0bGUoJHRpdGxlKSAuICdfc3BlYy5wZGYnLA0KICAgICAgICAgICAgLy8gQWRkIG5ldyBkZXRlY3RlZCBwYXR0ZXJucw0KICAgICAgICAgICAgaXNzZXQoJGRhdGFbJ3RpdGxlJ10pID8gJGRhdGFbJ3RpdGxlJ10gLiAnX1NoZWV0LnBkZicgOiAnJywNCiAgICAgICAgICAgIGlzc2V0KCRkYXRhWyd0aXRsZSddKSA/ICRkYXRhWyd0aXRsZSddIC4gJyBQYWludGluZ19TaGVldC5wZGYnIDogJycsDQogICAgICAgICAgICAkdGl0bGUgLiAnX1NoZWV0LnBkZicsDQogICAgICAgICAgICAkdGl0bGUgLiAnIFBhaW50aW5nX1NoZWV0LnBkZicNCiAgICAgICAgXTsNCiAgICAgICAgJGNhbmRpZGF0ZXMgPSBhcnJheV9maWx0ZXIoJGNhbmRpZGF0ZXMpOw0KICAgICAgICAkc3BlY19maWxlID0gJHRoaXMtPmZpbmRfZmlsZShBQlNQQVRIIC4gJ2Rvd25sb2Fkcy9zcGVjX3NoZWV0cy8nLCAkY2FuZGlkYXRlcyk7DQoNCiAgICAgICAgJHppcF9jYW5kaWRhdGVzID0gWw0KICAgICAgICAgICAgaXNzZXQoJGRhdGFbJ3RpdGxlJ10pID8gJGRhdGFbJ3RpdGxlJ10gLiAnX0hpZ2hSZXMuemlwJyA6ICcnLA0KICAgICAgICAgICAgaXNzZXQoJGRhdGFbJ3NsdWcnXSkgPyAkZGF0YVsnc2x1ZyddIC4gJ19IaWdoUmVzLnppcCcgOiAnJywNCiAgICAgICAgICAgICR0aXRsZSAuICdfSGlnaFJlcy56aXAnLA0KICAgICAgICAgICAgc2FuaXRpemVfdGl0bGUoJHRpdGxlKSAuICdfSGlnaFJlcy56aXAnLA0KICAgICAgICAgICAgc3RyX3JlcGxhY2UoJyAnLCAnXycsICR0aXRsZSkgLiAnX0hpZ2hSZXMuemlwJywNCiAgICAgICAgICAgIGlzc2V0KCRkYXRhWyd0aXRsZSddKSA/IHN0cl9yZXBsYWNlKCcgJywgJ18nLCAkZGF0YVsndGl0bGUnXSkgLiAnX0hpZ2hSZXMuemlwJyA6ICcnDQogICAgICAgIF07DQogICAgICAgICR6aXBfY2FuZGlkYXRlcyA9IGFycmF5X2ZpbHRlcigkemlwX2NhbmRpZGF0ZXMpOw0KICAgICAgICAkemlwX2ZpbGUgPSAkdGhpcy0+ZmluZF9maWxlKEFCU1BBVEggLiAnZG93bmxvYWRzL2hpZ2hfcmVzLycsICR6aXBfY2FuZGlkYXRlcyk7DQoNCiAgICAgICAgLy8gLS0tIEZVTEwgSFRNTCBPVVRQVVQgLS0tDQogICAgICAgID8+DQo8IURPQ1RZUEUgaHRtbD4NCjxodG1sIGxhbmc9ImVuIj4NCjxoZWFkPg0KICAgIDxtZXRhIGNoYXJzZXQ9IlVURi04Ij4NCiAgICA8bWV0YSBuYW1lPSJ2aWV3cG9ydCIgY29udGVudD0id2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEuMCI+DQogICAgPHRpdGxlPjw/cGhwIGVjaG8gZXNjX2h0bWwoJHRpdGxlKTsgPz4gLSBFbGxpb3QgU3BlbmNlciBNb3JnYW48L3RpdGxlPg0KICAgIDwhLS0gRm9udHMgLS0+DQogICAgPGxpbmsgcmVsPSJwcmVjb25uZWN0IiBocmVmPSJodHRwczovL2ZvbnRzLmdvb2dsZWFwaXMuY29tIj4NCiAgICA8bGluayByZWw9InByZWNvbm5lY3QiIGhyZWY9Imh0dHBzOi8vZm9udHMuZ3N0YXRpYy5jb20iIGNyb3Nzb3JpZ2luPg0KICAgIDxsaW5rIGhyZWY9Imh0dHBzOi8vZm9udHMuZ29vZ2xlYXBpcy5jb20vY3NzMj9mYW1pbHk9UGxheWZhaXIrRGlzcGxheTppdGFsLHdnaHRAMCw0MDA7MCw2MDA7MSw0MDAmZmFtaWx5PUludGVyOndnaHRAMzAwOzQwMDs1MDA7NjAwJmRpc3BsYXk9c3dhcCIgcmVsPSJzdHlsZXNoZWV0Ij4NCiAgICANCiAgICA8IS0tIFN0cnVjdHVyZWQgRGF0YSAtLT4NCiAgICA8c2NyaXB0IHR5cGU9ImFwcGxpY2F0aW9uL2xkK2pzb24iPg0KICAgIHsNCiAgICAgICJAY29udGV4dCI6ICJodHRwczovL3NjaGVtYS5vcmciLA0KICAgICAgIkB0eXBlIjogIlZpc3VhbEFydHdvcmsiLA0KICAgICAgIm5hbWUiOiAiPD9waHAgZWNobyBlc2NfanMoJHRpdGxlKTsgPz4iLA0KICAgICAgImltYWdlIjogIjw/cGhwIGVjaG8gZXNjX3VybCgkaW1hZ2VfdXJsKTsgPz4iLA0KICAgICAgImRlc2NyaXB0aW9uIjogIjw/cGhwIGVjaG8gZXNjX2pzKCRkZXNjKTsgPz4iLA0KICAgICAgImFydGlzdCI6IHsNCiAgICAgICAgIkB0eXBlIjogIlBlcnNvbiIsDQogICAgICAgICJuYW1lIjogIkVsbGlvdCBTcGVuY2VyIE1vcmdhbiINCiAgICAgIH0sDQogICAgICAid2lkdGgiOiB7IkB0eXBlIjogIkRpc3RhbmNlIiwgInZhbHVlIjogIjw/cGhwIGVjaG8gZXNjX2pzKCR3aWR0aCk7ID8+IiwgInVuaXRDb2RlIjogIklOSCJ9LA0KICAgICAgImhlaWdodCI6IHsiQHR5cGUiOiAiRGlzdGFuY2UiLCAidmFsdWUiOiAiPD9waHAgZWNobyBlc2NfanMoJGhlaWdodCk7ID8+IiwgInVuaXRDb2RlIjogIklOSCJ9LA0KICAgICAgImFkZGl0aW9uYWxQcm9wZXJ0eSI6IFsNCiAgICAgICAgew0KICAgICAgICAgICJAdHlwZSI6ICJQcm9wZXJ0eVZhbHVlIiwNCiAgICAgICAgICAibmFtZSI6ICJSZWFkeSB0byBIYW5nIiwNCiAgICAgICAgICAidmFsdWUiOiAiPD9waHAgZWNobyBlc2NfanMoJGluc3RhbGxhdGlvbik7ID8+Ig0KICAgICAgICB9LA0KICAgICAgICB7DQogICAgICAgICAgIkB0eXBlIjogIlByb3BlcnR5VmFsdWUiLA0KICAgICAgICAgICJuYW1lIjogIkZyYW1pbmciLA0KICAgICAgICAgICJ2YWx1ZSI6ICI8P3BocCBlY2hvIGVzY19qcygkZnJhbWluZyk7ID8+Ig0KICAgICAgICB9DQogICAgICBdDQogICAgfQ0KICAgIDwvc2NyaXB0Pg0KICAgIA0KICAgIDxzdHlsZT4NCiAgICAgICAgLyogUkVTRVQgJiBDT1JFICovDQogICAgICAgICogeyBib3gtc2l6aW5nOiBib3JkZXItYm94OyB9DQogICAgICAgIGJvZHkgew0KICAgICAgICAgICAgbWFyZ2luOiAwOyBwYWRkaW5nOiAwOw0KICAgICAgICAgICAgZm9udC1mYW1pbHk6ICdJbnRlcicsIHNhbnMtc2VyaWY7DQogICAgICAgICAgICBjb2xvcjogIzJjM2U1MDsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNmZmZmZmY7DQogICAgICAgICAgICBvdmVyZmxvdy14OiBoaWRkZW47DQogICAgICAgICAgICB3aWR0aDogMTAwJTsNCiAgICAgICAgfQ0KICAgICAgICBhIHsgY29sb3I6IGluaGVyaXQ7IHRleHQtZGVjb3JhdGlvbjogbm9uZTsgfQ0KICAgICAgICANCiAgICAgICAgLyogSEVBREVSIC0gRklYRUQgJiBUUkFOU1BBUkVOVCAqLw0KICAgICAgICBoZWFkZXIgew0KICAgICAgICAgICAgcG9zaXRpb246IGZpeGVkOyB0b3A6IDA7IGxlZnQ6IDA7IHdpZHRoOiAxMDAlOw0KICAgICAgICAgICAgZGlzcGxheTogZmxleDsganVzdGlmeS1jb250ZW50OiBmbGV4LWVuZDsgYWxpZ24taXRlbXM6IGNlbnRlcjsgLyogQ2hhbmdlZCBzcGFjaW5nIHRvIGZsZXgtZW5kICovDQogICAgICAgICAgICBwYWRkaW5nOiAyMHB4IDQwcHg7DQogICAgICAgICAgICB6LWluZGV4OiAxMDAwOw0KICAgICAgICAgICAgYmFja2dyb3VuZDogcmdiYSgyNTUsMjU1LDI1NSwwLjk1KTsNCiAgICAgICAgICAgIGJhY2tkcm9wLWZpbHRlcjogYmx1cig1cHgpOw0KICAgICAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHJnYmEoMCwwLDAsMC4wNSk7DQogICAgICAgIH0NCiAgICAgICAgLnNpdGUtdGl0bGUgew0KICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlOw0KICAgICAgICAgICAgbGVmdDogNTAlOw0KICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKC01MCUpOw0KICAgICAgICAgICAgZm9udC1mYW1pbHk6ICdQbGF5ZmFpciBEaXNwbGF5Jywgc2VyaWY7DQogICAgICAgICAgICBmb250LXNpemU6IDEuNXJlbTsNCiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA0MDA7DQogICAgICAgICAgICB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlOw0KICAgICAgICAgICAgbGV0dGVyLXNwYWNpbmc6IDFweDsNCiAgICAgICAgICAgIGNvbG9yOiAjMWExYTFhOw0KICAgICAgICAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDsgLyogUHJldmVudCB3cmFwcGluZyBvbiBkZXNrdG9wICovDQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIC8qIEhBTUJVUkdFUiBNRU5VICovDQogICAgICAgIC5tZW51LXRvZ2dsZSB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiBub25lOyBib3JkZXI6IG5vbmU7IGN1cnNvcjogcG9pbnRlcjsNCiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7IGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47IGdhcDogNnB4Ow0KICAgICAgICAgICAgei1pbmRleDogMjAwMDsgcGFkZGluZzogMTBweDsNCiAgICAgICAgfQ0KICAgICAgICAuYmFyIHsgd2lkdGg6IDI0cHg7IGhlaWdodDogMXB4OyBiYWNrZ3JvdW5kOiAjMWExYTFhOyB0cmFuc2l0aW9uOiAwLjNzOyB9DQogICAgICAgIA0KICAgICAgICAvKiBNRU5VIE9WRVJMQVkgKi8NCiAgICAgICAgLm1lbnUtb3ZlcmxheSB7DQogICAgICAgICAgICBwb3NpdGlvbjogZml4ZWQ7IHRvcDogMDsgbGVmdDogMDsgd2lkdGg6IDEwMHZ3OyBoZWlnaHQ6IDEwMHZoOw0KICAgICAgICAgICAgYmFja2dyb3VuZDogd2hpdGU7IHotaW5kZXg6IDE1MDA7DQogICAgICAgICAgICBkaXNwbGF5OiBmbGV4OyBmbGV4LWRpcmVjdGlvbjogY29sdW1uOyBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsgYWxpZ24taXRlbXM6IGNlbnRlcjsNCiAgICAgICAgICAgIG9wYWNpdHk6IDA7IHBvaW50ZXItZXZlbnRzOiBub25lOyB0cmFuc2l0aW9uOiAwLjRzIGVhc2U7DQogICAgICAgIH0NCiAgICAgICAgLm1lbnUtb3ZlcmxheS5hY3RpdmUgeyBvcGFjaXR5OiAxOyBwb2ludGVyLWV2ZW50czogYXV0bzsgfQ0KICAgICAgICAubWVudS1vdmVybGF5IG5hdiBhIHsNCiAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrOyBmb250LWZhbWlseTogJ1BsYXlmYWlyIERpc3BsYXknLCBzZXJpZjsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMnJlbTsgbWFyZ2luOiAxNXB4IDA7IGNvbG9yOiAjMWExYTFhOw0KICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOyB0cmFuc2l0aW9uOiAwLjJzOw0KICAgICAgICB9DQogICAgICAgIC5tZW51LW92ZXJsYXkgbmF2IGE6aG92ZXIgeyBjb2xvcjogIzU1NTsgdHJhbnNmb3JtOiBzY2FsZSgxLjAyKTsgfQ0KDQogICAgICAgIC8qIEFSVFdPUksgQ09OVEFJTkVSICovDQogICAgICAgIC5hcnR3b3JrLWNvbnRhaW5lciB7DQogICAgICAgICAgICBtYXgtd2lkdGg6IDEwMCU7DQogICAgICAgICAgICBtYXJnaW4tdG9wOiA4MHB4OyAvKiBPZmZzZXQgZm9yIGZpeGVkIGhlYWRlciAqLw0KICAgICAgICAgICAgcGFkZGluZy1ib3R0b206IDYwcHg7DQogICAgICAgIH0NCg0KICAgICAgICAvKiBIRVJPIElNQUdFICovDQogICAgICAgIC5oZXJvLXNlY3Rpb24gew0KICAgICAgICAgICAgd2lkdGg6IDEwMCU7DQogICAgICAgICAgICBkaXNwbGF5OiBmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNmYWZhZmE7DQogICAgICAgICAgICBwYWRkaW5nOiA0MHB4IDIwcHg7DQogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiA0MHB4Ow0KICAgICAgICB9DQogICAgICAgIC5hcnR3b3JrLWhlcm8taW1hZ2Ugew0KICAgICAgICAgICAgbWF4LXdpZHRoOiA5MDBweDsNCiAgICAgICAgICAgIHdpZHRoOiAxMDAlOw0KICAgICAgICAgICAgaGVpZ2h0OiBhdXRvOw0KICAgICAgICAgICAgYm94LXNoYWRvdzogMCAxMHB4IDQwcHggcmdiYSgwLDAsMCwwLjA4KTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8qIElORk8gU0VDVElPTiAqLw0KICAgICAgICAuaW5mby1zZWN0aW9uIHsNCiAgICAgICAgICAgIG1heC13aWR0aDogODAwcHg7DQogICAgICAgICAgICBtYXJnaW46IDAgYXV0bzsNCiAgICAgICAgICAgIHBhZGRpbmc6IDAgMjBweDsNCiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsNCiAgICAgICAgfQ0KICAgICAgICAuYXJ0d29yay10aXRsZSB7DQogICAgICAgICAgICBmb250LWZhbWlseTogJ1BsYXlmYWlyIERpc3BsYXknLCBzZXJpZjsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogM3JlbTsgbWFyZ2luOiAwIDAgMTBweCAwOw0KICAgICAgICAgICAgY29sb3I6ICMxYTFhMWE7IGZvbnQtd2VpZ2h0OiA0MDA7DQogICAgICAgIH0NCiAgICAgICAgLmFydHdvcmstcHJpY2Ugew0KICAgICAgICAgICAgZm9udC1mYW1pbHk6ICdQbGF5ZmFpciBEaXNwbGF5Jywgc2VyaWY7DQogICAgICAgICAgICBmb250LXNpemU6IDEuNXJlbTsgbWFyZ2luLWJvdHRvbTogMzBweDsNCiAgICAgICAgICAgIGNvbG9yOiAjNDQ0Ow0KICAgICAgICB9DQoNCiAgICAgICAgLyogQlVUVE9OUyAqLw0KICAgICAgICAuYWN0aW9ucyB7IGRpc3BsYXk6IGZsZXg7IGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGdhcDogMTVweDsgbWFyZ2luLWJvdHRvbTogNTBweDsgfQ0KICAgICAgICAuYnRuIHsNCiAgICAgICAgICAgIHBhZGRpbmc6IDE0cHggMzBweDsgZm9udC1zaXplOiAwLjlyZW07IHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7DQogICAgICAgICAgICBsZXR0ZXItc3BhY2luZzogMXB4OyBib3JkZXItcmFkaXVzOiA0cHg7IHRyYW5zaXRpb246IDAuM3M7DQogICAgICAgICAgICB3aWR0aDogMTAwJTsgbWF4LXdpZHRoOiAzMDBweDsgdGV4dC1hbGlnbjogY2VudGVyOw0KICAgICAgICB9DQogICAgICAgIC5idG4tcHJpbWFyeSB7IGJhY2tncm91bmQ6ICMxYTFhMWE7IGNvbG9yOiB3aGl0ZTsgYm9yZGVyOiAxcHggc29saWQgIzFhMWExYTsgfQ0KICAgICAgICAuYnRuLXByaW1hcnk6aG92ZXIgeyBiYWNrZ3JvdW5kOiAjMzMzOyB9DQogICAgICAgIC5idG4tc2Vjb25kYXJ5IHsgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7IGNvbG9yOiAjMWExYTFhOyBib3JkZXI6IDFweCBzb2xpZCAjMWExYTFhOyB9DQogICAgICAgIC5idG4tc2Vjb25kYXJ5OmhvdmVyIHsgYmFja2dyb3VuZDogI2Y1ZjVmNTsgfQ0KDQogICAgICAgIC8qIERFVEFJTFMgR1JJRCAqLw0KICAgICAgICAuZGV0YWlscy1ncmlkIHsNCiAgICAgICAgICAgIGRpc3BsYXk6IGdyaWQ7IGdyaWQtdGVtcGxhdGUtY29sdW1uczogMWZyIDFmcjsNCiAgICAgICAgICAgIGJvcmRlci10b3A6IDFweCBzb2xpZCAjZWVlOyBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2VlZTsNCiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDQwcHg7IHRleHQtYWxpZ246IGxlZnQ7DQogICAgICAgIH0NCiAgICAgICAgLmRldGFpbC1pdGVtIHsNCiAgICAgICAgICAgIHBhZGRpbmc6IDIwcHg7IGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZWVlOw0KICAgICAgICAgICAgYm9yZGVyLXJpZ2h0OiAxcHggc29saWQgI2VlZTsNCiAgICAgICAgfQ0KICAgICAgICAuZGV0YWlsLWl0ZW06bnRoLWNoaWxkKDJuKSB7IGJvcmRlci1yaWdodDogbm9uZTsgfQ0KICAgICAgICAubGFiZWwgeyBmb250LXNpemU6IDAuOHJlbTsgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTsgY29sb3I6ICM4ODg7IGRpc3BsYXk6IGJsb2NrOyBtYXJnaW4tYm90dG9tOiA1cHg7IH0NCiAgICAgICAgLnZhbHVlIHsgZm9udC1zaXplOiAxcmVtOyBjb2xvcjogIzIyMjsgfQ0KDQogICAgICAgIC8qIERFU0NSSVBUSU9OICovDQogICAgICAgIC5kZXNjcmlwdGlvbiB7DQogICAgICAgICAgICBmb250LXNpemU6IDEuMXJlbTsgbGluZS1oZWlnaHQ6IDEuODsgY29sb3I6ICM0NDQ7DQogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiA2MHB4OyBtYXgtd2lkdGg6IDcwMHB4OyBtYXJnaW4tbGVmdDogYXV0bzsgbWFyZ2luLXJpZ2h0OiBhdXRvOw0KICAgICAgICB9DQoNCiAgICAgICAgLyogU1BFQ1MgQk9YICovDQogICAgICAgIC5zcGVjcy1ib3ggew0KICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2RkZDsgcGFkZGluZzogMzBweDsgYm9yZGVyLXJhZGl1czogOHB4Ow0KICAgICAgICAgICAgYmFja2dyb3VuZDogI2ZmZjsgcG9zaXRpb246IHJlbGF0aXZlOyBtYXgtd2lkdGg6IDcwMHB4OyBtYXJnaW46IDAgYXV0byA2MHB4IGF1dG87DQogICAgICAgICAgICB0ZXh0LWFsaWduOiBsZWZ0Ow0KICAgICAgICB9DQogICAgICAgIC5zcGVjcy1ib3g6OmJlZm9yZSB7DQogICAgICAgICAgICBjb250ZW50OiAiVFJBREUgT05MWSI7IHBvc2l0aW9uOiBhYnNvbHV0ZTsgdG9wOiAyMHB4OyByaWdodDogMjBweDsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMC43cmVtOyBmb250LXdlaWdodDogNzAwOyBib3JkZXI6IDFweCBzb2xpZCAjMDAwOyBwYWRkaW5nOiA0cHggOHB4OyBib3JkZXItcmFkaXVzOiA0cHg7DQogICAgICAgIH0NCiAgICAgICAgLnNwZWNzLWhlYWRlciB7IGZvbnQtZmFtaWx5OiAnUGxheWZhaXIgRGlzcGxheScsIHNlcmlmOyBmb250LXNpemU6IDEuNnJlbTsgbWFyZ2luOiAwIDAgMjBweCAwOyB9DQogICAgICAgIC5zcGVjcy1saXN0IGxpIHsgbWFyZ2luLWJvdHRvbTogMTBweDsgZGlzcGxheTogZmxleDsgYWxpZ24taXRlbXM6IGNlbnRlcjsgfQ0KICAgICAgICAuY2hlY2sgeyBjb2xvcjogZ3JlZW47IG1hcmdpbi1yaWdodDogMTBweDsgfQ0KICAgICAgICAuZG93bmxvYWRzIHsgbWFyZ2luLXRvcDogMjBweDsgYm9yZGVyLXRvcDogMXB4IGRhc2hlZCAjZGRkOyBwYWRkaW5nLXRvcDogMjBweDsgZGlzcGxheTogZmxleDsgZ2FwOiAyMHB4OyB9DQogICAgICAgIC5kb3dubG9hZC1saW5rIHsgZm9udC1zaXplOiAwLjlyZW07IGNvbG9yOiAjNjY2OyBib3JkZXItYm90dG9tOiAxcHggZG90dGVkICM4ODg7IH0NCg0KICAgICAgICAvKiBGT09URVIgKi8NCiAgICAgICAgZm9vdGVyIHsgbWFyZ2luLXRvcDogODBweDsgcGFkZGluZzogNDBweDsgYmFja2dyb3VuZDogIzExMTsgY29sb3I6ICNmZmY7IHRleHQtYWxpZ246IGNlbnRlcjsgfQ0KICAgICAgICANCiAgICAgICAgLyogUkVTUE9OU0lWRSAqLw0KICAgICAgICBAbWVkaWEobWF4LXdpZHRoOiA3NjhweCkgew0KICAgICAgICAgICAgLmFydHdvcmstdGl0bGUgeyBmb250LXNpemU6IDJyZW07IH0NCiAgICAgICAgICAgIC5kZXRhaWxzLWdyaWQgeyBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmcjsgfQ0KICAgICAgICAgICAgLmRldGFpbC1pdGVtIHsgYm9yZGVyLXJpZ2h0OiBub25lOyB9DQogICAgICAgICAgICBoZWFkZXIgeyBwYWRkaW5nOiAxNXB4IDIwcHg7IH0NCiAgICAgICAgfQ0KICAgIDwvc3R5bGU+DQo8L2hlYWQ+DQo8Ym9keT4NCg0KICAgIDwhLS0gSEVBREVSIC0tPg0KICAgIDxoZWFkZXI+DQogICAgICAgIDxhIGhyZWY9Ii8iIGNsYXNzPSJzaXRlLXRpdGxlIj5FbGxpb3QgU3BlbmNlciBNb3JnYW48L2E+DQogICAgICAgIDxidXR0b24gY2xhc3M9Im1lbnUtdG9nZ2xlIiBpZD0ibWVudVRvZ2dsZSIgYXJpYS1sYWJlbD0iT3BlbiBNZW51Ij4NCiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJiYXIiPjwvc3Bhbj4NCiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJiYXIiPjwvc3Bhbj4NCiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJiYXIiPjwvc3Bhbj4NCiAgICAgICAgPC9idXR0b24+DQogICAgPC9oZWFkZXI+DQoNCiAgICA8IS0tIE1FTlUgT1ZFUkxBWSAtLT4NCiAgICA8ZGl2IGNsYXNzPSJtZW51LW92ZXJsYXkiIGlkPSJtZW51T3ZlcmxheSI+DQogICAgICAgIDxuYXY+DQogICAgICAgICAgICA8YSBocmVmPSIvIj5Ib21lPC9hPg0KICAgICAgICAgICAgPGEgaHJlZj0iL2FydHdvcmtzIj5BcnR3b3JrczwvYT4NCiAgICAgICAgICAgIDxhIGhyZWY9Ii9hYm91dCI+QWJvdXQ8L2E+DQogICAgICAgICAgICA8YSBocmVmPSIvY29udGFjdCI+Q29udGFjdDwvYT4NCiAgICAgICAgICAgIDxhIGhyZWY9Ii90cmFkZSI+VHJhZGU8L2E+DQogICAgICAgIDwvbmF2Pg0KICAgICAgICA8YnV0dG9uIGNsYXNzPSJtZW51LXRvZ2dsZSIgaWQ9Im1lbnVDbG9zZSIgc3R5bGU9InBvc2l0aW9uOiBhYnNvbHV0ZTsgdG9wOiAyMHB4OyByaWdodDogNDBweDsiPg0KICAgICAgICAgICAgIDwhLS0gQ2xvc2UgSWNvbiAtLT4NCiAgICAgICAgICAgICA8c3BhbiBjbGFzcz0iYmFyIiBzdHlsZT0idHJhbnNmb3JtOiByb3RhdGUoNDVkZWcpOyBwb3NpdGlvbjogYWJzb2x1dGU7Ij48L3NwYW4+DQogICAgICAgICAgICAgPHNwYW4gY2xhc3M9ImJhciIgc3R5bGU9InRyYW5zZm9ybTogcm90YXRlKC00NWRlZyk7IHBvc2l0aW9uOiBhYnNvbHV0ZTsiPjwvc3Bhbj4NCiAgICAgICAgPC9idXR0b24+DQogICAgPC9kaXY+DQoNCiAgICA8IS0tIE1BSU4gQ09OVEVOVCAtLT4NCiAgICA8ZGl2IGNsYXNzPSJhcnR3b3JrLWNvbnRhaW5lciIgDQogICAgICAgICBkYXRhLXNpemUtY2F0ZWdvcnk9Ijw/cGhwIGVjaG8gZXNjX2F0dHIoJHNpemVfY2F0KTsgPz4iDQogICAgICAgICBkYXRhLXByaWNlLXJhbmdlPSI8P3BocCBlY2hvIGVzY19hdHRyKCRwcmljZV9yYW5nZSk7ID8+Ig0KICAgICAgICAgZGF0YS1zdHlsZT0iPD9waHAgZWNobyBlc2NfYXR0cihzdHJ0b2xvd2VyKHN0cl9yZXBsYWNlKCcsICcsICctJywgJHN0eWxlcykpKTsgPz4iDQogICAgICAgICBkYXRhLWNvbG9ycz0iPD9waHAgZWNobyBlc2NfYXR0cihzdHJ0b2xvd2VyKHN0cl9yZXBsYWNlKCcsICcsICctJywgJGRldGVjdGVkX2NvbG9ycykpKTsgPz4iPg0KICAgICAgICANCiAgICAgICAgPGRpdiBjbGFzcz0iaGVyby1zZWN0aW9uIj4NCiAgICAgICAgICAgIDw/cGhwIGlmICgkaW1hZ2VfdXJsKTogPz4NCiAgICAgICAgICAgIDxpbWcgc3JjPSI8P3BocCBlY2hvIGVzY191cmwoJGltYWdlX3VybCk7ID8+IiBhbHQ9Ijw/cGhwIGVjaG8gZXNjX2F0dHIoJHRpdGxlKTsgPz4iIGNsYXNzPSJhcnR3b3JrLWhlcm8taW1hZ2Ugbm8tbGF6eSIgZGF0YS1uby1sYXp5PSIxIj4NCiAgICAgICAgICAgIDw/cGhwIGVuZGlmOyA/Pg0KICAgICAgICA8L2Rpdj4NCg0KICAgICAgICA8ZGl2IGNsYXNzPSJpbmZvLXNlY3Rpb24iPg0KICAgICAgICAgICAgPGgxIGNsYXNzPSJhcnR3b3JrLXRpdGxlIj48P3BocCBlY2hvIGVzY19odG1sKCR0aXRsZSk7ID8+PC9oMT4NCiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImFydHdvcmstcHJpY2UiPjw/cGhwIGVjaG8gZXNjX2h0bWwoJHByaWNlKTsgPz48L2Rpdj4NCg0KICAgICAgICAgICAgPGRpdiBjbGFzcz0iYWN0aW9ucyI+DQogICAgICAgICAgICAgICAgPD9waHAgaWYgKCRzYWF0Y2hpX3VybCk6ID8+DQogICAgICAgICAgICAgICAgPGEgaHJlZj0iPD9waHAgZWNobyBlc2NfdXJsKCRzYWF0Y2hpX3VybCk7ID8+IiBjbGFzcz0iYnRuIGJ0bi1wcmltYXJ5IGJ0bi1jb2xsZWN0b3IiIHRhcmdldD0iX2JsYW5rIj5QdXJjaGFzZSBvbiBTYWF0Y2hpIEFydDwvYT4NCiAgICAgICAgICAgICAgICA8P3BocCBlbmRpZjsgPz4NCiAgICAgICAgICAgICAgICA8YSBocmVmPSIvdHJhZGUiIGNsYXNzPSJidG4gYnRuLXNlY29uZGFyeSBidG4tZGVzaWduZXIiPlJlcXVlc3QgVHJhZGUgUHJpY2luZzwvYT4NCiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLXNlY29uZGFyeSBidG4tcHJldmlldyIgb25jbGljaz0ibGF1bmNoVmlzdWFsaXplcigpIj5QcmV2aWV3IGluIFlvdXIgUm9vbTwvYnV0dG9uPg0KICAgICAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImRldGFpbHMtZ3JpZCI+DQogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZGV0YWlsLWl0ZW0iPjxzcGFuIGNsYXNzPSJsYWJlbCI+RGltZW5zaW9uczwvc3Bhbj4gPHNwYW4gY2xhc3M9InZhbHVlIj48P3BocCBlY2hvIGVzY19odG1sKCRkaW1lbnNpb25zKTsgPz48L3NwYW4+PC9kaXY+DQogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZGV0YWlsLWl0ZW0iPjxzcGFuIGNsYXNzPSJsYWJlbCI+TWVkaXVtPC9zcGFuPiA8c3BhbiBjbGFzcz0idmFsdWUiPjw/cGhwIGVjaG8gZXNjX2h0bWwoJG1lZGl1bSk7ID8+PC9zcGFuPjwvZGl2Pg0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImRldGFpbC1pdGVtIj48c3BhbiBjbGFzcz0ibGFiZWwiPlN0eWxlczwvc3Bhbj4gPHNwYW4gY2xhc3M9InZhbHVlIj48P3BocCBlY2hvIGVzY19odG1sKCRzdHlsZXMpOyA/Pjwvc3Bhbj48L2Rpdj4NCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJkZXRhaWwtaXRlbSI+PHNwYW4gY2xhc3M9ImxhYmVsIj5GcmFtZTwvc3Bhbj4gPHNwYW4gY2xhc3M9InZhbHVlIj48P3BocCBlY2hvIGVzY19odG1sKCRmcmFtaW5nKTsgPz48L3NwYW4+PC9kaXY+DQogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZGV0YWlsLWl0ZW0iPjxzcGFuIGNsYXNzPSJsYWJlbCI+UGFja2FnaW5nPC9zcGFuPiA8c3BhbiBjbGFzcz0idmFsdWUiPjw/cGhwIGVjaG8gZXNjX2h0bWwoJHBhY2thZ2luZyk7ID8+PC9zcGFuPjwvZGl2Pg0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImRldGFpbC1pdGVtIj48c3BhbiBjbGFzcz0ibGFiZWwiPlNoaXBwaW5nPC9zcGFuPiA8c3BhbiBjbGFzcz0idmFsdWUiPjw/cGhwIGVjaG8gZXNjX2h0bWwoJHNoaXBwaW5nKTsgPz48L3NwYW4+PC9kaXY+DQogICAgICAgICAgICA8L2Rpdj4NCg0KICAgICAgICAgICAgPGRpdiBjbGFzcz0iZGVzY3JpcHRpb24iPg0KICAgICAgICAgICAgICAgIDxwPjw/cGhwIGVjaG8gZXNjX2h0bWwoJGRlc2MpOyA/PjwvcD4NCiAgICAgICAgICAgIDwvZGl2Pg0KDQogICAgICAgICAgICA8ZGl2IGNsYXNzPSJzcGVjcy1ib3giIHN0eWxlPSJiYWNrZ3JvdW5kOiByZ2JhKDI1NSwyNTUsMjU1LDAuNyk7IGJhY2tkcm9wLWZpbHRlcjogYmx1cigxMHB4KTsgYm9yZGVyOiAxcHggc29saWQgcmdiYSgwLDAsMCwwLjA1KTsiPg0KICAgICAgICAgICAgICAgIDxoMyBjbGFzcz0ic3BlY3MtaGVhZGVyIj5Gb3IgSW50ZXJpb3IgRGVzaWduZXJzPC9oMz4NCiAgICAgICAgICAgICAgICA8cCBzdHlsZT0iZm9udC1zaXplOiAwLjlyZW07IGNvbG9yOiAjNjY2OyBtYXJnaW4tYm90dG9tOiAyMHB4OyI+UGVyZmVjdCBmb3IgaW50ZXJpb3IgZGVzaWduIHByb2plY3RzIGFuZCBoaWdoLWVuZCByZXNpZGVudGlhbCBzcGFjZXMuIFRyYWRlIHByaWNpbmcgYXZhaWxhYmxlIGZvciBwcm9mZXNzaW9uYWxzLjwvcD4NCiAgICAgICAgICAgICAgICA8dWwgY2xhc3M9InNwZWNzLWxpc3QiIHN0eWxlPSJsaXN0LXN0eWxlOiBub25lOyBwYWRkaW5nOiAwOyI+DQogICAgICAgICAgICAgICAgICAgIDxsaT48c3BhbiBjbGFzcz0iY2hlY2siPuKckzwvc3Bhbj4gPHN0cm9uZz5JbnN0YWxsYXRpb246PC9zdHJvbmc+IDw/cGhwIGVjaG8gZXNjX2h0bWwoJGluc3RhbGxhdGlvbik7ID8+PC9saT4NCiAgICAgICAgICAgICAgICAgICAgPGxpPjxzcGFuIGNsYXNzPSJjaGVjayI+4pyTPC9zcGFuPiA8c3Ryb25nPldlaWdodDo8L3N0cm9uZz4gRXN0aW1hdGVkIDw/cGhwIGVjaG8gJHdfbnVtID4gNDAgPyAnMTAtMTUnIDogJzUtOCc7ID8+IGxiczwvbGk+DQogICAgICAgICAgICAgICAgICAgIDxsaT48c3BhbiBjbGFzcz0iY2hlY2siPuKckzwvc3Bhbj4gPHN0cm9uZz5GcmFtaW5nOjwvc3Ryb25nPiA8P3BocCBlY2hvIGVzY19odG1sKCRmcmFtaW5nKTsgPz48L2xpPg0KICAgICAgICAgICAgICAgICAgICA8bGk+PHNwYW4gY2xhc3M9ImNoZWNrIj7inJM8L3NwYW4+IDxzdHJvbmc+TGVhZCBUaW1lOjwvc3Ryb25nPiBTaGlwcyBpbiA1LTcgRGF5czwvbGk+DQogICAgICAgICAgICAgICAgPC91bD4NCg0KICAgICAgICAgICAgICAgIDw/cGhwIGlmICgkc3BlY19maWxlIHx8ICR6aXBfZmlsZSk6ID8+DQogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZG93bmxvYWRzIj4NCiAgICAgICAgICAgICAgICAgICAgPD9waHAgaWYgKCRzcGVjX2ZpbGUpOiA/Pg0KICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj0iL2Rvd25sb2Fkcy9zcGVjX3NoZWV0cy88P3BocCBlY2hvIGVzY19hdHRyKCRzcGVjX2ZpbGUpOyA/PiIgY2xhc3M9ImRvd25sb2FkLWxpbmsiIGRvd25sb2FkPvCfk4QgRG93bmxvYWQgU3BlYyBTaGVldDwvYT4NCiAgICAgICAgICAgICAgICAgICAgPD9waHAgZW5kaWY7ID8+DQogICAgICAgICAgICAgICAgICAgIDw/cGhwIGlmICgkemlwX2ZpbGUpOiA/Pg0KICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj0iL2Rvd25sb2Fkcy9oaWdoX3Jlcy88P3BocCBlY2hvIGVzY19hdHRyKCR6aXBfZmlsZSk7ID8+IiBjbGFzcz0iZG93bmxvYWQtbGluayIgZG93bmxvYWQ+8J+WvO+4jyBIaWdoLVJlcyBQYWNrYWdlPC9hPg0KICAgICAgICAgICAgICAgICAgICA8P3BocCBlbmRpZjsgPz4NCiAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICA8P3BocCBlbmRpZjsgPz4NCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgIDwvZGl2Pg0KDQogICAgICAgICAgICA8IS0tIFJFTEFURUQgUElFQ0VTIC0tPg0KICAgICAgICAgICAgPD9waHAgDQogICAgICAgICAgICAkcmVsYXRlZCA9ICR0aGlzLT5nZXRfcmVsYXRlZCgkZGF0YSwgMyk7DQogICAgICAgICAgICBpZiAoJHJlbGF0ZWQpOiANCiAgICAgICAgICAgID8+DQogICAgICAgICAgICA8ZGl2IGNsYXNzPSJyZWxhdGVkLXNlY3Rpb24iIHN0eWxlPSJtYXJnaW4tdG9wOiA4MHB4OyBwYWRkaW5nLXRvcDogNjBweDsgYm9yZGVyLXRvcDogMXB4IHNvbGlkICNlZWU7Ij4NCiAgICAgICAgICAgICAgICA8aDMgc3R5bGU9ImZvbnQtZmFtaWx5OiAnUGxheWZhaXIgRGlzcGxheScsIHNlcmlmOyBmb250LXNpemU6IDEuOHJlbTsgbWFyZ2luLWJvdHRvbTogNDBweDsiPlJlbGF0ZWQgUGllY2VzIGZvciBZb3VyIFByb2plY3Q8L2gzPg0KICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6IGdyaWQ7IGdyaWQtdGVtcGxhdGUtY29sdW1uczogcmVwZWF0KDMsIDFmcik7IGdhcDogMzBweDsgdGV4dC1hbGlnbjogbGVmdDsiPg0KICAgICAgICAgICAgICAgICAgICA8P3BocCBmb3JlYWNoICgkcmVsYXRlZCBhcyAkcik6ID8+DQogICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9Ijw/cGhwIGVjaG8gZXNjX3VybCgkclsnbGluayddKTsgPz4iIHN0eWxlPSJkaXNwbGF5OiBibG9jazsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9Ijw/cGhwIGVjaG8gZXNjX3VybCgkclsnaW1hZ2VfdXJsJ10pOyA/PiIgY2xhc3M9Im5vLWxhenkiIGRhdGEtbm8tbGF6eT0iMSIgc3R5bGU9IndpZHRoOiAxMDAlOyBhc3BlY3QtcmF0aW86IDE7IG9iamVjdC1maXQ6IGNvdmVyOyBtYXJnaW4tYm90dG9tOiAxNXB4OyBib3gtc2hhZG93OiAwIDVweCAxNXB4IHJnYmEoMCwwLDAsMC4wNSk7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImZvbnQtd2VpZ2h0OiA1MDA7Ij48P3BocCBlY2hvIGVzY19odG1sKCRyWyd0aXRsZSddKTsgPz48L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImZvbnQtc2l6ZTogMC44NXJlbTsgY29sb3I6ICM4ODg7Ij48P3BocCBlY2hvIGVzY19odG1sKCRyWydkaW1lbnNpb25zJ10gPz8gKCRyWyd3aWR0aCddLicgeCAnLiRyWydoZWlnaHQnXS4nIGluJykpOyA/PjwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICA8L2E+DQogICAgICAgICAgICAgICAgICAgIDw/cGhwIGVuZGZvcmVhY2g7ID8+DQogICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0ibWFyZ2luLXRvcDogNDBweDsiPg0KICAgICAgICAgICAgICAgICAgICA8YSBocmVmPSIvdHJhZGUiIHN0eWxlPSJmb250LXNpemU6IDAuOXJlbTsgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTsgbGV0dGVyLXNwYWNpbmc6IDFweDsgY29sb3I6ICM4YjczNTU7IGZvbnQtd2VpZ2h0OiA1MDA7Ij5WaWV3IEZ1bGwgVHJhZGUgQ29sbGVjdGlvbiAmcnNhcXVvOzwvYT4NCiAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgPD9waHAgZW5kaWY7ID8+DQogICAgICAgIDwvZGl2Pg0KDQogICAgPC9kaXY+DQoNCiAgICA8IS0tIEZPT1RFUiAtLT4NCiAgICA8Zm9vdGVyPg0KICAgICAgICA8cD4mY29weTsgPD9waHAgZWNobyBkYXRlKCdZJyk7ID8+IEVsbGlvdCBTcGVuY2VyIE1vcmdhbi4gQWxsIFJpZ2h0cyBSZXNlcnZlZC48L3A+DQogICAgPC9mb290ZXI+DQoNCiAgICA8IS0tIEpTIC0tPg0KICAgIDxzY3JpcHQ+DQogICAgICAgIGNvbnN0IHRvZ2dsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtZW51VG9nZ2xlJyk7DQogICAgICAgIGNvbnN0IGNsb3NlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21lbnVDbG9zZScpOw0KICAgICAgICBjb25zdCBvdmVybGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21lbnVPdmVybGF5Jyk7DQogICAgICAgIGNvbnN0IGJvZHkgPSBkb2N1bWVudC5ib2R5Ow0KDQogICAgICAgIGZ1bmN0aW9uIHRvZ2dsZU1lbnUoKSB7DQogICAgICAgICAgICBvdmVybGF5LmNsYXNzTGlzdC50b2dnbGUoJ2FjdGl2ZScpOw0KICAgICAgICAgICAgLy8gUHJldmVudCBzY3JvbGxpbmcgd2hlbiBtZW51IGlzIG9wZW4NCiAgICAgICAgICAgIGlmKG92ZXJsYXkuY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKSkgew0KICAgICAgICAgICAgICAgIGJvZHkuc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJzsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgYm9keS5zdHlsZS5vdmVyZmxvdyA9ICcnOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgdG9nZ2xlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdG9nZ2xlTWVudSk7DQogICAgICAgIGNsb3NlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdG9nZ2xlTWVudSk7DQoNCiAgICAgICAgLy8gQW5hbHl0aWNzICYgSW50ZXJhY3Rpb24NCiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJ0bi1jb2xsZWN0b3InKT8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7DQogICAgICAgICAgICBjb25zb2xlLmxvZygiQW5hbHl0aWNzOiBDb2xsZWN0b3IgQ1RBIENsaWNrZWQgZm9yIDw/cGhwIGVjaG8gZXNjX2pzKCR0aXRsZSk7ID8+Iik7DQogICAgICAgICAgICBpZih3aW5kb3cuZ3RhZykgZ3RhZygnZXZlbnQnLCAnY29sbGVjdG9yX3B1cmNoYXNlX2NsaWNrJywgeyAnYXJ0d29yayc6ICc8P3BocCBlY2hvIGVzY19qcygkdGl0bGUpOyA/PicgfSk7DQogICAgICAgIH0pOw0KDQogICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5idG4tZGVzaWduZXInKT8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7DQogICAgICAgICAgICBjb25zb2xlLmxvZygiQW5hbHl0aWNzOiBEZXNpZ25lciBDVEEgQ2xpY2tlZCBmb3IgPD9waHAgZWNobyBlc2NfanMoJHRpdGxlKTsgPz4iKTsNCiAgICAgICAgICAgIGlmKHdpbmRvdy5ndGFnKSBndGFnKCdldmVudCcsICdkZXNpZ25lcl90cmFkZV9jbGljaycsIHsgJ2FydHdvcmsnOiAnPD9waHAgZWNobyBlc2NfanMoJHRpdGxlKTsgPz4nIH0pOw0KICAgICAgICB9KTsNCg0KICAgICAgICBmdW5jdGlvbiBsYXVuY2hWaXN1YWxpemVyKCkgew0KICAgICAgICAgICAgLy8gRnV0dXJlIGludGVncmF0aW9uIHdpdGggdGhlIFZpc3VhbGl6ZXIgdG9vbA0KICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnL3RyYWRlLz9wcmV2aWV3PTw/cGhwIGVjaG8gdXJsZW5jb2RlKCR0aXRsZSk7ID8+JzsNCiAgICAgICAgfQ0KICAgIDwvc2NyaXB0Pg0KPC9ib2R5Pg0KPC9odG1sPg0KICAgICAgICA8P3BocA0KICAgIH0NCg0KICAgIHByaXZhdGUgZnVuY3Rpb24gZ2V0X3JlbGF0ZWQoJGN1cnJlbnQsICRjb3VudCA9IDMpIHsNCiAgICAgICAgJHJlbGF0ZWQgPSBbXTsNCiAgICAgICAgJGN1cnJlbnRfc3R5bGVzID0gaXNzZXQoJGN1cnJlbnRbJ3N0eWxlcyddKSA/IGV4cGxvZGUoJywgJywgJGN1cnJlbnRbJ3N0eWxlcyddKSA6IFtdOw0KICAgICAgICAkY3VycmVudF9pZCA9ICRjdXJyZW50Wyd3b3JkcHJlc3NfaWQnXSA/PyAkY3VycmVudFsnaWQnXTsNCg0KICAgICAgICBmb3JlYWNoKCR0aGlzLT5kYXRhX21hcCBhcyAkaXRlbSkgew0KICAgICAgICAgICAgJGl0ZW1faWQgPSAkaXRlbVsnd29yZHByZXNzX2lkJ10gPz8gJGl0ZW1bJ2lkJ107DQogICAgICAgICAgICBpZigkaXRlbV9pZCA9PSAkY3VycmVudF9pZCkgY29udGludWU7DQogICAgICAgICAgICBpZighaXNzZXQoJGl0ZW1bJ2ltYWdlX3VybCddKSkgY29udGludWU7DQoNCiAgICAgICAgICAgICRpdGVtX3N0eWxlcyA9IGlzc2V0KCRpdGVtWydzdHlsZXMnXSkgPyBleHBsb2RlKCcsICcsICRpdGVtWydzdHlsZXMnXSkgOiBbXTsNCiAgICAgICAgICAgICRjb21tb24gPSBhcnJheV9pbnRlcnNlY3QoJGN1cnJlbnRfc3R5bGVzLCAkaXRlbV9zdHlsZXMpOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBpZihjb3VudCgkY29tbW9uKSA+IDApIHsNCiAgICAgICAgICAgICAgICAkcmVsYXRlZFtdID0gJGl0ZW07DQogICAgICAgICAgICAgICAgaWYoY291bnQoJHJlbGF0ZWQpID49ICRjb3VudCkgYnJlYWs7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvLyBGYWxsYmFjayB0byByYW5kb20gaWYgbm90IGVub3VnaCBtYXRjaGVzDQogICAgICAgIGlmKGNvdW50KCRyZWxhdGVkKSA8ICRjb3VudCkgew0KICAgICAgICAgICAgZm9yZWFjaCgkdGhpcy0+ZGF0YV9tYXAgYXMgJGl0ZW0pIHsNCiAgICAgICAgICAgICAgICAkaXRlbV9pZCA9ICRpdGVtWyd3b3JkcHJlc3NfaWQnXSA/PyAkaXRlbVsnaWQnXTsNCiAgICAgICAgICAgICAgICBpZigkaXRlbV9pZCA9PSAkY3VycmVudF9pZCkgY29udGludWU7DQogICAgICAgICAgICAgICAgaWYoIWlzc2V0KCRpdGVtWydpbWFnZV91cmwnXSkpIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgIGlmKGluX2FycmF5KCRpdGVtLCAkcmVsYXRlZCkpIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICRyZWxhdGVkW10gPSAkaXRlbTsNCiAgICAgICAgICAgICAgICBpZihjb3VudCgkcmVsYXRlZCkgPj0gJGNvdW50KSBicmVhazsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIHJldHVybiAkcmVsYXRlZDsNCiAgICB9DQoNCiAgICBwcml2YXRlIGZ1bmN0aW9uIGZpbmRfZmlsZSgkZGlyLCAkY2FuZGlkYXRlcykNCiAgICB7DQogICAgICAgIGlmICghaXNfZGlyKCRkaXIpKSByZXR1cm4gZmFsc2U7DQogICAgICAgIA0KICAgICAgICAvLyBFeGFjdCBtYXRjaCBmaXJzdA0KICAgICAgICBmb3JlYWNoICgkY2FuZGlkYXRlcyBhcyAkYykgew0KICAgICAgICAgICAgaWYgKGZpbGVfZXhpc3RzKCRkaXIgLiAkYykpIHJldHVybiAkYzsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vIENhc2UgaW5zZW5zaXRpdmUgbWF0Y2gNCiAgICAgICAgJGZpbGVzID0gc2NhbmRpcigkZGlyKTsNCiAgICAgICAgJGNhbmRpZGF0ZXNfbG93ZXIgPSBhcnJheV9tYXAoJ3N0cnRvbG93ZXInLCAkY2FuZGlkYXRlcyk7DQoNCiAgICAgICAgZm9yZWFjaCAoJGZpbGVzIGFzICRmKSB7DQogICAgICAgICAgICBpZiAoJGYgPT09ICcuJyB8fCAkZiA9PT0gJy4uJykgY29udGludWU7DQogICAgICAgICAgICBpZiAoaW5fYXJyYXkoc3RydG9sb3dlcigkZiksICRjYW5kaWRhdGVzX2xvd2VyKSkgcmV0dXJuICRmOw0KICAgICAgICB9DQogICAgICAgIHJldHVybiBmYWxzZTsNCiAgICB9DQoNCiAgICBwcml2YXRlIGZ1bmN0aW9uIHJlbmRlcl9jb2xsZWN0aW9uX3BhZ2UoJHBvc3QpDQogICAgew0KICAgICAgICAkdGl0bGUgPSB0cmltKCRwb3N0LT5wb3N0X3RpdGxlKTsNCiAgICAgICAgLy8gVXNlIHJhdyBwb3N0IGNvbnRlbnQgdG8gYXZvaWQgd3BhdXRvcCBicmVha2luZyB0aGUgZ3JpZCBzdHJ1Y3R1cmUNCiAgICAgICAgJGNvbnRlbnQgPSAkcG9zdC0+cG9zdF9jb250ZW50Ow0KICAgICAgICANCiAgICAgICAgPz4NCjwhRE9DVFlQRSBodG1sPg0KPGh0bWwgbGFuZz0iZW4iPg0KPGhlYWQ+DQogICAgPG1ldGEgY2hhcnNldD0iVVRGLTgiPg0KICAgIDxtZXRhIG5hbWU9InZpZXdwb3J0IiBjb250ZW50PSJ3aWR0aD1kZXZpY2Utd2lkdGgsIGluaXRpYWwtc2NhbGU9MS4wIj4NCiAgICA8dGl0bGU+PD9waHAgZWNobyBlc2NfaHRtbCgkdGl0bGUpOyA/PiAtIEVsbGlvdCBTcGVuY2VyIE1vcmdhbjwvdGl0bGU+DQogICAgPCEtLSBGb250cyAtLT4NCiAgICA8bGluayByZWw9InByZWNvbm5lY3QiIGhyZWY9Imh0dHBzOi8vZm9udHMuZ29vZ2xlYXBpcy5jb20iPg0KICAgIDxsaW5rIHJlbD0icHJlY29ubmVjdCIgaHJlZj0iaHR0cHM6Ly9mb250cy5nc3RhdGljLmNvbSIgY3Jvc3NvcmlnaW4+DQogICAgPGxpbmsgaHJlZj0iaHR0cHM6Ly9mb250cy5nb29nbGVhcGlzLmNvbS9jc3MyP2ZhbWlseT1QbGF5ZmFpcitEaXNwbGF5Oml0YWwsd2dodEAwLDQwMDswLDYwMDsxLDQwMCZmYW1pbHk9SW50ZXI6d2dodEAzMDA7NDAwOzUwMDs2MDAmZGlzcGxheT1zd2FwIiByZWw9InN0eWxlc2hlZXQiPg0KICAgIA0KICAgIDxzdHlsZT4NCiAgICAgICAgLyogUkVTRVQgJiBDT1JFICovDQogICAgICAgICogeyBib3gtc2l6aW5nOiBib3JkZXItYm94OyB9DQogICAgICAgIGJvZHkgew0KICAgICAgICAgICAgbWFyZ2luOiAwOyBwYWRkaW5nOiAwOw0KICAgICAgICAgICAgZm9udC1mYW1pbHk6ICdJbnRlcicsIHNhbnMtc2VyaWY7DQogICAgICAgICAgICBjb2xvcjogIzJjM2U1MDsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNmZmZmZmY7DQogICAgICAgICAgICBvdmVyZmxvdy14OiBoaWRkZW47DQogICAgICAgICAgICB3aWR0aDogMTAwJTsNCiAgICAgICAgfQ0KICAgICAgICBhIHsgY29sb3I6IGluaGVyaXQ7IHRleHQtZGVjb3JhdGlvbjogbm9uZTsgfQ0KICAgICAgICANCiAgICAgICAgLyogSEVBREVSIC0gRklYRUQgJiBUUkFOU1BBUkVOVCAqLw0KICAgICAgICBoZWFkZXIgew0KICAgICAgICAgICAgcG9zaXRpb246IGZpeGVkOyB0b3A6IDA7IGxlZnQ6IDA7IHdpZHRoOiAxMDAlOw0KICAgICAgICAgICAgZGlzcGxheTogZmxleDsganVzdGlmeS1jb250ZW50OiBmbGV4LWVuZDsgYWxpZ24taXRlbXM6IGNlbnRlcjsNCiAgICAgICAgICAgIHBhZGRpbmc6IDIwcHggNDBweDsNCiAgICAgICAgICAgIHotaW5kZXg6IDEwMDA7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwyNTUsMjU1LDAuOTUpOw0KICAgICAgICAgICAgYmFja2Ryb3AtZmlsdGVyOiBibHVyKDVweCk7DQogICAgICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgcmdiYSgwLDAsMCwwLjA1KTsNCiAgICAgICAgfQ0KICAgICAgICAuc2l0ZS10aXRsZSB7DQogICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7DQogICAgICAgICAgICBsZWZ0OiA1MCU7DQogICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoLTUwJSk7DQogICAgICAgICAgICBmb250LWZhbWlseTogJ1BsYXlmYWlyIERpc3BsYXknLCBzZXJpZjsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMS41cmVtOw0KICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDQwMDsNCiAgICAgICAgICAgIHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7DQogICAgICAgICAgICBsZXR0ZXItc3BhY2luZzogMXB4Ow0KICAgICAgICAgICAgY29sb3I6ICMxYTFhMWE7DQogICAgICAgICAgICB3aGl0ZS1zcGFjZTogbm93cmFwOw0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICAvKiBIQU1CVVJHRVIgTUVOVSAqLw0KICAgICAgICAubWVudS10b2dnbGUgew0KICAgICAgICAgICAgYmFja2dyb3VuZDogbm9uZTsgYm9yZGVyOiBub25lOyBjdXJzb3I6IHBvaW50ZXI7DQogICAgICAgICAgICBkaXNwbGF5OiBmbGV4OyBmbGV4LWRpcmVjdGlvbjogY29sdW1uOyBnYXA6IDZweDsNCiAgICAgICAgICAgIHotaW5kZXg6IDIwMDA7IHBhZGRpbmc6IDEwcHg7DQogICAgICAgIH0NCiAgICAgICAgLmJhciB7IHdpZHRoOiAyNHB4OyBoZWlnaHQ6IDFweDsgYmFja2dyb3VuZDogIzFhMWExYTsgdHJhbnNpdGlvbjogMC4zczsgfQ0KICAgICAgICANCiAgICAgICAgLyogTUVOVSBPVkVSTEFZICovDQogICAgICAgIC5tZW51LW92ZXJsYXkgew0KICAgICAgICAgICAgcG9zaXRpb246IGZpeGVkOyB0b3A6IDA7IGxlZnQ6IDA7IHdpZHRoOiAxMDB2dzsgaGVpZ2h0OiAxMDB2aDsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6IHdoaXRlOyB6LWluZGV4OiAxNTAwOw0KICAgICAgICAgICAgZGlzcGxheTogZmxleDsgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsganVzdGlmeS1jb250ZW50OiBjZW50ZXI7IGFsaWduLWl0ZW1zOiBjZW50ZXI7DQogICAgICAgICAgICBvcGFjaXR5OiAwOyBwb2ludGVyLWV2ZW50czogbm9uZTsgdHJhbnNpdGlvbjogMC40cyBlYXNlOw0KICAgICAgICB9DQogICAgICAgIC5tZW51LW92ZXJsYXkuYWN0aXZlIHsgb3BhY2l0eTogMTsgcG9pbnRlci1ldmVudHM6IGF1dG87IH0NCiAgICAgICAgLm1lbnUtb3ZlcmxheSBuYXYgYSB7DQogICAgICAgICAgICBkaXNwbGF5OiBibG9jazsgZm9udC1mYW1pbHk6ICdQbGF5ZmFpciBEaXNwbGF5Jywgc2VyaWY7DQogICAgICAgICAgICBmb250LXNpemU6IDJyZW07IG1hcmdpbjogMTVweCAwOyBjb2xvcjogIzFhMWExYTsNCiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsgdHJhbnNpdGlvbjogMC4yczsNCiAgICAgICAgfQ0KICAgICAgICAubWVudS1vdmVybGF5IG5hdiBhOmhvdmVyIHsgY29sb3I6ICM1NTU7IHRyYW5zZm9ybTogc2NhbGUoMS4wMik7IH0NCg0KICAgICAgICAvKiBDT05URU5UIENPTlRBSU5FUiAqLw0KICAgICAgICAuY29sbGVjdGlvbi1jb250YWluZXIgew0KICAgICAgICAgICAgbWF4LXdpZHRoOiAxMDAlOw0KICAgICAgICAgICAgbWFyZ2luLXRvcDogODBweDsgLyogT2Zmc2V0IGZvciBmaXhlZCBoZWFkZXIgKi8NCiAgICAgICAgICAgIHBhZGRpbmc6IDQwcHggMjBweDsNCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgLyogRW5zdXJlIHRoZSBncmlkIHN0eWxlcyBmcm9tIGNvbnRlbnQgYXJlIHJlc3BlY3RlZCAqLw0KICAgICAgICAuZ29sZC1jb2xsZWN0aW9uLWdyaWQgew0KICAgICAgICAgICAgd2lkdGg6IDEwMCU7DQogICAgICAgICAgICBtYXgtd2lkdGg6IDE0MDBweDsNCiAgICAgICAgICAgIG1hcmdpbjogMCBhdXRvOw0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICAvKiBGT09URVIgKi8NCiAgICAgICAgZm9vdGVyIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNmYWZhZmE7IHBhZGRpbmc6IDYwcHggMjBweDsgdGV4dC1hbGlnbjogY2VudGVyOw0KICAgICAgICAgICAgYm9yZGVyLXRvcDogMXB4IHNvbGlkICNlZWU7IG1hcmdpbi10b3A6IDgwcHg7DQogICAgICAgIH0NCiAgICAgICAgLnNvY2lhbC1saW5rcyBhIHsgbWFyZ2luOiAwIDEwcHg7IGZvbnQtc2l6ZTogMTRweDsgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTsgbGV0dGVyLXNwYWNpbmc6IDFweDsgfQ0KICAgICAgICAuc29jaWFsLWxpbmtzIGEgeyBtYXJnaW46IDAgMTBweDsgZm9udC1zaXplOiAxNHB4OyB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlOyBsZXR0ZXItc3BhY2luZzogMXB4OyB9DQogICAgICAgIC5jb3B5cmlnaHQgeyBtYXJnaW4tdG9wOiAzMHB4OyBmb250LXNpemU6IDEycHg7IGNvbG9yOiAjOTk5OyB9DQogICAgICAgIA0KICAgICAgICAvKiBHb2xkIENvbGxlY3Rpb24gR3JpZCAtIFJlc3BvbnNpdmUgKi8NCiAgICAgICAgLmdvbGQtY29sbGVjdGlvbi1ncmlkIHsNCiAgICAgICAgICAgIGRpc3BsYXk6IGdyaWQ7DQogICAgICAgICAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmcjsNCiAgICAgICAgICAgIGdhcDogMzBweDsNCiAgICAgICAgICAgIG1hcmdpbjogNDBweCAwOw0KICAgICAgICB9DQogICAgICAgIEBtZWRpYSAobWluLXdpZHRoOiA3NjhweCkgew0KICAgICAgICAgICAgLmdvbGQtY29sbGVjdGlvbi1ncmlkIHsNCiAgICAgICAgICAgICAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdCg0LCAxZnIpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICAvKiBSZWxhdGVkIENvbGxlY3Rpb25zIExpbmtzICovDQogICAgICAgIC5yZWxhdGVkLWdyaWQgbGkgYSB7DQogICAgICAgICAgICBkaXNwbGF5OiBibG9jazsNCiAgICAgICAgICAgIHBhZGRpbmc6IDIwcHg7DQogICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjZWVlOw0KICAgICAgICAgICAgY29sb3I6ICMzMzM7DQogICAgICAgICAgICB0ZXh0LWRlY29yYXRpb246IG5vbmU7DQogICAgICAgICAgICBmb250LWZhbWlseTogJ1BsYXlmYWlyIERpc3BsYXknLCBzZXJpZjsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMS4xcmVtOw0KICAgICAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuM3MgZWFzZTsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNmZmY7DQogICAgICAgIH0NCiAgICAgICAgLnJlbGF0ZWQtZ3JpZCBsaSBhOmhvdmVyIHsNCiAgICAgICAgICAgIGJvcmRlci1jb2xvcjogIzFhMWExYTsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNmYWZhZmE7DQogICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTJweCk7DQogICAgICAgICAgICBib3gtc2hhZG93OiAwIDVweCAxNXB4IHJnYmEoMCwwLDAsMC4wNSk7DQogICAgICAgIH0NCiAgICA8L3N0eWxlPg0KPC9oZWFkPg0KPGJvZHk+DQoNCiAgICA8IS0tIEhlYWRlciAtLT4NCiAgICA8aGVhZGVyPg0KICAgICAgICA8YSBocmVmPSIvIiBjbGFzcz0ic2l0ZS10aXRsZSI+RWxsaW90IFNwZW5jZXIgTW9yZ2FuPC9hPg0KICAgICAgICA8YnV0dG9uIGNsYXNzPSJtZW51LXRvZ2dsZSIgb25jbGljaz0iZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1lbnUtb3ZlcmxheScpLmNsYXNzTGlzdC50b2dnbGUoJ2FjdGl2ZScpIj4NCiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImJhciI+PC9kaXY+DQogICAgICAgICAgICA8ZGl2IGNsYXNzPSJiYXIiPjwvZGl2Pg0KICAgICAgICAgICAgPGRpdiBjbGFzcz0iYmFyIj48L2Rpdj4NCiAgICAgICAgPC9idXR0b24+DQogICAgPC9oZWFkZXI+DQoNCiAgICA8IS0tIE1lbnUgT3ZlcmxheSAtLT4NCiAgICA8ZGl2IGNsYXNzPSJtZW51LW92ZXJsYXkiPg0KICAgICAgICA8YnV0dG9uIGNsYXNzPSJtZW51LXRvZ2dsZSIgc3R5bGU9InBvc2l0aW9uOiBhYnNvbHV0ZTsgdG9wOiAyMHB4OyByaWdodDogNDBweDsiIG9uY2xpY2s9ImRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tZW51LW92ZXJsYXknKS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKSI+DQogICAgICAgICAgICA8ZGl2IGNsYXNzPSJiYXIiIHN0eWxlPSJ0cmFuc2Zvcm06IHJvdGF0ZSg0NWRlZykgdHJhbnNsYXRlKDVweCwgNXB4KTsiPjwvZGl2Pg0KICAgICAgICAgICAgPGRpdiBjbGFzcz0iYmFyIiBzdHlsZT0ib3BhY2l0eTogMDsiPjwvZGl2Pg0KICAgICAgICAgICAgPGRpdiBjbGFzcz0iYmFyIiBzdHlsZT0idHJhbnNmb3JtOiByb3RhdGUoLTQ1ZGVnKSB0cmFuc2xhdGUoNXB4LCAtNXB4KTsiPjwvZGl2Pg0KICAgICAgICA8L2J1dHRvbj4NCiAgICAgICAgPG5hdj4NCiAgICAgICAgICAgIDxhIGhyZWY9Ii8iPkhvbWU8L2E+DQogICAgICAgICAgICA8YSBocmVmPSIvc2N1bHB0dXJlLWNvbGxlY3Rpb24vIj5TY3VscHR1cmU8L2E+DQogICAgICAgICAgICA8YSBocmVmPSIvZ29sZC1jb2xsZWN0aW9uLyI+R29sZCBDb2xsZWN0aW9uPC9hPg0KICAgICAgICAgICAgPGEgaHJlZj0iL2Fib3V0LyI+QWJvdXQ8L2E+DQogICAgICAgICAgICA8YSBocmVmPSIvY29udGFjdC8iPkNvbnRhY3Q8L2E+DQogICAgICAgIDwvbmF2Pg0KICAgIDwvZGl2Pg0KDQogICAgPCEtLSBNYWluIENvbnRlbnQgLS0+DQogICAgPGRpdiBjbGFzcz0iY29sbGVjdGlvbi1jb250YWluZXIiPg0KICAgICAgICA8P3BocCBlY2hvICRjb250ZW50OyA/Pg0KICAgIDwvZGl2Pg0KDQogICAgPCEtLSBGb290ZXIgLS0+DQogICAgPGZvb3Rlcj4NCiAgICAgICAgPGRpdiBjbGFzcz0ic29jaWFsLWxpbmtzIj4NCiAgICAgICAgICAgIDxhIGhyZWY9Imh0dHBzOi8vaW5zdGFncmFtLmNvbSI+SW5zdGFncmFtPC9hPg0KICAgICAgICAgICAgPGEgaHJlZj0iaHR0cHM6Ly9zYWF0Y2hpYXJ0LmNvbSI+U2FhdGNoaSBBcnQ8L2E+DQogICAgICAgIDwvZGl2Pg0KICAgICAgICA8cCBjbGFzcz0iY29weXJpZ2h0Ij4mY29weTsgPD9waHAgZWNobyBkYXRlKCdZJyk7ID8+IEVsbGlvdCBTcGVuY2VyIE1vcmdhbi4gQWxsIFJpZ2h0cyBSZXNlcnZlZC48L3A+DQogICAgPC9mb290ZXI+DQoNCjwvYm9keT4NCjwvaHRtbD4NCiAgICAgICAgPD9waHANCiAgICB9DQoNCn0NCn0NCg0KbmV3IEVTTV9BcnR3b3JrX1RlbXBsYXRlKCk7DQo/Pg==';
$target_esm_artwork_template_php = $base_dir . '/esm-artwork-template.php';
if (file_put_contents($target_esm_artwork_template_php, base64_decode($esm_artwork_template_php_b64))) {
    echo "SUCCESS: Updated esm-artwork-template.php\n";
} else {
    echo "ERROR: Failed to update esm-artwork-template.php\n";
}

// Deploying esm-artwork-template_NEW.php
$esm_artwork_template_NEW_php_b64 = 'PD9waHANCi8qDQpQbHVnaW4gTmFtZTogRVNNIEFydHdvcmsgTWFzdGVyIFRlbXBsYXRlDQpEZXNjcmlwdGlvbjogRnVsbC1wYWdlIG92ZXJyaWRlIHRvIHJlbmRlciBwcmVtaXVtIGFydHdvcmsgbGF5b3V0cywgYnlwYXNzaW5nIHRoZSBhY3RpdmUgdGhlbWUuDQpWZXJzaW9uOiAzLjANCkF1dGhvcjogRVNNIERldg0KKi8NCg0KLy8gUHJldmVudCBkaXJlY3QgYWNjZXNzDQovLyBQcmV2ZW50IGRpcmVjdCBhY2Nlc3MgLSBvciBsb2FkIFdQIGVudmlyb25tZW50IGZvciBJREUvRGVidWcgY29udGV4dA0KaWYgKCFkZWZpbmVkKCdBQlNQQVRIJykpIHsNCiAgICBpZiAoZmlsZV9leGlzdHMoX19ESVJfXyAuICcvd3AtbG9hZC5waHAnKSkgew0KICAgICAgICByZXF1aXJlX29uY2UgX19ESVJfXyAuICcvd3AtbG9hZC5waHAnOw0KICAgIH0gZWxzZSB7DQogICAgICAgIGV4aXQ7DQogICAgfQ0KfQ0KDQppZiAoIWNsYXNzX2V4aXN0cygnRVNNX0FydHdvcmtfVGVtcGxhdGUnKSkgew0KY2xhc3MgRVNNX0FydHdvcmtfVGVtcGxhdGUNCnsNCg0KICAgIHByaXZhdGUgJGRhdGFfbWFwID0gW107DQoNCiAgICBwdWJsaWMgZnVuY3Rpb24gX19jb25zdHJ1Y3QoKQ0KICAgIHsNCiAgICAgICAgLy8gVXNlIHRlbXBsYXRlX2luY2x1ZGUgdG8gb3ZlcnJpZGUgdGhlIGVudGlyZSBwYWdlIGNvbnRlbnQNCiAgICAgICAgYWRkX2ZpbHRlcigndGVtcGxhdGVfaW5jbHVkZScsIFskdGhpcywgJ292ZXJyaWRlX3RlbXBsYXRlJ10pOw0KICAgICAgICBhZGRfZmlsdGVyKCd3cF9sYXp5X2xvYWRpbmdfZW5hYmxlZCcsICdfX3JldHVybl9mYWxzZScpOyAvLyBEaXNhYmxlIENvcmUgTGF6eSBMb2FkDQogICAgICAgIGFkZF9hY3Rpb24oJ3dwX2hlYWQnLCBbJHRoaXMsICdkZWJ1Z19pbmZvJ10pOw0KICAgICAgICAkdGhpcy0+bG9hZF9kYXRhKCk7DQogICAgfQ0KDQogICAgcHVibGljIGZ1bmN0aW9uIGRlYnVnX2luZm8oKSB7DQogICAgICAgIGdsb2JhbCAkcG9zdDsNCiAgICAgICAgJHRpdGxlID0gJHBvc3QgPyAkcG9zdC0+cG9zdF90aXRsZSA6ICdOTyBQT1NUJzsNCiAgICAgICAgJHNsdWcgPSAkcG9zdCA/ICRwb3N0LT5wb3N0X25hbWUgOiAnTk8gU0xVRyc7DQogICAgICAgICRrZXkgPSBzdHJ0b2xvd2VyKHRyaW0oJHRpdGxlKSk7DQogICAgICAgICRtYXRjaCA9IGlzc2V0KCR0aGlzLT5kYXRhX21hcFska2V5XSkgPyAnWUVTJyA6ICdOTyc7DQogICAgICAgIGVjaG8gIlxuPCEtLSBFU00gREVCVUc6IFRpdGxlPSd7JHRpdGxlfScsIFNsdWc9J3skc2x1Z30nLCBLZXk9J3ska2V5fScsIE1hdGNoPSd7JG1hdGNofScgLS0+XG4iOw0KICAgIH0NCg0KICAgIHByaXZhdGUgZnVuY3Rpb24gbG9hZF9kYXRhKCkNCiAgICB7DQogICAgICAgICRmaWxlID0gX19ESVJfXyAuICcvYXJ0d29ya19kYXRhLmpzb24nOw0KICAgICAgICBpZiAoIWZpbGVfZXhpc3RzKCRmaWxlKSkNCiAgICAgICAgICAgICRmaWxlID0gQUJTUEFUSCAuICdhcnR3b3JrX2RhdGEuanNvbic7DQogICAgICAgIA0KICAgICAgICBpZiAoZmlsZV9leGlzdHMoJGZpbGUpKSB7DQogICAgICAgICAgICAkanNvbiA9IGZpbGVfZ2V0X2NvbnRlbnRzKCRmaWxlKTsNCiAgICAgICAgICAgICRkYXRhID0ganNvbl9kZWNvZGUoJGpzb24sIHRydWUpOw0KICAgICAgICAgICAgaWYgKCRkYXRhKSB7DQogICAgICAgICAgICAgICAgZm9yZWFjaCAoJGRhdGEgYXMgJGl0ZW0pIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGlzc2V0KCRpdGVtWyd0aXRsZSddKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgJGtleSA9IHN0cnRvbG93ZXIodHJpbSgkaXRlbVsndGl0bGUnXSkpOw0KICAgICAgICAgICAgICAgICAgICAgICAgJHRoaXMtPmRhdGFfbWFwWyRrZXldID0gJGl0ZW07DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBwdWJsaWMgZnVuY3Rpb24gb3ZlcnJpZGVfdGVtcGxhdGUoJHRlbXBsYXRlKQ0KICAgIHsNCiAgICAgICAgaWYgKCFpc19zaW5ndWxhcigpICYmICFpc19wYWdlKCkpIHsNCiAgICAgICAgICAgIHJldHVybiAkdGVtcGxhdGU7DQogICAgICAgIH0NCg0KICAgICAgICAkcG9zdCA9IGdldF9wb3N0KCk7DQogICAgICAgIGlmICghJHBvc3QpIHJldHVybiAkdGVtcGxhdGU7DQoNCiAgICAgICAgLy8gQ2hlY2sgaWYgdGhpcyBwYWdlIG1hdGNoZXMgYW4gYXJ0d29yayBpbiBvdXIgREINCiAgICAgICAgJHRpdGxlID0gdHJpbSgkcG9zdC0+cG9zdF90aXRsZSk7DQogICAgICAgICRrZXkgPSBzdHJ0b2xvd2VyKCR0aXRsZSk7DQoNCiAgICAgICAgaWYgKGlzc2V0KCR0aGlzLT5kYXRhX21hcFska2V5XSkpIHsNCiAgICAgICAgICAgIC8vIE1BVENIIEZPVU5EOiBSZW5kZXIgb3VyIGN1c3RvbSBsYXlvdXQgYW5kIGV4aXQNCiAgICAgICAgICAgICR0aGlzLT5yZW5kZXJfZnVsbF9wYWdlKCRwb3N0LCAkdGhpcy0+ZGF0YV9tYXBbJGtleV0pOw0KICAgICAgICAgICAgZXhpdDsgLy8gU3RvcCBXb3JkUHJlc3MgZnJvbSBsb2FkaW5nIHRoZSB0aGVtZSB0ZW1wbGF0ZQ0KICAgICAgICB9DQoNCiAgICAgICAgcmV0dXJuICR0ZW1wbGF0ZTsNCiAgICB9DQoNCiAgICBwcml2YXRlIGZ1bmN0aW9uIHJlbmRlcl9mdWxsX3BhZ2UoJHBvc3QsICRkYXRhKQ0KICAgIHsNCiAgICAgICAgJHRpdGxlID0gdHJpbSgkcG9zdC0+cG9zdF90aXRsZSk7DQogICAgICAgIA0KICAgICAgICAvLyAtLS0gREFUQSBQUkVQIC0tLQ0KICAgICAgICAkcHJpY2UgPSBpc3NldCgkZGF0YVsncHJpY2UnXSkgPyAnJCcgLiBudW1iZXJfZm9ybWF0KCRkYXRhWydwcmljZSddKSA6ICdJbnF1aXJlJzsNCiAgICAgICAgJGRpbWVuc2lvbnMgPSBpc3NldCgkZGF0YVsnZGltZW5zaW9ucyddKSA/ICRkYXRhWydkaW1lbnNpb25zJ10gOiAnJzsNCiAgICAgICAgaWYgKCEkZGltZW5zaW9ucyAmJiBpc3NldCgkZGF0YVsnd2lkdGgnXSwgJGRhdGFbJ2hlaWdodCddKSkgew0KICAgICAgICAgICAgJGRpbWVuc2lvbnMgPSAieyRkYXRhWyd3aWR0aCddfSBXIHggeyRkYXRhWydoZWlnaHQnXX0gSCBpbiI7DQogICAgICAgIH0NCiAgICAgICAgJHdpZHRoID0gaXNzZXQoJGRhdGFbJ3dpZHRoJ10pID8gJGRhdGFbJ3dpZHRoJ10gOiAnJzsNCiAgICAgICAgJGhlaWdodCA9IGlzc2V0KCRkYXRhWydoZWlnaHQnXSkgPyAkZGF0YVsnaGVpZ2h0J10gOiAnJzsNCg0KICAgICAgICAkbWVkaXVtID0gaXNzZXQoJGRhdGFbJ21lZGl1bXNEZXRhaWxlZCddKSA/ICRkYXRhWydtZWRpdW1zRGV0YWlsZWQnXSA6IChpc3NldCgkZGF0YVsnbWVkaXVtJ10pID8gJGRhdGFbJ21lZGl1bSddIDogJ01peGVkIE1lZGlhJyk7DQogICAgICAgICR5ZWFyID0gaXNzZXQoJGRhdGFbJ3llYXInXSkgPyAkZGF0YVsneWVhciddIDogJyc7DQogICAgICAgICRzdHlsZXMgPSBpc3NldCgkZGF0YVsnc3R5bGVzJ10pID8gJGRhdGFbJ3N0eWxlcyddIDogJyc7DQogICAgICAgIA0KICAgICAgICAkZGV0ZWN0ZWRfY29sb3JzID0gaXNzZXQoJGRhdGFbJ2RldGVjdGVkX2NvbG9ycyddKSAmJiBpc19hcnJheSgkZGF0YVsnZGV0ZWN0ZWRfY29sb3JzJ10pID8gaW1wbG9kZSgnLCAnLCAkZGF0YVsnZGV0ZWN0ZWRfY29sb3JzJ10pIDogJyc7DQogICAgICAgICR0YWdzX2NvbWJpbmVkID0gW107DQogICAgICAgIGlmICgkc3R5bGVzKSAkdGFnc19jb21iaW5lZFtdID0gJHN0eWxlczsNCiAgICAgICAgaWYgKCRkZXRlY3RlZF9jb2xvcnMpICR0YWdzX2NvbWJpbmVkW10gPSAkZGV0ZWN0ZWRfY29sb3JzOw0KICAgICAgICAkdGFnc19kaXNwbGF5ID0gaW1wbG9kZSgnLCAnLCAkdGFnc19jb21iaW5lZCk7DQoNCiAgICAgICAgJGRlc2MgPSAiT3JpZ2luYWwgeyRtZWRpdW19IHBhaW50aW5nIGJ5IEVsbGlvdCBTcGVuY2VyIE1vcmdhbi4iOw0KICAgICAgICBpZiAoJHllYXIpICRkZXNjIC49ICIgQ3JlYXRlZCBpbiB7JHllYXJ9LiI7DQogICAgICAgIGlmICgkc3R5bGVzKSAkZGVzYyAuPSAiIEZlYXR1cmluZyBlbGVtZW50cyBvZiB7JHN0eWxlc30uIjsNCiAgICAgICAgJGRlc2MgLj0gIiBQZXJmZWN0IGZvciBpbnRlcmlvciBkZXNpZ24gcHJvamVjdHMsIGhpZ2gtZW5kIHJlc2lkZW50aWFsIHNwYWNlcywgYW5kIGhvc3BpdGFsaXR5IGVudmlyb25tZW50cy4iOw0KICAgICAgICAkZGVzYyAuPSAiIFNpZ25lZCBhbmQgZGVsaXZlcmVkIHdpdGggYSBDZXJ0aWZpY2F0ZSBvZiBBdXRoZW50aWNpdHkuIEF2YWlsYWJsZSBmb3IgdHJhZGUgcHJvZmVzc2lvbmFscy4iOw0KDQogICAgICAgICRpbnN0YWxsYXRpb24gPSBpc3NldCgkZGF0YVsncmVhZHlUb0hhbmcnXSkgPyAkZGF0YVsncmVhZHlUb0hhbmcnXSA6ICJXaXJlZCAmIFJlYWR5IHRvIEhhbmciOw0KICAgICAgICBpZiAoJGluc3RhbGxhdGlvbiA9PT0gJ05vJykgJGluc3RhbGxhdGlvbiA9ICJSZXF1aXJlcyBGcmFtaW5nIjsNCiAgICAgICAgDQogICAgICAgICRmcmFtaW5nID0gaXNzZXQoJGRhdGFbJ2ZyYW1lJ10pID8gJGRhdGFbJ2ZyYW1lJ10gOiAiVW5mcmFtZWQiOw0KICAgICAgICAkc2hpcHBpbmcgPSBpc3NldCgkZGF0YVsnc2hpcHBpbmdGcm9tJ10pID8gJGRhdGFbJ3NoaXBwaW5nRnJvbSddIDogIlVuaXRlZCBTdGF0ZXMiOw0KICAgICAgICAkcGFja2FnaW5nID0gaXNzZXQoJGRhdGFbJ3BhY2thZ2luZyddKSA/ICRkYXRhWydwYWNrYWdpbmcnXSA6ICJTaGlwcyBpbiBhIEJveCI7DQoNCiAgICAgICAgJGltYWdlX3VybCA9IGlzc2V0KCRkYXRhWydpbWFnZV91cmwnXSkgPyAkZGF0YVsnaW1hZ2VfdXJsJ10gOiAnJzsNCiAgICAgICAgJHNhYXRjaGlfdXJsID0gaXNzZXQoJGRhdGFbJ3NhYXRjaGlfdXJsJ10pID8gJGRhdGFbJ3NhYXRjaGlfdXJsJ10gOiAnJzsNCg0KICAgICAgICAvLyAtLS0gRklMVEVSSU5HIENBVEVHT1JJRVMgLS0tDQogICAgICAgICR3X251bSA9IGZsb2F0dmFsKCR3aWR0aCk7DQogICAgICAgICRzaXplX2NhdCA9ICdtZWRpdW0nOw0KICAgICAgICBpZiAoJHdfbnVtIDwgMjQpICRzaXplX2NhdCA9ICdzbWFsbCc7DQogICAgICAgIGVsc2VpZiAoJHdfbnVtID49IDI0ICYmICR3X251bSA8IDQwKSAkc2l6ZV9jYXQgPSAnbWVkaXVtJzsNCiAgICAgICAgZWxzZWlmICgkd19udW0gPj0gNDAgJiYgJHdfbnVtIDwgNjApICRzaXplX2NhdCA9ICdsYXJnZSc7DQogICAgICAgIGVsc2VpZiAoJHdfbnVtID49IDYwKSAkc2l6ZV9jYXQgPSAnb3ZlcnNpemVkJzsNCg0KICAgICAgICAkcHJpY2VfbnVtID0gZmxvYXR2YWwoaXNzZXQoJGRhdGFbJ3ByaWNlJ10pID8gJGRhdGFbJ3ByaWNlJ10gOiAwKTsNCiAgICAgICAgJHByaWNlX3JhbmdlID0gJ3VuZGVyLTEwMDAnOw0KICAgICAgICBpZiAoJHByaWNlX251bSA8IDEwMDApICRwcmljZV9yYW5nZSA9ICd1bmRlci0xMDAwJzsNCiAgICAgICAgZWxzZWlmICgkcHJpY2VfbnVtID49IDEwMDAgJiYgJHByaWNlX251bSA8IDIwMDApICRwcmljZV9yYW5nZSA9ICcxMDAwLTIwMDAnOw0KICAgICAgICBlbHNlaWYgKCRwcmljZV9udW0gPj0gMjAwMCAmJiAkcHJpY2VfbnVtIDwgMzAwMCkgJHByaWNlX3JhbmdlID0gJzIwMDAtMzAwMCc7DQogICAgICAgIGVsc2VpZiAoJHByaWNlX251bSA+PSAzMDAwICYmICRwcmljZV9udW0gPCA1MDAwKSAkcHJpY2VfcmFuZ2UgPSAnMzAwMC01MDAwJzsNCiAgICAgICAgZWxzZWlmICgkcHJpY2VfbnVtID49IDUwMDApICRwcmljZV9yYW5nZSA9ICc1MDAwLXBsdXMnOw0KDQogICAgICAgIC8vIEZpbGUgTG9va3Vwcw0KICAgICAgICAkY2FuZGlkYXRlcyA9IFsNCiAgICAgICAgICAgIGlzc2V0KCRkYXRhWydzbHVnJ10pID8gJGRhdGFbJ3NsdWcnXSAuICdfc3BlYy5wZGYnIDogJycsIC8vIFByaW9yaXR5IDE6IEV4YWN0IEpTT04gc2x1Zw0KICAgICAgICAgICAgaXNzZXQoJGRhdGFbJ3RpdGxlJ10pID8gJGRhdGFbJ3RpdGxlJ10gLiAnX3NwZWMucGRmJyA6ICcnLA0KICAgICAgICAgICAgJHRpdGxlIC4gJ19zcGVjLnBkZicsDQogICAgICAgICAgICBzYW5pdGl6ZV90aXRsZSgkdGl0bGUpIC4gJ19zcGVjLnBkZicsDQogICAgICAgICAgICAvLyBBZGQgbmV3IGRldGVjdGVkIHBhdHRlcm5zDQogICAgICAgICAgICBpc3NldCgkZGF0YVsndGl0bGUnXSkgPyAkZGF0YVsndGl0bGUnXSAuICdfU2hlZXQucGRmJyA6ICcnLA0KICAgICAgICAgICAgaXNzZXQoJGRhdGFbJ3RpdGxlJ10pID8gJGRhdGFbJ3RpdGxlJ10gLiAnIFBhaW50aW5nX1NoZWV0LnBkZicgOiAnJywNCiAgICAgICAgICAgICR0aXRsZSAuICdfU2hlZXQucGRmJywNCiAgICAgICAgICAgICR0aXRsZSAuICcgUGFpbnRpbmdfU2hlZXQucGRmJw0KICAgICAgICBdOw0KICAgICAgICAkY2FuZGlkYXRlcyA9IGFycmF5X2ZpbHRlcigkY2FuZGlkYXRlcyk7DQogICAgICAgICRzcGVjX2ZpbGUgPSAkdGhpcy0+ZmluZF9maWxlKEFCU1BBVEggLiAnZG93bmxvYWRzL3NwZWNfc2hlZXRzLycsICRjYW5kaWRhdGVzKTsNCg0KICAgICAgICAkemlwX2NhbmRpZGF0ZXMgPSBbDQogICAgICAgICAgICBpc3NldCgkZGF0YVsndGl0bGUnXSkgPyAkZGF0YVsndGl0bGUnXSAuICdfSGlnaFJlcy56aXAnIDogJycsDQogICAgICAgICAgICBpc3NldCgkZGF0YVsnc2x1ZyddKSA/ICRkYXRhWydzbHVnJ10gLiAnX0hpZ2hSZXMuemlwJyA6ICcnLA0KICAgICAgICAgICAgJHRpdGxlIC4gJ19IaWdoUmVzLnppcCcsDQogICAgICAgICAgICBzYW5pdGl6ZV90aXRsZSgkdGl0bGUpIC4gJ19IaWdoUmVzLnppcCcNCiAgICAgICAgXTsNCiAgICAgICAgJHppcF9jYW5kaWRhdGVzID0gYXJyYXlfZmlsdGVyKCR6aXBfY2FuZGlkYXRlcyk7DQogICAgICAgICR6aXBfZmlsZSA9ICR0aGlzLT5maW5kX2ZpbGUoQUJTUEFUSCAuICdkb3dubG9hZHMvaGlnaF9yZXMvJywgJHppcF9jYW5kaWRhdGVzKTsNCg0KICAgICAgICAvLyAtLS0gRlVMTCBIVE1MIE9VVFBVVCAtLS0NCiAgICAgICAgPz4NCjwhRE9DVFlQRSBodG1sPg0KPGh0bWwgbGFuZz0iZW4iPg0KPGhlYWQ+DQogICAgPG1ldGEgY2hhcnNldD0iVVRGLTgiPg0KICAgIDxtZXRhIG5hbWU9InZpZXdwb3J0IiBjb250ZW50PSJ3aWR0aD1kZXZpY2Utd2lkdGgsIGluaXRpYWwtc2NhbGU9MS4wIj4NCiAgICA8dGl0bGU+PD9waHAgZWNobyBlc2NfaHRtbCgkdGl0bGUpOyA/PiAtIEVsbGlvdCBTcGVuY2VyIE1vcmdhbjwvdGl0bGU+DQogICAgPCEtLSBGb250cyAtLT4NCiAgICA8bGluayByZWw9InByZWNvbm5lY3QiIGhyZWY9Imh0dHBzOi8vZm9udHMuZ29vZ2xlYXBpcy5jb20iPg0KICAgIDxsaW5rIHJlbD0icHJlY29ubmVjdCIgaHJlZj0iaHR0cHM6Ly9mb250cy5nc3RhdGljLmNvbSIgY3Jvc3NvcmlnaW4+DQogICAgPGxpbmsgaHJlZj0iaHR0cHM6Ly9mb250cy5nb29nbGVhcGlzLmNvbS9jc3MyP2ZhbWlseT1QbGF5ZmFpcitEaXNwbGF5Oml0YWwsd2dodEAwLDQwMDswLDYwMDsxLDQwMCZmYW1pbHk9SW50ZXI6d2dodEAzMDA7NDAwOzUwMDs2MDAmZGlzcGxheT1zd2FwIiByZWw9InN0eWxlc2hlZXQiPg0KICAgIA0KICAgIDwhLS0gU3RydWN0dXJlZCBEYXRhIC0tPg0KICAgIDxzY3JpcHQgdHlwZT0iYXBwbGljYXRpb24vbGQranNvbiI+DQogICAgew0KICAgICAgIkBjb250ZXh0IjogImh0dHBzOi8vc2NoZW1hLm9yZyIsDQogICAgICAiQHR5cGUiOiAiVmlzdWFsQXJ0d29yayIsDQogICAgICAibmFtZSI6ICI8P3BocCBlY2hvIGVzY19qcygkdGl0bGUpOyA/PiIsDQogICAgICAiaW1hZ2UiOiAiPD9waHAgZWNobyBlc2NfdXJsKCRpbWFnZV91cmwpOyA/PiIsDQogICAgICAiZGVzY3JpcHRpb24iOiAiPD9waHAgZWNobyBlc2NfanMoJGRlc2MpOyA/PiIsDQogICAgICAiYXJ0aXN0Ijogew0KICAgICAgICAiQHR5cGUiOiAiUGVyc29uIiwNCiAgICAgICAgIm5hbWUiOiAiRWxsaW90IFNwZW5jZXIgTW9yZ2FuIg0KICAgICAgfSwNCiAgICAgICJ3aWR0aCI6IHsiQHR5cGUiOiAiRGlzdGFuY2UiLCAidmFsdWUiOiAiPD9waHAgZWNobyBlc2NfanMoJHdpZHRoKTsgPz4iLCAidW5pdENvZGUiOiAiSU5IIn0sDQogICAgICAiaGVpZ2h0IjogeyJAdHlwZSI6ICJEaXN0YW5jZSIsICJ2YWx1ZSI6ICI8P3BocCBlY2hvIGVzY19qcygkaGVpZ2h0KTsgPz4iLCAidW5pdENvZGUiOiAiSU5IIn0sDQogICAgICAiYWRkaXRpb25hbFByb3BlcnR5IjogWw0KICAgICAgICB7DQogICAgICAgICAgIkB0eXBlIjogIlByb3BlcnR5VmFsdWUiLA0KICAgICAgICAgICJuYW1lIjogIlJlYWR5IHRvIEhhbmciLA0KICAgICAgICAgICJ2YWx1ZSI6ICI8P3BocCBlY2hvIGVzY19qcygkaW5zdGFsbGF0aW9uKTsgPz4iDQogICAgICAgIH0sDQogICAgICAgIHsNCiAgICAgICAgICAiQHR5cGUiOiAiUHJvcGVydHlWYWx1ZSIsDQogICAgICAgICAgIm5hbWUiOiAiRnJhbWluZyIsDQogICAgICAgICAgInZhbHVlIjogIjw/cGhwIGVjaG8gZXNjX2pzKCRmcmFtaW5nKTsgPz4iDQogICAgICAgIH0NCiAgICAgIF0NCiAgICB9DQogICAgPC9zY3JpcHQ+DQogICAgDQogICAgPHN0eWxlPg0KICAgICAgICAvKiBSRVNFVCAmIENPUkUgKi8NCiAgICAgICAgKiB7IGJveC1zaXppbmc6IGJvcmRlci1ib3g7IH0NCiAgICAgICAgYm9keSB7DQogICAgICAgICAgICBtYXJnaW46IDA7IHBhZGRpbmc6IDA7DQogICAgICAgICAgICBmb250LWZhbWlseTogJ0ludGVyJywgc2Fucy1zZXJpZjsNCiAgICAgICAgICAgIGNvbG9yOiAjMmMzZTUwOw0KICAgICAgICAgICAgYmFja2dyb3VuZDogI2ZmZmZmZjsNCiAgICAgICAgICAgIG92ZXJmbG93LXg6IGhpZGRlbjsNCiAgICAgICAgICAgIHdpZHRoOiAxMDAlOw0KICAgICAgICB9DQogICAgICAgIGEgeyBjb2xvcjogaW5oZXJpdDsgdGV4dC1kZWNvcmF0aW9uOiBub25lOyB9DQogICAgICAgIA0KICAgICAgICAvKiBIRUFERVIgLSBGSVhFRCAmIFRSQU5TUEFSRU5UICovDQogICAgICAgIGhlYWRlciB7DQogICAgICAgICAgICBwb3NpdGlvbjogZml4ZWQ7IHRvcDogMDsgbGVmdDogMDsgd2lkdGg6IDEwMCU7DQogICAgICAgICAgICBkaXNwbGF5OiBmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtZW5kOyBhbGlnbi1pdGVtczogY2VudGVyOyAvKiBDaGFuZ2VkIHNwYWNpbmcgdG8gZmxleC1lbmQgKi8NCiAgICAgICAgICAgIHBhZGRpbmc6IDIwcHggNDBweDsNCiAgICAgICAgICAgIHotaW5kZXg6IDEwMDA7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwyNTUsMjU1LDAuOTUpOw0KICAgICAgICAgICAgYmFja2Ryb3AtZmlsdGVyOiBibHVyKDVweCk7DQogICAgICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgcmdiYSgwLDAsMCwwLjA1KTsNCiAgICAgICAgfQ0KICAgICAgICAuc2l0ZS10aXRsZSB7DQogICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7DQogICAgICAgICAgICBsZWZ0OiA1MCU7DQogICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoLTUwJSk7DQogICAgICAgICAgICBmb250LWZhbWlseTogJ1BsYXlmYWlyIERpc3BsYXknLCBzZXJpZjsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMS41cmVtOw0KICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDQwMDsNCiAgICAgICAgICAgIHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7DQogICAgICAgICAgICBsZXR0ZXItc3BhY2luZzogMXB4Ow0KICAgICAgICAgICAgY29sb3I6ICMxYTFhMWE7DQogICAgICAgICAgICB3aGl0ZS1zcGFjZTogbm93cmFwOyAvKiBQcmV2ZW50IHdyYXBwaW5nIG9uIGRlc2t0b3AgKi8NCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgLyogSEFNQlVSR0VSIE1FTlUgKi8NCiAgICAgICAgLm1lbnUtdG9nZ2xlIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6IG5vbmU7IGJvcmRlcjogbm9uZTsgY3Vyc29yOiBwb2ludGVyOw0KICAgICAgICAgICAgZGlzcGxheTogZmxleDsgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsgZ2FwOiA2cHg7DQogICAgICAgICAgICB6LWluZGV4OiAyMDAwOyBwYWRkaW5nOiAxMHB4Ow0KICAgICAgICB9DQogICAgICAgIC5iYXIgeyB3aWR0aDogMjRweDsgaGVpZ2h0OiAxcHg7IGJhY2tncm91bmQ6ICMxYTFhMWE7IHRyYW5zaXRpb246IDAuM3M7IH0NCiAgICAgICAgDQogICAgICAgIC8qIE1FTlUgT1ZFUkxBWSAqLw0KICAgICAgICAubWVudS1vdmVybGF5IHsNCiAgICAgICAgICAgIHBvc2l0aW9uOiBmaXhlZDsgdG9wOiAwOyBsZWZ0OiAwOyB3aWR0aDogMTAwdnc7IGhlaWdodDogMTAwdmg7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiB3aGl0ZTsgei1pbmRleDogMTUwMDsNCiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7IGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47IGp1c3RpZnktY29udGVudDogY2VudGVyOyBhbGlnbi1pdGVtczogY2VudGVyOw0KICAgICAgICAgICAgb3BhY2l0eTogMDsgcG9pbnRlci1ldmVudHM6IG5vbmU7IHRyYW5zaXRpb246IDAuNHMgZWFzZTsNCiAgICAgICAgfQ0KICAgICAgICAubWVudS1vdmVybGF5LmFjdGl2ZSB7IG9wYWNpdHk6IDE7IHBvaW50ZXItZXZlbnRzOiBhdXRvOyB9DQogICAgICAgIC5tZW51LW92ZXJsYXkgbmF2IGEgew0KICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7IGZvbnQtZmFtaWx5OiAnUGxheWZhaXIgRGlzcGxheScsIHNlcmlmOw0KICAgICAgICAgICAgZm9udC1zaXplOiAycmVtOyBtYXJnaW46IDE1cHggMDsgY29sb3I6ICMxYTFhMWE7DQogICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7IHRyYW5zaXRpb246IDAuMnM7DQogICAgICAgIH0NCiAgICAgICAgLm1lbnUtb3ZlcmxheSBuYXYgYTpob3ZlciB7IGNvbG9yOiAjNTU1OyB0cmFuc2Zvcm06IHNjYWxlKDEuMDIpOyB9DQoNCiAgICAgICAgLyogQVJUV09SSyBDT05UQUlORVIgKi8NCiAgICAgICAgLmFydHdvcmstY29udGFpbmVyIHsNCiAgICAgICAgICAgIG1heC13aWR0aDogMTAwJTsNCiAgICAgICAgICAgIG1hcmdpbi10b3A6IDgwcHg7IC8qIE9mZnNldCBmb3IgZml4ZWQgaGVhZGVyICovDQogICAgICAgICAgICBwYWRkaW5nLWJvdHRvbTogNjBweDsNCiAgICAgICAgfQ0KDQogICAgICAgIC8qIEhFUk8gSU1BR0UgKi8NCiAgICAgICAgLmhlcm8tc2VjdGlvbiB7DQogICAgICAgICAgICB3aWR0aDogMTAwJTsNCiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7IGp1c3RpZnktY29udGVudDogY2VudGVyOw0KICAgICAgICAgICAgYmFja2dyb3VuZDogI2ZhZmFmYTsNCiAgICAgICAgICAgIHBhZGRpbmc6IDQwcHggMjBweDsNCiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDQwcHg7DQogICAgICAgIH0NCiAgICAgICAgLmFydHdvcmstaGVyby1pbWFnZSB7DQogICAgICAgICAgICBtYXgtd2lkdGg6IDkwMHB4Ow0KICAgICAgICAgICAgd2lkdGg6IDEwMCU7DQogICAgICAgICAgICBoZWlnaHQ6IGF1dG87DQogICAgICAgICAgICBib3gtc2hhZG93OiAwIDEwcHggNDBweCByZ2JhKDAsMCwwLDAuMDgpOw0KICAgICAgICB9DQoNCiAgICAgICAgLyogSU5GTyBTRUNUSU9OICovDQogICAgICAgIC5pbmZvLXNlY3Rpb24gew0KICAgICAgICAgICAgbWF4LXdpZHRoOiA4MDBweDsNCiAgICAgICAgICAgIG1hcmdpbjogMCBhdXRvOw0KICAgICAgICAgICAgcGFkZGluZzogMCAyMHB4Ow0KICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOw0KICAgICAgICB9DQogICAgICAgIC5hcnR3b3JrLXRpdGxlIHsNCiAgICAgICAgICAgIGZvbnQtZmFtaWx5OiAnUGxheWZhaXIgRGlzcGxheScsIHNlcmlmOw0KICAgICAgICAgICAgZm9udC1zaXplOiAzcmVtOyBtYXJnaW46IDAgMCAxMHB4IDA7DQogICAgICAgICAgICBjb2xvcjogIzFhMWExYTsgZm9udC13ZWlnaHQ6IDQwMDsNCiAgICAgICAgfQ0KICAgICAgICAuYXJ0d29yay1wcmljZSB7DQogICAgICAgICAgICBmb250LWZhbWlseTogJ1BsYXlmYWlyIERpc3BsYXknLCBzZXJpZjsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMS41cmVtOyBtYXJnaW4tYm90dG9tOiAzMHB4Ow0KICAgICAgICAgICAgY29sb3I6ICM0NDQ7DQogICAgICAgIH0NCg0KICAgICAgICAvKiBCVVRUT05TICovDQogICAgICAgIC5hY3Rpb25zIHsgZGlzcGxheTogZmxleDsgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsgYWxpZ24taXRlbXM6IGNlbnRlcjsgZ2FwOiAxNXB4OyBtYXJnaW4tYm90dG9tOiA1MHB4OyB9DQogICAgICAgIC5idG4gew0KICAgICAgICAgICAgcGFkZGluZzogMTRweCAzMHB4OyBmb250LXNpemU6IDAuOXJlbTsgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTsNCiAgICAgICAgICAgIGxldHRlci1zcGFjaW5nOiAxcHg7IGJvcmRlci1yYWRpdXM6IDRweDsgdHJhbnNpdGlvbjogMC4zczsNCiAgICAgICAgICAgIHdpZHRoOiAxMDAlOyBtYXgtd2lkdGg6IDMwMHB4OyB0ZXh0LWFsaWduOiBjZW50ZXI7DQogICAgICAgIH0NCiAgICAgICAgLmJ0bi1wcmltYXJ5IHsgYmFja2dyb3VuZDogIzFhMWExYTsgY29sb3I6IHdoaXRlOyBib3JkZXI6IDFweCBzb2xpZCAjMWExYTFhOyB9DQogICAgICAgIC5idG4tcHJpbWFyeTpob3ZlciB7IGJhY2tncm91bmQ6ICMzMzM7IH0NCiAgICAgICAgLmJ0bi1zZWNvbmRhcnkgeyBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDsgY29sb3I6ICMxYTFhMWE7IGJvcmRlcjogMXB4IHNvbGlkICMxYTFhMWE7IH0NCiAgICAgICAgLmJ0bi1zZWNvbmRhcnk6aG92ZXIgeyBiYWNrZ3JvdW5kOiAjZjVmNWY1OyB9DQoNCiAgICAgICAgLyogREVUQUlMUyBHUklEICovDQogICAgICAgIC5kZXRhaWxzLWdyaWQgew0KICAgICAgICAgICAgZGlzcGxheTogZ3JpZDsgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxZnIgMWZyOw0KICAgICAgICAgICAgYm9yZGVyLXRvcDogMXB4IHNvbGlkICNlZWU7IGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZWVlOw0KICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogNDBweDsgdGV4dC1hbGlnbjogbGVmdDsNCiAgICAgICAgfQ0KICAgICAgICAuZGV0YWlsLWl0ZW0gew0KICAgICAgICAgICAgcGFkZGluZzogMjBweDsgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNlZWU7DQogICAgICAgICAgICBib3JkZXItcmlnaHQ6IDFweCBzb2xpZCAjZWVlOw0KICAgICAgICB9DQogICAgICAgIC5kZXRhaWwtaXRlbTpudGgtY2hpbGQoMm4pIHsgYm9yZGVyLXJpZ2h0OiBub25lOyB9DQogICAgICAgIC5sYWJlbCB7IGZvbnQtc2l6ZTogMC44cmVtOyB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlOyBjb2xvcjogIzg4ODsgZGlzcGxheTogYmxvY2s7IG1hcmdpbi1ib3R0b206IDVweDsgfQ0KICAgICAgICAudmFsdWUgeyBmb250LXNpemU6IDFyZW07IGNvbG9yOiAjMjIyOyB9DQoNCiAgICAgICAgLyogREVTQ1JJUFRJT04gKi8NCiAgICAgICAgLmRlc2NyaXB0aW9uIHsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMS4xcmVtOyBsaW5lLWhlaWdodDogMS44OyBjb2xvcjogIzQ0NDsNCiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDYwcHg7IG1heC13aWR0aDogNzAwcHg7IG1hcmdpbi1sZWZ0OiBhdXRvOyBtYXJnaW4tcmlnaHQ6IGF1dG87DQogICAgICAgIH0NCg0KICAgICAgICAvKiBTUEVDUyBCT1ggKi8NCiAgICAgICAgLnNwZWNzLWJveCB7DQogICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjZGRkOyBwYWRkaW5nOiAzMHB4OyBib3JkZXItcmFkaXVzOiA4cHg7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZmZmOyBwb3NpdGlvbjogcmVsYXRpdmU7IG1heC13aWR0aDogNzAwcHg7IG1hcmdpbjogMCBhdXRvIDYwcHggYXV0bzsNCiAgICAgICAgICAgIHRleHQtYWxpZ246IGxlZnQ7DQogICAgICAgIH0NCiAgICAgICAgLnNwZWNzLWJveDo6YmVmb3JlIHsNCiAgICAgICAgICAgIGNvbnRlbnQ6ICJUUkFERSBPTkxZIjsgcG9zaXRpb246IGFic29sdXRlOyB0b3A6IDIwcHg7IHJpZ2h0OiAyMHB4Ow0KICAgICAgICAgICAgZm9udC1zaXplOiAwLjdyZW07IGZvbnQtd2VpZ2h0OiA3MDA7IGJvcmRlcjogMXB4IHNvbGlkICMwMDA7IHBhZGRpbmc6IDRweCA4cHg7IGJvcmRlci1yYWRpdXM6IDRweDsNCiAgICAgICAgfQ0KICAgICAgICAuc3BlY3MtaGVhZGVyIHsgZm9udC1mYW1pbHk6ICdQbGF5ZmFpciBEaXNwbGF5Jywgc2VyaWY7IGZvbnQtc2l6ZTogMS42cmVtOyBtYXJnaW46IDAgMCAyMHB4IDA7IH0NCiAgICAgICAgLnNwZWNzLWxpc3QgbGkgeyBtYXJnaW4tYm90dG9tOiAxMHB4OyBkaXNwbGF5OiBmbGV4OyBhbGlnbi1pdGVtczogY2VudGVyOyB9DQogICAgICAgIC5jaGVjayB7IGNvbG9yOiBncmVlbjsgbWFyZ2luLXJpZ2h0OiAxMHB4OyB9DQogICAgICAgIC5kb3dubG9hZHMgeyBtYXJnaW4tdG9wOiAyMHB4OyBib3JkZXItdG9wOiAxcHggZGFzaGVkICNkZGQ7IHBhZGRpbmctdG9wOiAyMHB4OyBkaXNwbGF5OiBmbGV4OyBnYXA6IDIwcHg7IH0NCiAgICAgICAgLmRvd25sb2FkLWxpbmsgeyBmb250LXNpemU6IDAuOXJlbTsgY29sb3I6ICM2NjY7IGJvcmRlci1ib3R0b206IDFweCBkb3R0ZWQgIzg4ODsgfQ0KDQogICAgICAgIC8qIEZPT1RFUiAqLw0KICAgICAgICBmb290ZXIgeyBtYXJnaW4tdG9wOiA4MHB4OyBwYWRkaW5nOiA0MHB4OyBiYWNrZ3JvdW5kOiAjMTExOyBjb2xvcjogI2ZmZjsgdGV4dC1hbGlnbjogY2VudGVyOyB9DQogICAgICAgIA0KICAgICAgICAvKiBSRVNQT05TSVZFICovDQogICAgICAgIEBtZWRpYShtYXgtd2lkdGg6IDc2OHB4KSB7DQogICAgICAgICAgICAuYXJ0d29yay10aXRsZSB7IGZvbnQtc2l6ZTogMnJlbTsgfQ0KICAgICAgICAgICAgLmRldGFpbHMtZ3JpZCB7IGdyaWQtdGVtcGxhdGUtY29sdW1uczogMWZyOyB9DQogICAgICAgICAgICAuZGV0YWlsLWl0ZW0geyBib3JkZXItcmlnaHQ6IG5vbmU7IH0NCiAgICAgICAgICAgIGhlYWRlciB7IHBhZGRpbmc6IDE1cHggMjBweDsgfQ0KICAgICAgICB9DQogICAgPC9zdHlsZT4NCjwvaGVhZD4NCjxib2R5Pg0KDQogICAgPCEtLSBIRUFERVIgLS0+DQogICAgPGhlYWRlcj4NCiAgICAgICAgPGEgaHJlZj0iLyIgY2xhc3M9InNpdGUtdGl0bGUiPkVsbGlvdCBTcGVuY2VyIE1vcmdhbjwvYT4NCiAgICAgICAgPGJ1dHRvbiBjbGFzcz0ibWVudS10b2dnbGUiIGlkPSJtZW51VG9nZ2xlIiBhcmlhLWxhYmVsPSJPcGVuIE1lbnUiPg0KICAgICAgICAgICAgPHNwYW4gY2xhc3M9ImJhciI+PC9zcGFuPg0KICAgICAgICAgICAgPHNwYW4gY2xhc3M9ImJhciI+PC9zcGFuPg0KICAgICAgICAgICAgPHNwYW4gY2xhc3M9ImJhciI+PC9zcGFuPg0KICAgICAgICA8L2J1dHRvbj4NCiAgICA8L2hlYWRlcj4NCg0KICAgIDwhLS0gTUVOVSBPVkVSTEFZIC0tPg0KICAgIDxkaXYgY2xhc3M9Im1lbnUtb3ZlcmxheSIgaWQ9Im1lbnVPdmVybGF5Ij4NCiAgICAgICAgPG5hdj4NCiAgICAgICAgICAgIDxhIGhyZWY9Ii8iPkhvbWU8L2E+DQogICAgICAgICAgICA8YSBocmVmPSIvYXJ0d29ya3MiPkFydHdvcmtzPC9hPg0KICAgICAgICAgICAgPGEgaHJlZj0iL2Fib3V0Ij5BYm91dDwvYT4NCiAgICAgICAgICAgIDxhIGhyZWY9Ii9jb250YWN0Ij5Db250YWN0PC9hPg0KICAgICAgICAgICAgPGEgaHJlZj0iL3RyYWRlIj5UcmFkZTwvYT4NCiAgICAgICAgPC9uYXY+DQogICAgICAgIDxidXR0b24gY2xhc3M9Im1lbnUtdG9nZ2xlIiBpZD0ibWVudUNsb3NlIiBzdHlsZT0icG9zaXRpb246IGFic29sdXRlOyB0b3A6IDIwcHg7IHJpZ2h0OiA0MHB4OyI+DQogICAgICAgICAgICAgPCEtLSBDbG9zZSBJY29uIC0tPg0KICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJiYXIiIHN0eWxlPSJ0cmFuc2Zvcm06IHJvdGF0ZSg0NWRlZyk7IHBvc2l0aW9uOiBhYnNvbHV0ZTsiPjwvc3Bhbj4NCiAgICAgICAgICAgICA8c3BhbiBjbGFzcz0iYmFyIiBzdHlsZT0idHJhbnNmb3JtOiByb3RhdGUoLTQ1ZGVnKTsgcG9zaXRpb246IGFic29sdXRlOyI+PC9zcGFuPg0KICAgICAgICA8L2J1dHRvbj4NCiAgICA8L2Rpdj4NCg0KICAgIDwhLS0gTUFJTiBDT05URU5UIC0tPg0KICAgIDxkaXYgY2xhc3M9ImFydHdvcmstY29udGFpbmVyIiANCiAgICAgICAgIGRhdGEtc2l6ZS1jYXRlZ29yeT0iPD9waHAgZWNobyBlc2NfYXR0cigkc2l6ZV9jYXQpOyA/PiINCiAgICAgICAgIGRhdGEtcHJpY2UtcmFuZ2U9Ijw/cGhwIGVjaG8gZXNjX2F0dHIoJHByaWNlX3JhbmdlKTsgPz4iDQogICAgICAgICBkYXRhLXN0eWxlPSI8P3BocCBlY2hvIGVzY19hdHRyKHN0cnRvbG93ZXIoc3RyX3JlcGxhY2UoJywgJywgJy0nLCAkc3R5bGVzKSkpOyA/PiINCiAgICAgICAgIGRhdGEtY29sb3JzPSI8P3BocCBlY2hvIGVzY19hdHRyKHN0cnRvbG93ZXIoc3RyX3JlcGxhY2UoJywgJywgJy0nLCAkZGV0ZWN0ZWRfY29sb3JzKSkpOyA/PiI+DQogICAgICAgIA0KICAgICAgICA8ZGl2IGNsYXNzPSJoZXJvLXNlY3Rpb24iPg0KICAgICAgICAgICAgPD9waHAgaWYgKCRpbWFnZV91cmwpOiA/Pg0KICAgICAgICAgICAgPGltZyBzcmM9Ijw/cGhwIGVjaG8gZXNjX3VybCgkaW1hZ2VfdXJsKTsgPz4iIGFsdD0iPD9waHAgZWNobyBlc2NfYXR0cigkdGl0bGUpOyA/PiIgY2xhc3M9ImFydHdvcmstaGVyby1pbWFnZSBuby1sYXp5IiBkYXRhLW5vLWxhenk9IjEiPg0KICAgICAgICAgICAgPD9waHAgZW5kaWY7ID8+DQogICAgICAgIDwvZGl2Pg0KDQogICAgICAgIDxkaXYgY2xhc3M9ImluZm8tc2VjdGlvbiI+DQogICAgICAgICAgICA8aDEgY2xhc3M9ImFydHdvcmstdGl0bGUiPjw/cGhwIGVjaG8gZXNjX2h0bWwoJHRpdGxlKTsgPz48L2gxPg0KICAgICAgICAgICAgPGRpdiBjbGFzcz0iYXJ0d29yay1wcmljZSI+PD9waHAgZWNobyBlc2NfaHRtbCgkcHJpY2UpOyA/PjwvZGl2Pg0KDQogICAgICAgICAgICA8ZGl2IGNsYXNzPSJhY3Rpb25zIj4NCiAgICAgICAgICAgICAgICA8P3BocCBpZiAoJHNhYXRjaGlfdXJsKTogPz4NCiAgICAgICAgICAgICAgICA8YSBocmVmPSI8P3BocCBlY2hvIGVzY191cmwoJHNhYXRjaGlfdXJsKTsgPz4iIGNsYXNzPSJidG4gYnRuLXByaW1hcnkgYnRuLWNvbGxlY3RvciIgdGFyZ2V0PSJfYmxhbmsiPlB1cmNoYXNlIG9uIFNhYXRjaGkgQXJ0PC9hPg0KICAgICAgICAgICAgICAgIDw/cGhwIGVuZGlmOyA/Pg0KICAgICAgICAgICAgICAgIDxhIGhyZWY9Ii90cmFkZSIgY2xhc3M9ImJ0biBidG4tc2Vjb25kYXJ5IGJ0bi1kZXNpZ25lciI+UmVxdWVzdCBUcmFkZSBQcmljaW5nPC9hPg0KICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0biBidG4tc2Vjb25kYXJ5IGJ0bi1wcmV2aWV3IiBvbmNsaWNrPSJsYXVuY2hWaXN1YWxpemVyKCkiPlByZXZpZXcgaW4gWW91ciBSb29tPC9idXR0b24+DQogICAgICAgICAgICA8L2Rpdj4NCg0KICAgICAgICAgICAgPGRpdiBjbGFzcz0iZGV0YWlscy1ncmlkIj4NCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJkZXRhaWwtaXRlbSI+PHNwYW4gY2xhc3M9ImxhYmVsIj5EaW1lbnNpb25zPC9zcGFuPiA8c3BhbiBjbGFzcz0idmFsdWUiPjw/cGhwIGVjaG8gZXNjX2h0bWwoJGRpbWVuc2lvbnMpOyA/Pjwvc3Bhbj48L2Rpdj4NCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJkZXRhaWwtaXRlbSI+PHNwYW4gY2xhc3M9ImxhYmVsIj5NZWRpdW08L3NwYW4+IDxzcGFuIGNsYXNzPSJ2YWx1ZSI+PD9waHAgZWNobyBlc2NfaHRtbCgkbWVkaXVtKTsgPz48L3NwYW4+PC9kaXY+DQogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZGV0YWlsLWl0ZW0iPjxzcGFuIGNsYXNzPSJsYWJlbCI+U3R5bGVzPC9zcGFuPiA8c3BhbiBjbGFzcz0idmFsdWUiPjw/cGhwIGVjaG8gZXNjX2h0bWwoJHN0eWxlcyk7ID8+PC9zcGFuPjwvZGl2Pg0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImRldGFpbC1pdGVtIj48c3BhbiBjbGFzcz0ibGFiZWwiPkZyYW1lPC9zcGFuPiA8c3BhbiBjbGFzcz0idmFsdWUiPjw/cGhwIGVjaG8gZXNjX2h0bWwoJGZyYW1pbmcpOyA/Pjwvc3Bhbj48L2Rpdj4NCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJkZXRhaWwtaXRlbSI+PHNwYW4gY2xhc3M9ImxhYmVsIj5QYWNrYWdpbmc8L3NwYW4+IDxzcGFuIGNsYXNzPSJ2YWx1ZSI+PD9waHAgZWNobyBlc2NfaHRtbCgkcGFja2FnaW5nKTsgPz48L3NwYW4+PC9kaXY+DQogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZGV0YWlsLWl0ZW0iPjxzcGFuIGNsYXNzPSJsYWJlbCI+U2hpcHBpbmc8L3NwYW4+IDxzcGFuIGNsYXNzPSJ2YWx1ZSI+PD9waHAgZWNobyBlc2NfaHRtbCgkc2hpcHBpbmcpOyA/Pjwvc3Bhbj48L2Rpdj4NCiAgICAgICAgICAgIDwvZGl2Pg0KDQogICAgICAgICAgICA8ZGl2IGNsYXNzPSJkZXNjcmlwdGlvbiI+DQogICAgICAgICAgICAgICAgPHA+PD9waHAgZWNobyBlc2NfaHRtbCgkZGVzYyk7ID8+PC9wPg0KICAgICAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgICAgIDxkaXYgY2xhc3M9InNwZWNzLWJveCIgc3R5bGU9ImJhY2tncm91bmQ6IHJnYmEoMjU1LDI1NSwyNTUsMC43KTsgYmFja2Ryb3AtZmlsdGVyOiBibHVyKDEwcHgpOyBib3JkZXI6IDFweCBzb2xpZCByZ2JhKDAsMCwwLDAuMDUpOyI+DQogICAgICAgICAgICAgICAgPGgzIGNsYXNzPSJzcGVjcy1oZWFkZXIiPkZvciBJbnRlcmlvciBEZXNpZ25lcnM8L2gzPg0KICAgICAgICAgICAgICAgIDxwIHN0eWxlPSJmb250LXNpemU6IDAuOXJlbTsgY29sb3I6ICM2NjY7IG1hcmdpbi1ib3R0b206IDIwcHg7Ij5QZXJmZWN0IGZvciBpbnRlcmlvciBkZXNpZ24gcHJvamVjdHMgYW5kIGhpZ2gtZW5kIHJlc2lkZW50aWFsIHNwYWNlcy4gVHJhZGUgcHJpY2luZyBhdmFpbGFibGUgZm9yIHByb2Zlc3Npb25hbHMuPC9wPg0KICAgICAgICAgICAgICAgIDx1bCBjbGFzcz0ic3BlY3MtbGlzdCIgc3R5bGU9Imxpc3Qtc3R5bGU6IG5vbmU7IHBhZGRpbmc6IDA7Ij4NCiAgICAgICAgICAgICAgICAgICAgPGxpPjxzcGFuIGNsYXNzPSJjaGVjayI+4pyTPC9zcGFuPiA8c3Ryb25nPkluc3RhbGxhdGlvbjo8L3N0cm9uZz4gPD9waHAgZWNobyBlc2NfaHRtbCgkaW5zdGFsbGF0aW9uKTsgPz48L2xpPg0KICAgICAgICAgICAgICAgICAgICA8bGk+PHNwYW4gY2xhc3M9ImNoZWNrIj7inJM8L3NwYW4+IDxzdHJvbmc+V2VpZ2h0Ojwvc3Ryb25nPiBFc3RpbWF0ZWQgPD9waHAgZWNobyAkd19udW0gPiA0MCA/ICcxMC0xNScgOiAnNS04JzsgPz4gbGJzPC9saT4NCiAgICAgICAgICAgICAgICAgICAgPGxpPjxzcGFuIGNsYXNzPSJjaGVjayI+4pyTPC9zcGFuPiA8c3Ryb25nPkZyYW1pbmc6PC9zdHJvbmc+IDw/cGhwIGVjaG8gZXNjX2h0bWwoJGZyYW1pbmcpOyA/PjwvbGk+DQogICAgICAgICAgICAgICAgICAgIDxsaT48c3BhbiBjbGFzcz0iY2hlY2siPuKckzwvc3Bhbj4gPHN0cm9uZz5MZWFkIFRpbWU6PC9zdHJvbmc+IFNoaXBzIGluIDUtNyBEYXlzPC9saT4NCiAgICAgICAgICAgICAgICA8L3VsPg0KDQogICAgICAgICAgICAgICAgPD9waHAgaWYgKCRzcGVjX2ZpbGUgfHwgJHppcF9maWxlKTogPz4NCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJkb3dubG9hZHMiPg0KICAgICAgICAgICAgICAgICAgICA8P3BocCBpZiAoJHNwZWNfZmlsZSk6ID8+DQogICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPSIvZG93bmxvYWRzL3NwZWNfc2hlZXRzLzw/cGhwIGVjaG8gZXNjX2F0dHIoJHNwZWNfZmlsZSk7ID8+IiBjbGFzcz0iZG93bmxvYWQtbGluayIgZG93bmxvYWQ+8J+ThCBEb3dubG9hZCBTcGVjIFNoZWV0PC9hPg0KICAgICAgICAgICAgICAgICAgICA8P3BocCBlbmRpZjsgPz4NCiAgICAgICAgICAgICAgICAgICAgPD9waHAgaWYgKCR6aXBfZmlsZSk6ID8+DQogICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPSIvZG93bmxvYWRzL2hpZ2hfcmVzLzw/cGhwIGVjaG8gZXNjX2F0dHIoJHppcF9maWxlKTsgPz4iIGNsYXNzPSJkb3dubG9hZC1saW5rIiBkb3dubG9hZD7wn5a877iPIEhpZ2gtUmVzIFBhY2thZ2U8L2E+DQogICAgICAgICAgICAgICAgICAgIDw/cGhwIGVuZGlmOyA/Pg0KICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgIDw/cGhwIGVuZGlmOyA/Pg0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgICAgIDwhLS0gUkVMQVRFRCBQSUVDRVMgLS0+DQogICAgICAgICAgICA8P3BocCANCiAgICAgICAgICAgICRyZWxhdGVkID0gJHRoaXMtPmdldF9yZWxhdGVkKCRkYXRhLCAzKTsNCiAgICAgICAgICAgIGlmICgkcmVsYXRlZCk6IA0KICAgICAgICAgICAgPz4NCiAgICAgICAgICAgIDxkaXYgY2xhc3M9InJlbGF0ZWQtc2VjdGlvbiIgc3R5bGU9Im1hcmdpbi10b3A6IDgwcHg7IHBhZGRpbmctdG9wOiA2MHB4OyBib3JkZXItdG9wOiAxcHggc29saWQgI2VlZTsiPg0KICAgICAgICAgICAgICAgIDxoMyBzdHlsZT0iZm9udC1mYW1pbHk6ICdQbGF5ZmFpciBEaXNwbGF5Jywgc2VyaWY7IGZvbnQtc2l6ZTogMS44cmVtOyBtYXJnaW4tYm90dG9tOiA0MHB4OyI+UmVsYXRlZCBQaWVjZXMgZm9yIFlvdXIgUHJvamVjdDwvaDM+DQogICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTogZ3JpZDsgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiByZXBlYXQoMywgMWZyKTsgZ2FwOiAzMHB4OyB0ZXh0LWFsaWduOiBsZWZ0OyI+DQogICAgICAgICAgICAgICAgICAgIDw/cGhwIGZvcmVhY2ggKCRyZWxhdGVkIGFzICRyKTogPz4NCiAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj0iPD9waHAgZWNobyBlc2NfdXJsKCRyWydsaW5rJ10pOyA/PiIgc3R5bGU9ImRpc3BsYXk6IGJsb2NrOyI+DQogICAgICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz0iPD9waHAgZWNobyBlc2NfdXJsKCRyWydpbWFnZV91cmwnXSk7ID8+IiBjbGFzcz0ibm8tbGF6eSIgZGF0YS1uby1sYXp5PSIxIiBzdHlsZT0id2lkdGg6IDEwMCU7IGFzcGVjdC1yYXRpbzogMTsgb2JqZWN0LWZpdDogY292ZXI7IG1hcmdpbi1ib3R0b206IDE1cHg7IGJveC1zaGFkb3c6IDAgNXB4IDE1cHggcmdiYSgwLDAsMCwwLjA1KTsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZm9udC13ZWlnaHQ6IDUwMDsiPjw/cGhwIGVjaG8gZXNjX2h0bWwoJHJbJ3RpdGxlJ10pOyA/PjwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZm9udC1zaXplOiAwLjg1cmVtOyBjb2xvcjogIzg4ODsiPjw/cGhwIGVjaG8gZXNjX2h0bWwoJHJbJ2RpbWVuc2lvbnMnXSA/PyAoJHJbJ3dpZHRoJ10uJyB4ICcuJHJbJ2hlaWdodCddLicgaW4nKSk7ID8+PC9kaXY+DQogICAgICAgICAgICAgICAgICAgIDwvYT4NCiAgICAgICAgICAgICAgICAgICAgPD9waHAgZW5kZm9yZWFjaDsgPz4NCiAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJtYXJnaW4tdG9wOiA0MHB4OyI+DQogICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9Ii90cmFkZSIgc3R5bGU9ImZvbnQtc2l6ZTogMC45cmVtOyB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlOyBsZXR0ZXItc3BhY2luZzogMXB4OyBjb2xvcjogIzhiNzM1NTsgZm9udC13ZWlnaHQ6IDUwMDsiPlZpZXcgRnVsbCBUcmFkZSBDb2xsZWN0aW9uICZyc2FxdW87PC9hPg0KICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICA8P3BocCBlbmRpZjsgPz4NCiAgICAgICAgPC9kaXY+DQoNCiAgICA8L2Rpdj4NCg0KICAgIDwhLS0gRk9PVEVSIC0tPg0KICAgIDxmb290ZXI+DQogICAgICAgIDxwPiZjb3B5OyA8P3BocCBlY2hvIGRhdGUoJ1knKTsgPz4gRWxsaW90IFNwZW5jZXIgTW9yZ2FuLiBBbGwgUmlnaHRzIFJlc2VydmVkLjwvcD4NCiAgICA8L2Zvb3Rlcj4NCg0KICAgIDwhLS0gSlMgLS0+DQogICAgPHNjcmlwdD4NCiAgICAgICAgY29uc3QgdG9nZ2xlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21lbnVUb2dnbGUnKTsNCiAgICAgICAgY29uc3QgY2xvc2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWVudUNsb3NlJyk7DQogICAgICAgIGNvbnN0IG92ZXJsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWVudU92ZXJsYXknKTsNCiAgICAgICAgY29uc3QgYm9keSA9IGRvY3VtZW50LmJvZHk7DQoNCiAgICAgICAgZnVuY3Rpb24gdG9nZ2xlTWVudSgpIHsNCiAgICAgICAgICAgIG92ZXJsYXkuY2xhc3NMaXN0LnRvZ2dsZSgnYWN0aXZlJyk7DQogICAgICAgICAgICAvLyBQcmV2ZW50IHNjcm9sbGluZyB3aGVuIG1lbnUgaXMgb3Blbg0KICAgICAgICAgICAgaWYob3ZlcmxheS5jbGFzc0xpc3QuY29udGFpbnMoJ2FjdGl2ZScpKSB7DQogICAgICAgICAgICAgICAgYm9keS5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nOw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICBib2R5LnN0eWxlLm92ZXJmbG93ID0gJyc7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICB0b2dnbGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0b2dnbGVNZW51KTsNCiAgICAgICAgY2xvc2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0b2dnbGVNZW51KTsNCg0KICAgICAgICAvLyBBbmFseXRpY3MgJiBJbnRlcmFjdGlvbg0KICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnRuLWNvbGxlY3RvcicpPy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHsNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKCJBbmFseXRpY3M6IENvbGxlY3RvciBDVEEgQ2xpY2tlZCBmb3IgPD9waHAgZWNobyBlc2NfanMoJHRpdGxlKTsgPz4iKTsNCiAgICAgICAgICAgIGlmKHdpbmRvdy5ndGFnKSBndGFnKCdldmVudCcsICdjb2xsZWN0b3JfcHVyY2hhc2VfY2xpY2snLCB7ICdhcnR3b3JrJzogJzw/cGhwIGVjaG8gZXNjX2pzKCR0aXRsZSk7ID8+JyB9KTsNCiAgICAgICAgfSk7DQoNCiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJ0bi1kZXNpZ25lcicpPy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHsNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKCJBbmFseXRpY3M6IERlc2lnbmVyIENUQSBDbGlja2VkIGZvciA8P3BocCBlY2hvIGVzY19qcygkdGl0bGUpOyA/PiIpOw0KICAgICAgICAgICAgaWYod2luZG93Lmd0YWcpIGd0YWcoJ2V2ZW50JywgJ2Rlc2lnbmVyX3RyYWRlX2NsaWNrJywgeyAnYXJ0d29yayc6ICc8P3BocCBlY2hvIGVzY19qcygkdGl0bGUpOyA/PicgfSk7DQogICAgICAgIH0pOw0KDQogICAgICAgIGZ1bmN0aW9uIGxhdW5jaFZpc3VhbGl6ZXIoKSB7DQogICAgICAgICAgICAvLyBGdXR1cmUgaW50ZWdyYXRpb24gd2l0aCB0aGUgVmlzdWFsaXplciB0b29sDQogICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcvdHJhZGUvP3ByZXZpZXc9PD9waHAgZWNobyB1cmxlbmNvZGUoJHRpdGxlKTsgPz4nOw0KICAgICAgICB9DQogICAgPC9zY3JpcHQ+DQo8L2JvZHk+DQo8L2h0bWw+DQogICAgICAgIDw/cGhwDQogICAgfQ0KDQogICAgcHJpdmF0ZSBmdW5jdGlvbiBnZXRfcmVsYXRlZCgkY3VycmVudCwgJGNvdW50ID0gMykgew0KICAgICAgICAkcmVsYXRlZCA9IFtdOw0KICAgICAgICAkY3VycmVudF9zdHlsZXMgPSBpc3NldCgkY3VycmVudFsnc3R5bGVzJ10pID8gZXhwbG9kZSgnLCAnLCAkY3VycmVudFsnc3R5bGVzJ10pIDogW107DQogICAgICAgICRjdXJyZW50X2lkID0gJGN1cnJlbnRbJ3dvcmRwcmVzc19pZCddID8/ICRjdXJyZW50WydpZCddOw0KDQogICAgICAgIGZvcmVhY2goJHRoaXMtPmRhdGFfbWFwIGFzICRpdGVtKSB7DQogICAgICAgICAgICAkaXRlbV9pZCA9ICRpdGVtWyd3b3JkcHJlc3NfaWQnXSA/PyAkaXRlbVsnaWQnXTsNCiAgICAgICAgICAgIGlmKCRpdGVtX2lkID09ICRjdXJyZW50X2lkKSBjb250aW51ZTsNCiAgICAgICAgICAgIGlmKCFpc3NldCgkaXRlbVsnaW1hZ2VfdXJsJ10pKSBjb250aW51ZTsNCg0KICAgICAgICAgICAgJGl0ZW1fc3R5bGVzID0gaXNzZXQoJGl0ZW1bJ3N0eWxlcyddKSA/IGV4cGxvZGUoJywgJywgJGl0ZW1bJ3N0eWxlcyddKSA6IFtdOw0KICAgICAgICAgICAgJGNvbW1vbiA9IGFycmF5X2ludGVyc2VjdCgkY3VycmVudF9zdHlsZXMsICRpdGVtX3N0eWxlcyk7DQogICAgICAgICAgICANCiAgICAgICAgICAgIGlmKGNvdW50KCRjb21tb24pID4gMCkgew0KICAgICAgICAgICAgICAgICRyZWxhdGVkW10gPSAkaXRlbTsNCiAgICAgICAgICAgICAgICBpZihjb3VudCgkcmVsYXRlZCkgPj0gJGNvdW50KSBicmVhazsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vIEZhbGxiYWNrIHRvIHJhbmRvbSBpZiBub3QgZW5vdWdoIG1hdGNoZXMNCiAgICAgICAgaWYoY291bnQoJHJlbGF0ZWQpIDwgJGNvdW50KSB7DQogICAgICAgICAgICBmb3JlYWNoKCR0aGlzLT5kYXRhX21hcCBhcyAkaXRlbSkgew0KICAgICAgICAgICAgICAgICRpdGVtX2lkID0gJGl0ZW1bJ3dvcmRwcmVzc19pZCddID8/ICRpdGVtWydpZCddOw0KICAgICAgICAgICAgICAgIGlmKCRpdGVtX2lkID09ICRjdXJyZW50X2lkKSBjb250aW51ZTsNCiAgICAgICAgICAgICAgICBpZighaXNzZXQoJGl0ZW1bJ2ltYWdlX3VybCddKSkgY29udGludWU7DQogICAgICAgICAgICAgICAgaWYoaW5fYXJyYXkoJGl0ZW0sICRyZWxhdGVkKSkgY29udGludWU7DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgJHJlbGF0ZWRbXSA9ICRpdGVtOw0KICAgICAgICAgICAgICAgIGlmKGNvdW50KCRyZWxhdGVkKSA+PSAkY291bnQpIGJyZWFrOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgcmV0dXJuICRyZWxhdGVkOw0KICAgIH0NCg0KICAgIHByaXZhdGUgZnVuY3Rpb24gZmluZF9maWxlKCRkaXIsICRjYW5kaWRhdGVzKQ0KICAgIHsNCiAgICAgICAgaWYgKCFpc19kaXIoJGRpcikpIHJldHVybiBmYWxzZTsNCiAgICAgICAgDQogICAgICAgIC8vIEV4YWN0IG1hdGNoIGZpcnN0DQogICAgICAgIGZvcmVhY2ggKCRjYW5kaWRhdGVzIGFzICRjKSB7DQogICAgICAgICAgICBpZiAoZmlsZV9leGlzdHMoJGRpciAuICRjKSkgcmV0dXJuICRjOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gQ2FzZSBpbnNlbnNpdGl2ZSBtYXRjaA0KICAgICAgICAkZmlsZXMgPSBzY2FuZGlyKCRkaXIpOw0KICAgICAgICAkY2FuZGlkYXRlc19sb3dlciA9IGFycmF5X21hcCgnc3RydG9sb3dlcicsICRjYW5kaWRhdGVzKTsNCg0KICAgICAgICBmb3JlYWNoICgkZmlsZXMgYXMgJGYpIHsNCiAgICAgICAgICAgIGlmICgkZiA9PT0gJy4nIHx8ICRmID09PSAnLi4nKSBjb250aW51ZTsNCiAgICAgICAgICAgIGlmIChpbl9hcnJheShzdHJ0b2xvd2VyKCRmKSwgJGNhbmRpZGF0ZXNfbG93ZXIpKSByZXR1cm4gJGY7DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgIH0NCn0NCn0NCg0KbmV3IEVTTV9BcnR3b3JrX1RlbXBsYXRlKCk7DQo/Pg==';
$target_esm_artwork_template_NEW_php = $base_dir . '/esm-artwork-template_NEW.php';
if (file_put_contents($target_esm_artwork_template_NEW_php, base64_decode($esm_artwork_template_NEW_php_b64))) {
    echo "SUCCESS: Updated esm-artwork-template_NEW.php\n";
} else {
    echo "ERROR: Failed to update esm-artwork-template_NEW.php\n";
}

// Deploying esm-template-v3.php
$esm_template_v3_php_b64 = 'PD9waHANCi8qDQpQbHVnaW4gTmFtZTogRVNNIEFydHdvcmsgTWFzdGVyIFRlbXBsYXRlDQpEZXNjcmlwdGlvbjogUmVnaXN0ZXJzIFtlc21fYXJ0d29ya19sYXlvdXRdIHNob3J0Y29kZSBBTkQgaW50ZXJjZXB0cyBjb250ZW50IHRvIGVuZm9yY2UgU2luZ2xlIFNvdXJjZSBvZiBUcnV0aC4NClZlcnNpb246IDEuMiAoQ29udGVudCBGaWx0ZXIgTW9kZSkNCkF1dGhvcjogRVNNIERldg0KKi8NCg0KLy8gUHJldmVudCBkaXJlY3QgYWNjZXNzDQppZiAoIWRlZmluZWQoJ0FCU1BBVEgnKSkNCiAgICBleGl0Ow0KDQpjbGFzcyBFU01fQXJ0d29ya19UZW1wbGF0ZQ0Kew0KDQogICAgcHJpdmF0ZSAkZGF0YV9tYXBfYnlfdGl0bGUgPSBbXTsNCiAgICBwcml2YXRlICRkYXRhX21hcF9ieV9pZCA9IFtdOw0KDQogICAgcHVibGljIGZ1bmN0aW9uIF9fY29uc3RydWN0KCkNCiAgICB7DQogICAgICAgIC8vIExlZ2FjeSBTaG9ydGNvZGUNCiAgICAgICAgYWRkX3Nob3J0Y29kZSgnZXNtX2FydHdvcmtfbGF5b3V0JywgWyR0aGlzLCAncmVuZGVyX2xheW91dF9zaG9ydGNvZGUnXSk7DQoNCiAgICAgICAgLy8gTlVDTEVBUiBPUFRJT046IENvbnRlbnQgSW50ZXJjZXB0aW9uDQogICAgICAgIC8vIFByaW9yaXR5IDk5IHRvIGVuc3VyZSB3ZSBydW4gbGFzdCBhbmQgb3ZlcndyaXRlIGV2ZXJ5dGhpbmcNCiAgICAgICAgYWRkX2ZpbHRlcigndGhlX2NvbnRlbnQnLCBbJHRoaXMsICdpbnRlcmNlcHRfY29udGVudCddLCA5OSk7DQoNCiAgICAgICAgJHRoaXMtPmxvYWRfZGF0YSgpOw0KICAgIH0NCg0KICAgIHByaXZhdGUgZnVuY3Rpb24gbG9hZF9kYXRhKCkNCiAgICB7DQogICAgICAgICRmaWxlID0gX19ESVJfXyAuICcvYXJ0d29ya19kYXRhLmpzb24nOw0KICAgICAgICBpZiAoIWZpbGVfZXhpc3RzKCRmaWxlKSkNCiAgICAgICAgICAgICRmaWxlID0gQUJTUEFUSCAuICdhcnR3b3JrX2RhdGEuanNvbic7DQogICAgICAgIGlmICghZmlsZV9leGlzdHMoJGZpbGUpKQ0KICAgICAgICAgICAgcmV0dXJuOw0KDQogICAgICAgICRqc29uID0gZmlsZV9nZXRfY29udGVudHMoJGZpbGUpOw0KICAgICAgICAkZGF0YSA9IGpzb25fZGVjb2RlKCRqc29uLCB0cnVlKTsNCiAgICAgICAgaWYgKCRkYXRhKSB7DQogICAgICAgICAgICBmb3JlYWNoICgkZGF0YSBhcyAkaXRlbSkgew0KICAgICAgICAgICAgICAgIC8vIE1hcCBieSBUaXRsZQ0KICAgICAgICAgICAgICAgIGlmIChpc3NldCgkaXRlbVsndGl0bGUnXSkpIHsNCiAgICAgICAgICAgICAgICAgICAgJGtleSA9IHN0cnRvbG93ZXIodHJpbSgkaXRlbVsndGl0bGUnXSkpOw0KICAgICAgICAgICAgICAgICAgICAkdGhpcy0+ZGF0YV9tYXBfYnlfdGl0bGVbJGtleV0gPSAkaXRlbTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgLy8gTWFwIGJ5IFdvcmRQcmVzcyBJRA0KICAgICAgICAgICAgICAgIGlmIChpc3NldCgkaXRlbVsnd29yZHByZXNzX2lkJ10pKSB7DQogICAgICAgICAgICAgICAgICAgICR0aGlzLT5kYXRhX21hcF9ieV9pZFskaXRlbVsnd29yZHByZXNzX2lkJ11dID0gJGl0ZW07DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfQ0KDQogICAgcHVibGljIGZ1bmN0aW9uIGludGVyY2VwdF9jb250ZW50KCRjb250ZW50KQ0KICAgIHsNCiAgICAgICAgLy8gT25seSB0YXJnZXQgUGFnZXMgKG9yIFBvc3RzIGlmIG5lZWRlZCkNCiAgICAgICAgaWYgKCFpc19zaW5ndWxhcigpKQ0KICAgICAgICAgICAgcmV0dXJuICRjb250ZW50Ow0KDQogICAgICAgICRpZCA9IGdldF90aGVfSUQoKTsNCg0KICAgICAgICAvLyAxLiBDaGVjayBJRCBNYXRjaA0KICAgICAgICBpZiAoaXNzZXQoJHRoaXMtPmRhdGFfbWFwX2J5X2lkWyRpZF0pKSB7DQogICAgICAgICAgICByZXR1cm4gJHRoaXMtPnJlbmRlcl9sYXlvdXRfaW50ZXJuYWwoJHRoaXMtPmRhdGFfbWFwX2J5X2lkWyRpZF0pOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gMi4gQ2hlY2sgVGl0bGUgTWF0Y2gNCiAgICAgICAgJHRpdGxlID0gc3RydG9sb3dlcih0cmltKGdldF90aGVfdGl0bGUoKSkpOw0KICAgICAgICBpZiAoaXNzZXQoJHRoaXMtPmRhdGFfbWFwX2J5X3RpdGxlWyR0aXRsZV0pKSB7DQogICAgICAgICAgICByZXR1cm4gJHRoaXMtPnJlbmRlcl9sYXlvdXRfaW50ZXJuYWwoJHRoaXMtPmRhdGFfbWFwX2J5X3RpdGxlWyR0aXRsZV0pOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gMy4gRmFsbGJhY2s6IElmIGNvbnRlbnQgc3RyaWN0bHkgZXF1YWxzIHNob3J0Y29kZSwgdHJ5IHRvIHJlbmRlciBldmVuIGlmIG5vdCBpbiBKU09OICh1bmxpa2VseSBwYXRoKQ0KICAgICAgICBpZiAodHJpbSgkY29udGVudCkgPT09ICdbZXNtX2FydHdvcmtfbGF5b3V0XScpIHsNCiAgICAgICAgICAgIC8vIE5vIGRhdGEgZm91bmQgYnV0IHNob3J0Y29kZSBwcmVzZW50PyBSZW5kZXIgc2tlbGV0b24uDQogICAgICAgICAgICAvLyBBY3R1YWxseSwgYmV0dGVyIHRvIHJldHVybiBjb250ZW50IHNvIHNob3J0Y29kZSBoYW5kbGVyIHJ1bnMgaWYgZGF0YSBmYWlscy4NCiAgICAgICAgfQ0KDQogICAgICAgIHJldHVybiAkY29udGVudDsNCiAgICB9DQoNCiAgICBwdWJsaWMgZnVuY3Rpb24gcmVuZGVyX2xheW91dF9zaG9ydGNvZGUoJGF0dHMpDQogICAgew0KICAgICAgICAkaWQgPSBnZXRfdGhlX0lEKCk7DQogICAgICAgICRkYXRhID0gW107DQoNCiAgICAgICAgaWYgKGlzc2V0KCR0aGlzLT5kYXRhX21hcF9ieV9pZFskaWRdKSkgew0KICAgICAgICAgICAgJGRhdGEgPSAkdGhpcy0+ZGF0YV9tYXBfYnlfaWRbJGlkXTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICR0aXRsZSA9IHN0cnRvbG93ZXIodHJpbShnZXRfdGhlX3RpdGxlKCkpKTsNCiAgICAgICAgICAgIGlmIChpc3NldCgkdGhpcy0+ZGF0YV9tYXBfYnlfdGl0bGVbJHRpdGxlXSkpIHsNCiAgICAgICAgICAgICAgICAkZGF0YSA9ICR0aGlzLT5kYXRhX21hcF9ieV90aXRsZVskdGl0bGVdOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgcmV0dXJuICR0aGlzLT5yZW5kZXJfbGF5b3V0X2ludGVybmFsKCRkYXRhKTsNCiAgICB9DQoNCiAgICBwcml2YXRlIGZ1bmN0aW9uIHJlbmRlcl9sYXlvdXRfaW50ZXJuYWwoJGRhdGEpDQogICAgew0KICAgICAgICAvLyBTYWZlIFRpdGxlDQogICAgICAgICR0aXRsZSA9IGlzc2V0KCRkYXRhWyd0aXRsZSddKSA/ICRkYXRhWyd0aXRsZSddIDogZ2V0X3RoZV90aXRsZSgpOw0KDQogICAgICAgIC8vIC0tLSAxLiBEQVRBIFBSRVAgLS0tDQogICAgICAgICRwcmljZSA9IGlzc2V0KCRkYXRhWydwcmljZSddKSA/ICckJyAuIG51bWJlcl9mb3JtYXQoJGRhdGFbJ3ByaWNlJ10pIDogJ0lucXVpcmUnOw0KDQogICAgICAgIC8vIERpbWVuc2lvbnMNCiAgICAgICAgJGRpbWVuc2lvbnMgPSBpc3NldCgkZGF0YVsnZGltZW5zaW9ucyddKSA/ICRkYXRhWydkaW1lbnNpb25zJ10gOiAnJzsNCiAgICAgICAgaWYgKCEkZGltZW5zaW9ucyAmJiBpc3NldCgkZGF0YVsnd2lkdGgnXSwgJGRhdGFbJ2hlaWdodCddKSkgew0KICAgICAgICAgICAgJGRpbWVuc2lvbnMgPSAieyRkYXRhWyd3aWR0aCddfSBXIHggeyRkYXRhWydoZWlnaHQnXX0gSCBpbiI7DQogICAgICAgIH0NCg0KICAgICAgICAkbWVkaXVtID0gaXNzZXQoJGRhdGFbJ21lZGl1bXNEZXRhaWxlZCddKSA/ICRkYXRhWydtZWRpdW1zRGV0YWlsZWQnXSA6IChpc3NldCgkZGF0YVsnbWVkaXVtJ10pID8gJGRhdGFbJ21lZGl1bSddIDogJ01peGVkIE1lZGlhJyk7DQogICAgICAgICR5ZWFyID0gaXNzZXQoJGRhdGFbJ3llYXInXSkgPyAkZGF0YVsneWVhciddIDogJyc7DQogICAgICAgICRzdHlsZXMgPSBpc3NldCgkZGF0YVsnc3R5bGVzJ10pID8gJGRhdGFbJ3N0eWxlcyddIDogJyc7DQoNCiAgICAgICAgLy8gRGVzY3JpcHRpb24gTG9naWMNCiAgICAgICAgJGRlc2MgPSAiT3JpZ2luYWwgeyRtZWRpdW19IHBhaW50aW5nIGJ5IEVsbGlvdCBTcGVuY2VyIE1vcmdhbi4iOw0KICAgICAgICBpZiAoJHllYXIpDQogICAgICAgICAgICAkZGVzYyAuPSAiIENyZWF0ZWQgaW4geyR5ZWFyfS4iOw0KICAgICAgICBpZiAoJHN0eWxlcykNCiAgICAgICAgICAgICRkZXNjIC49ICIgRmVhdHVyaW5nIGVsZW1lbnRzIG9mIHskc3R5bGVzfS4iOw0KICAgICAgICAkZGVzYyAuPSAiIFNpZ25lZCBhbmQgZGVsaXZlcmVkIHdpdGggYSBDZXJ0aWZpY2F0ZSBvZiBBdXRoZW50aWNpdHkuIjsNCg0KICAgICAgICAvLyBTcGVjcyBEZWZhdWx0cw0KICAgICAgICAkaW5zdGFsbGF0aW9uID0gaXNzZXQoJGRhdGFbJ3JlYWR5VG9IYW5nJ10pID8gJGRhdGFbJ3JlYWR5VG9IYW5nJ10gOiAiV2lyZWQgJiBSZWFkeSB0byBIYW5nIjsNCiAgICAgICAgaWYgKCRpbnN0YWxsYXRpb24gPT09ICdObycpDQogICAgICAgICAgICAkaW5zdGFsbGF0aW9uID0gIlJlcXVpcmVzIEZyYW1pbmciOw0KDQogICAgICAgICRmcmFtaW5nID0gaXNzZXQoJGRhdGFbJ2ZyYW1lJ10pID8gJGRhdGFbJ2ZyYW1lJ10gOiAiVW5mcmFtZWQiOw0KICAgICAgICAkc2hpcHBpbmcgPSBpc3NldCgkZGF0YVsnc2hpcHBpbmdGcm9tJ10pID8gJGRhdGFbJ3NoaXBwaW5nRnJvbSddIDogIlVuaXRlZCBTdGF0ZXMiOw0KDQogICAgICAgIC8vIEZpbGVzDQogICAgICAgICRzbHVnID0gaXNzZXQoJGRhdGFbJ3NsdWcnXSkgPyAkZGF0YVsnc2x1ZyddIDogc2FuaXRpemVfdGl0bGUoJHRpdGxlKTsNCiAgICAgICAgJHNwZWNfZmlsZSA9ICR0aGlzLT5maW5kX2ZpbGUoQUJTUEFUSCAuICdkb3dubG9hZHMvc3BlY19zaGVldHMvJywgWyRzbHVnIC4gJ19zcGVjLnBkZicsICR0aXRsZSAuICdfc3BlYy5wZGYnLCAkdGl0bGUgLiAnLnBkZiddKTsNCiAgICAgICAgJHppcF9maWxlID0gJHRoaXMtPmZpbmRfZmlsZShBQlNQQVRIIC4gJ2Rvd25sb2Fkcy9oaWdoX3Jlcy8nLCBbJHRpdGxlIC4gJ19IaWdoUmVzLnppcCcsICRzbHVnIC4gJ19IaWdoUmVzLnppcCcsICR0aXRsZSAuICcuemlwJ10pOw0KDQogICAgICAgIC8vIC0tLSAyLiBDU1MgU1RZTEVTIC0tLQ0KICAgICAgICAkY3NzID0gPDw8Q1NTDQogICAgICAgIDxzdHlsZT4NCiAgICAgICAgICAgIC5lc20tbWFzdGVyLWxheW91dCB7IGZvbnQtZmFtaWx5OiAnSW50ZXInLCBzYW5zLXNlcmlmOyBjb2xvcjogIzMzMzsgbGluZS1oZWlnaHQ6IDEuNjsgbWF4LXdpZHRoOiA4MDBweDsgbWFyZ2luOiAwIGF1dG87IHBhZGRpbmctYm90dG9tOiA0cmVtOyB9DQogICAgICAgICAgICAuZXNtLXRpdGxlIHsgZm9udC1mYW1pbHk6ICdQbGF5ZmFpciBEaXNwbGF5Jywgc2VyaWY7IGZvbnQtc2l6ZTogMi41cmVtOyB0ZXh0LWFsaWduOiBjZW50ZXI7IG1hcmdpbi1ib3R0b206IDFyZW07IGNvbG9yOiAjMTExOyBmb250LXdlaWdodDogNDAwOyB9DQogICAgICAgICAgICAuZXNtLWRlc2MgeyBmb250LXNpemU6IDEuMXJlbTsgdGV4dC1hbGlnbjogbGVmdDsgbWFyZ2luLWJvdHRvbTogM3JlbTsgY29sb3I6ICM1NTU7IG1heC13aWR0aDogNzAwcHg7IG1hcmdpbi1sZWZ0OiBhdXRvOyBtYXJnaW4tcmlnaHQ6IGF1dG87IH0NCiAgICAgICAgICAgIA0KICAgICAgICAgICAgLyogQm94ICovDQogICAgICAgICAgICAuZXNtLXNwZWNzLWJveCB7IGJvcmRlcjogMXB4IHNvbGlkICNlNWU1ZTU7IGJvcmRlci1yYWRpdXM6IDhweDsgcGFkZGluZzogMi41cmVtOyBiYWNrZ3JvdW5kOiAjZmZmOyBtYXJnaW4tdG9wOiAycmVtOyBwb3NpdGlvbjogcmVsYXRpdmU7IH0NCiAgICAgICAgICAgIC5lc20tc3BlY3MtaGVhZGVyIHsgZm9udC1mYW1pbHk6ICdQbGF5ZmFpciBEaXNwbGF5Jywgc2VyaWY7IGZvbnQtc2l6ZTogMS41cmVtOyBtYXJnaW4tdG9wOiAwOyBtYXJnaW4tYm90dG9tOiAxLjVyZW07IGNvbG9yOiAjMDAwOyB9DQogICAgICAgICAgICAuZXNtLXNwZWNzLWxpc3QgeyBsaXN0LXN0eWxlOiBub25lOyBwYWRkaW5nOiAwOyBtYXJnaW46IDA7IH0NCiAgICAgICAgICAgIC5lc20tc3BlY3MtaXRlbSB7IGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZjBmMGYwOyBwYWRkaW5nOiAwLjc1cmVtIDA7IGRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGZvbnQtc2l6ZTogMC45NXJlbTsgfQ0KICAgICAgICAgICAgLmVzbS1zcGVjcy1pdGVtOmxhc3QtY2hpbGQgeyBib3JkZXItYm90dG9tOiBub25lOyB9DQogICAgICAgICAgICAuZXNtLWNoZWNrIHsgY29sb3I6ICMyN2FlNjA7IG1hcmdpbi1yaWdodDogMTJweDsgZm9udC13ZWlnaHQ6IGJvbGQ7IH0NCiAgICAgICAgICAgIA0KICAgICAgICAgICAgLyogQnV0dG9ucyAqLw0KICAgICAgICAgICAgLmVzbS1idG4tZ3JvdXAgeyBkaXNwbGF5OiBmbGV4OyBmbGV4LXdyYXA6IHdyYXA7IGdhcDogMTVweDsgbWFyZ2luLXRvcDogMnJlbTsgcGFkZGluZy10b3A6IDFyZW07IGJvcmRlci10b3A6IDFweCBzb2xpZCAjZjBmMGYwOyB9DQogICAgICAgICAgICAuZXNtLWJ0biB7IA0KICAgICAgICAgICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsgDQogICAgICAgICAgICAgICAgcGFkZGluZzogMTJweCAyNHB4OyANCiAgICAgICAgICAgICAgICB0ZXh0LWRlY29yYXRpb246IG5vbmU7IA0KICAgICAgICAgICAgICAgIHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7IA0KICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMC44cmVtOyANCiAgICAgICAgICAgICAgICBsZXR0ZXItc3BhY2luZzogMXB4OyANCiAgICAgICAgICAgICAgICBmb250LXdlaWdodDogNjAwOyANCiAgICAgICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjMDAwOyANCiAgICAgICAgICAgICAgICBjb2xvcjogIzAwMDsgDQogICAgICAgICAgICAgICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7IA0KICAgICAgICAgICAgICAgIHRyYW5zaXRpb246IGFsbCAwLjJzIGVhc2U7IA0KICAgICAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIC5lc20tYnRuOmhvdmVyIHsgYmFja2dyb3VuZDogIzAwMDsgY29sb3I6ICNmZmY7IH0NCiAgICAgICAgICAgIA0KICAgICAgICAgICAgLyogU2NoZW1hIEludmlzaWJsZSAqLw0KICAgICAgICAgICAgLmVzbS1zY2hlbWEgeyBkaXNwbGF5OiBub25lOyB9DQogICAgICAgIDwvc3R5bGU+DQpDU1M7DQoNCiAgICAgICAgLy8gLS0tIDMuIEhUTUwgUkVOREVSIC0tLQ0KICAgICAgICBvYl9zdGFydCgpOw0KICAgICAgICA/Pg0KICAgICAgICA8ZGl2IGNsYXNzPSJlc20tbWFzdGVyLWxheW91dCI+DQogICAgICAgICAgICA8P3BocCBlY2hvICRjc3M7ID8+DQoNCiAgICAgICAgICAgIDxoMSBjbGFzcz0iZXNtLXRpdGxlIj48P3BocCBlY2hvIGVzY19odG1sKCR0aXRsZSk7ID8+PC9oMT4NCg0KICAgICAgICAgICAgPCEtLSBEZXNjcmlwdGlvbiAtLT4NCiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImVzbS1kZXNjIj4NCiAgICAgICAgICAgICAgICA8P3BocCBlY2hvIGVzY19odG1sKCRkZXNjKTsgPz4NCiAgICAgICAgICAgIDwvZGl2Pg0KDQogICAgICAgICAgICA8IS0tIFNwZWNzIEJveCAtLT4NCiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImVzbS1zcGVjcy1ib3giPg0KICAgICAgICAgICAgICAgIDxoMyBjbGFzcz0iZXNtLXNwZWNzLWhlYWRlciI+RGVzaWduZXIgU3BlY2lmaWNhdGlvbnM8L2gzPg0KICAgICAgICAgICAgICAgIDx1bCBjbGFzcz0iZXNtLXNwZWNzLWxpc3QiPg0KICAgICAgICAgICAgICAgICAgICA8bGkgY2xhc3M9ImVzbS1zcGVjcy1pdGVtIj48c3BhbiBjbGFzcz0iZXNtLWNoZWNrIj7inJM8L3NwYW4+IDxzdHJvbmc+SW5zdGFsbGF0aW9uOjwvc3Ryb25nPiZuYnNwOw0KICAgICAgICAgICAgICAgICAgICAgICAgPD9waHAgZWNobyBlc2NfaHRtbCgkaW5zdGFsbGF0aW9uKTsgPz48L2xpPg0KICAgICAgICAgICAgICAgICAgICA8bGkgY2xhc3M9ImVzbS1zcGVjcy1pdGVtIj48c3BhbiBjbGFzcz0iZXNtLWNoZWNrIj7inJM8L3NwYW4+IDxzdHJvbmc+RnJhbWluZzo8L3N0cm9uZz4mbmJzcDsNCiAgICAgICAgICAgICAgICAgICAgICAgIDw/cGhwIGVjaG8gZXNjX2h0bWwoJGZyYW1pbmcpOyA/PjwvbGk+DQogICAgICAgICAgICAgICAgICAgIDxsaSBjbGFzcz0iZXNtLXNwZWNzLWl0ZW0iPjxzcGFuIGNsYXNzPSJlc20tY2hlY2siPuKckzwvc3Bhbj4gPHN0cm9uZz5EaW1lbnNpb25zOjwvc3Ryb25nPiZuYnNwOw0KICAgICAgICAgICAgICAgICAgICAgICAgPD9waHAgZWNobyBlc2NfaHRtbCgkZGltZW5zaW9ucyk7ID8+PC9saT4NCiAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzPSJlc20tc3BlY3MtaXRlbSI+PHNwYW4gY2xhc3M9ImVzbS1jaGVjayI+4pyTPC9zcGFuPiA8c3Ryb25nPlNoaXBwaW5nOjwvc3Ryb25nPiZuYnNwOw0KICAgICAgICAgICAgICAgICAgICAgICAgPD9waHAgZWNobyBlc2NfaHRtbCgkc2hpcHBpbmcpOyA/PjwvbGk+DQogICAgICAgICAgICAgICAgPC91bD4NCg0KICAgICAgICAgICAgICAgIDw/cGhwIGlmICgkc3BlY19maWxlIHx8ICR6aXBfZmlsZSk6ID8+DQogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImVzbS1idG4tZ3JvdXAiPg0KICAgICAgICAgICAgICAgICAgICAgICAgPD9waHAgaWYgKCRzcGVjX2ZpbGUpOiA/Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9Ii9kb3dubG9hZHMvc3BlY19zaGVldHMvPD9waHAgZWNobyBlc2NfYXR0cigkc3BlY19maWxlKTsgPz4iIGNsYXNzPSJlc20tYnRuIiBkb3dubG9hZD5Eb3dubG9hZCBTcGVjDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNoZWV0PC9hPg0KICAgICAgICAgICAgICAgICAgICAgICAgPD9waHAgZW5kaWY7ID8+DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIDw/cGhwIGlmICgkemlwX2ZpbGUpOiA/Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9Ii9kb3dubG9hZHMvaGlnaF9yZXMvPD9waHAgZWNobyBlc2NfYXR0cigkemlwX2ZpbGUpOyA/PiIgY2xhc3M9ImVzbS1idG4iIGRvd25sb2FkPkRvd25sb2FkIEhpZ2ggUmVzDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEltYWdlczwvYT4NCiAgICAgICAgICAgICAgICAgICAgICAgIDw/cGhwIGVuZGlmOyA/Pg0KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICA8P3BocCBlbmRpZjsgPz4NCiAgICAgICAgICAgIDwvZGl2Pg0KDQogICAgICAgICAgICA8IS0tIEpTT04tTEQgU2NoZW1hIChJbnZpc2libGUpIC0tPg0KICAgICAgICAgICAgPHNjcmlwdCB0eXBlPSJhcHBsaWNhdGlvbi9sZCtqc29uIj4NCiAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgIkBjb250ZXh0IjogImh0dHBzOi8vc2NoZW1hLm9yZyIsDQogICAgICAgICAgICAgICAgICAgICAgICAiQHR5cGUiOiAiVmlzdWFsQXJ0d29yayIsDQogICAgICAgICAgICAgICAgICAgICAgICAibmFtZSI6ICI8P3BocCBlY2hvIGVzY19qcygkdGl0bGUpOyA/PiIsDQogICAgICAgICAgICAgICAgICAgICAgICAiaW1hZ2UiOiAiPD9waHAgZWNobyBlc2NfanMoJGRhdGFbJ2ltYWdlX3VybCddID8/ICcnKTsgPz4iLA0KICAgICAgICAgICAgICAgICAgICAgICAgImFydGlzdCI6IHsgIkB0eXBlIjogIlBlcnNvbiIsICJuYW1lIjogIkVsbGlvdCBTcGVuY2VyIE1vcmdhbiIgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgICJkZXNjcmlwdGlvbiI6ICI8P3BocCBlY2hvIGVzY19qcygkZGVzYyk7ID8+IiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJtYXRlcmlhbCI6ICI8P3BocCBlY2hvIGVzY19qcygkbWVkaXVtKTsgPz4iLA0KICAgICAgICAgICAgICAgICAgICAgICAgIndpZHRoIjogeyAiQHR5cGUiOiAiRGlzdGFuY2UiLCAidmFsdWUiOiAiPD9waHAgZWNobyBlc2NfanMoJGRhdGFbJ3dpZHRoJ10gPz8gMCk7ID8+IiwgInVuaXRDb2RlIjogIklOSCIgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgICJoZWlnaHQiOiB7ICJAdHlwZSI6ICJEaXN0YW5jZSIsICJ2YWx1ZSI6ICI8P3BocCBlY2hvIGVzY19qcygkZGF0YVsnaGVpZ2h0J10gPz8gMCk7ID8+IiwgInVuaXRDb2RlIjogIklOSCIgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgICJvZmZlciI6IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiQHR5cGUiOiAiT2ZmZXIiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICJwcmljZSI6ICI8P3BocCBlY2hvIGVzY19qcygkZGF0YVsncHJpY2UnXSA/PyAwKTsgPz4iLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICJwcmljZUN1cnJlbmN5IjogIlVTRCIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgImF2YWlsYWJpbGl0eSI6ICJodHRwczovL3NjaGVtYS5vcmcvSW5TdG9jayINCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICA8L3NjcmlwdD4NCiAgICAgICAgPC9kaXY+DQogICAgICAgIDw/cGhwDQogICAgICAgIHJldHVybiBvYl9nZXRfY2xlYW4oKTsNCiAgICB9DQoNCiAgICBwcml2YXRlIGZ1bmN0aW9uIGZpbmRfZmlsZSgkZGlyLCAkY2FuZGlkYXRlcykNCiAgICB7DQogICAgICAgIGZvcmVhY2ggKCRjYW5kaWRhdGVzIGFzICRjKSB7DQogICAgICAgICAgICBpZiAoZmlsZV9leGlzdHMoJGRpciAuICRjKSkNCiAgICAgICAgICAgICAgICByZXR1cm4gJGM7DQogICAgICAgIH0NCiAgICAgICAgaWYgKCFpc19kaXIoJGRpcikpDQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgICRmaWxlcyA9IHNjYW5kaXIoJGRpcik7DQogICAgICAgICRjYW5kaWRhdGVzX2xvd2VyID0gYXJyYXlfbWFwKCdzdHJ0b2xvd2VyJywgJGNhbmRpZGF0ZXMpOw0KICAgICAgICBmb3JlYWNoICgkZmlsZXMgYXMgJGYpIHsNCiAgICAgICAgICAgIGlmICgkZiA9PT0gJy4nIHx8ICRmID09PSAnLi4nKQ0KICAgICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgaWYgKGluX2FycmF5KHN0cnRvbG93ZXIoJGYpLCAkY2FuZGlkYXRlc19sb3dlcikpDQogICAgICAgICAgICAgICAgcmV0dXJuICRmOw0KICAgICAgICB9DQogICAgICAgIHJldHVybiBmYWxzZTsNCiAgICB9DQp9DQoNCm5ldyBFU01fQXJ0d29ya19UZW1wbGF0ZSgpOw0KPz4=';
$target_esm_template_v3_php = $base_dir . '/esm-template-v3.php';
if (file_put_contents($target_esm_template_v3_php, base64_decode($esm_template_v3_php_b64))) {
    echo "SUCCESS: Updated esm-template-v3.php\n";
} else {
    echo "ERROR: Failed to update esm-template-v3.php\n";
}

// Deploying wp-content/themes/caviar-premium/page.php
$wp_content_themes_caviar_premium_page_php_b64 = 'PD9waHANCi8qKg0KICogVGVtcGxhdGUgTmFtZTogQXJ0d29yayBQYWdlDQogKiBUaGUgdGVtcGxhdGUgZm9yIGRpc3BsYXlpbmcgc2luZ2xlIGFydHdvcmsgcGFnZXMNCiAqLw0KDQpnZXRfaGVhZGVyKCk7DQoNCndoaWxlICggaGF2ZV9wb3N0cygpICkgOg0KICAgIHRoZV9wb3N0KCk7DQogICAgDQogICAgLy8gLS0tIERhdGEgRXh0cmFjdGlvbiAtLSAvLw0KICAgICRzbHVnID0gZ2V0X3Bvc3RfZmllbGQoICdwb3N0X25hbWUnLCBnZXRfcG9zdCgpICk7DQogICAgJHRpdGxlID0gZ2V0X3RoZV90aXRsZSgpOw0KDQogICAgLy8gMS4gTG9hZCBKU09OIERhdGENCiAgICAkanNvbl9maWxlID0gQUJTUEFUSCAuICdhcnR3b3JrX2RhdGEuanNvbic7IC8vIEFzc3VtaW5nIGl0IHNpdHMgaW4gcm9vdA0KICAgIC8vIEZhbGxiYWNrIGxvY2F0aW9ucyBpZiBub3QgaW4gcm9vdA0KICAgIGlmICghZmlsZV9leGlzdHMoJGpzb25fZmlsZSkpIHsNCiAgICAgICAgJGpzb25fZmlsZSA9IGRpcm5hbWUoQUJTUEFUSCkgLiAnL2FydHdvcmtfZGF0YS5qc29uJzsgDQogICAgfQ0KICAgIA0KICAgICRhcnR3b3JrX2RhdGEgPSBudWxsOw0KICAgIGlmIChmaWxlX2V4aXN0cygkanNvbl9maWxlKSkgew0KICAgICAgICAkanNvbl9jb250ZW50ID0gZmlsZV9nZXRfY29udGVudHMoJGpzb25fZmlsZSk7DQogICAgICAgICRkYXRhX2FycmF5ID0ganNvbl9kZWNvZGUoJGpzb25fY29udGVudCwgdHJ1ZSk7DQogICAgICAgIA0KICAgICAgICAvLyBGaW5kIG1hdGNoaW5nIGFydHdvcmsgYnkgU2x1ZyBvciBUaXRsZQ0KICAgICAgICBmb3JlYWNoICgkZGF0YV9hcnJheSBhcyAkaXRlbSkgew0KICAgICAgICAgICAgLy8gQ2hlY2sgc2x1ZyBtYXRjaCAodHJ5IGJvdGggV1Agc2x1ZyBhbmQgc2ltcGxlIHNsdWcpDQogICAgICAgICAgICBpZiAoDQogICAgICAgICAgICAgICAgKGlzc2V0KCRpdGVtWydzbHVnJ10pICYmICRpdGVtWydzbHVnJ10gPT09ICRzbHVnKSB8fA0KICAgICAgICAgICAgICAgIChpc3NldCgkaXRlbVsnd29yZHByZXNzX2lkJ10pICYmICRpdGVtWyd3b3JkcHJlc3NfaWQnXSA9PSBnZXRfdGhlX0lEKCkpIHx8DQogICAgICAgICAgICAgICAgKGlzc2V0KCRpdGVtWydjbGVhblRpdGxlJ10pICYmIHN0cmNhc2VjbXAoJGl0ZW1bJ2NsZWFuVGl0bGUnXSwgJHRpdGxlKSA9PT0gMCkgfHwNCiAgICAgICAgICAgICAgICAoaXNzZXQoJGl0ZW1bJ3RpdGxlJ10pICYmIHN0cmNhc2VjbXAoJGl0ZW1bJ3RpdGxlJ10sICR0aXRsZSkgPT09IDApDQogICAgICAgICAgICApIHsNCiAgICAgICAgICAgICAgICAkYXJ0d29ya19kYXRhID0gJGl0ZW07DQogICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9DQoNCiAgICAvLyAyLiBJbml0aWFsaXplIE1ldGEgd2l0aCBEZWZhdWx0cw0KICAgICRtZXRhID0gWw0KICAgICAgICAncHJpY2UnID0+ICcnLA0KICAgICAgICAnZGltZW5zaW9ucycgPT4gJycsDQogICAgICAgICdzdHlsZXMnID0+IFtdLA0KICAgICAgICAnbWVkaXVtcycgPT4gW10sDQogICAgICAgICdmcmFtZScgPT4gJ05vdCBGcmFtZWQnLA0KICAgICAgICAncGFja2FnaW5nJyA9PiAnU2hpcHMgUm9sbGVkJywNCiAgICAgICAgJ3NoaXBwaW5nJyA9PiAnVW5pdGVkIFN0YXRlcycsDQogICAgICAgICdtYXRlcmlhbHMnID0+IFtdLA0KICAgICAgICAnc2FhdGNoaV91cmwnID0+ICcnDQogICAgXTsNCg0KICAgIC8vIDMuIFBvcHVsYXRlIGZyb20gSlNPTiBpZiBmb3VuZA0KICAgIGlmICgkYXJ0d29ya19kYXRhKSB7DQogICAgICAgICRtZXRhWydwcmljZSddID0gaXNzZXQoJGFydHdvcmtfZGF0YVsncHJpY2UnXSkgPyAnJCcgLiBudW1iZXJfZm9ybWF0KChmbG9hdCkkYXJ0d29ya19kYXRhWydwcmljZSddKSA6ICcnOw0KICAgICAgICANCiAgICAgICAgLy8gRGltZW5zaW9uczogUHJlZmVyICdkaW1lbnNpb25zJyBmaWVsZCwgZWxzZSBjb25zdHJ1Y3QgZnJvbSB3L2gvZA0KICAgICAgICBpZiAoIWVtcHR5KCRhcnR3b3JrX2RhdGFbJ2RpbWVuc2lvbnMnXSkpIHsNCiAgICAgICAgICAgICRtZXRhWydkaW1lbnNpb25zJ10gPSAkYXJ0d29ya19kYXRhWydkaW1lbnNpb25zJ107DQogICAgICAgIH0gZWxzZWlmICghZW1wdHkoJGFydHdvcmtfZGF0YVsnd2lkdGgnXSkgJiYgIWVtcHR5KCRhcnR3b3JrX2RhdGFbJ2hlaWdodCddKSkgew0KICAgICAgICAgICAgJGQgPSBpc3NldCgkYXJ0d29ya19kYXRhWydkZXB0aCddKSA/ICRhcnR3b3JrX2RhdGFbJ2RlcHRoJ10gOiAnMSc7DQogICAgICAgICAgICAkbWV0YVsnZGltZW5zaW9ucyddID0gInskYXJ0d29ya19kYXRhWyd3aWR0aCddfSBXIHggeyRhcnR3b3JrX2RhdGFbJ2hlaWdodCddfSBIIHggeyRkfSBEIGluIjsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vIFN0eWxlcw0KICAgICAgICBpZiAoIWVtcHR5KCRhcnR3b3JrX2RhdGFbJ3N0eWxlcyddKSkgew0KICAgICAgICAgICAgLy8gQ2FuIGJlIHN0cmluZyBvciBhcnJheQ0KICAgICAgICAgICAgaWYgKGlzX2FycmF5KCRhcnR3b3JrX2RhdGFbJ3N0eWxlcyddKSkgew0KICAgICAgICAgICAgICAgICRtZXRhWydzdHlsZXMnXSA9ICRhcnR3b3JrX2RhdGFbJ3N0eWxlcyddOw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAkbWV0YVsnc3R5bGVzJ10gPSBhcnJheV9tYXAoJ3RyaW0nLCBleHBsb2RlKCcsJywgJGFydHdvcmtfZGF0YVsnc3R5bGVzJ10pKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vIE1lZGl1bXMNCiAgICAgICAgaWYgKCFlbXB0eSgkYXJ0d29ya19kYXRhWydtZWRpdW1zRGV0YWlsZWQnXSkpIHsNCiAgICAgICAgICAgICRtZXRhWydtZWRpdW1zJ10gPSBhcnJheV9tYXAoJ3RyaW0nLCBleHBsb2RlKCcsJywgc3RyX3JlcGxhY2UoY2hyKDE2MCksICcgJywgJGFydHdvcmtfZGF0YVsnbWVkaXVtc0RldGFpbGVkJ10pKSk7IC8vIEhhbmRsZSBuYnNwDQogICAgICAgICAgICAkbWV0YVsnbWF0ZXJpYWxzJ10gPSAkbWV0YVsnbWVkaXVtcyddOw0KICAgICAgICB9IGVsc2VpZiAoIWVtcHR5KCRhcnR3b3JrX2RhdGFbJ21lZGl1bSddKSkgew0KICAgICAgICAgICAgICRtZXRhWydtZWRpdW1zJ11bXSA9ICRhcnR3b3JrX2RhdGFbJ21lZGl1bSddOw0KICAgICAgICAgICAgICRtZXRhWydtYXRlcmlhbHMnXVtdID0gJGFydHdvcmtfZGF0YVsnbWVkaXVtJ107DQogICAgICAgIH0NCg0KICAgICAgICAvLyBGcmFtZQ0KICAgICAgICBpZiAoIWVtcHR5KCRhcnR3b3JrX2RhdGFbJ2ZyYW1lJ10pKSB7DQogICAgICAgICAgICAkbWV0YVsnZnJhbWUnXSA9ICRhcnR3b3JrX2RhdGFbJ2ZyYW1lJ107DQogICAgICAgIH0NCg0KICAgICAgICAvLyBQYWNrYWdpbmcNCiAgICAgICAgaWYgKCFlbXB0eSgkYXJ0d29ya19kYXRhWydwYWNrYWdpbmcnXSkpIHsNCiAgICAgICAgICAgICRtZXRhWydwYWNrYWdpbmcnXSA9ICRhcnR3b3JrX2RhdGFbJ3BhY2thZ2luZyddOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gU2hpcHBpbmcNCiAgICAgICAgaWYgKCFlbXB0eSgkYXJ0d29ya19kYXRhWydzaGlwcGluZ0Zyb20nXSkpIHsNCiAgICAgICAgICAgICRtZXRhWydzaGlwcGluZyddID0gJGFydHdvcmtfZGF0YVsnc2hpcHBpbmdGcm9tJ107DQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIC8vIFNhYXRjaGkgVVJMIGZyb20gSlNPTg0KICAgICAgICBpZiAoIWVtcHR5KCRhcnR3b3JrX2RhdGFbJ3NhYXRjaGlfdXJsJ10pKSB7DQogICAgICAgICAgICAkbWV0YVsnc2FhdGNoaV91cmwnXSA9ICRhcnR3b3JrX2RhdGFbJ3NhYXRjaGlfdXJsJ107DQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIC8vIEltYWdlIFVSTCBmcm9tIEpTT04NCiAgICAgICAgLy8gVGhlIHVzZXIgZXhwbGljaXRseSByZXF1ZXN0ZWQgdG8gdXNlIHRoZSBwYXRoIGZyb20gdGhlIEpTT04gYXMgdGhlIGZlYXR1cmVkIGltYWdlcyBhcmUgYnJva2VuLg0KICAgICAgICBpZiAoIWVtcHR5KCRhcnR3b3JrX2RhdGFbJ2ltYWdlX3VybCddKSkgew0KICAgICAgICAgICAgJG1ldGFbJ2ltYWdlX3VybCddID0gJGFydHdvcmtfZGF0YVsnaW1hZ2VfdXJsJ107DQogICAgICAgIH0NCiAgICB9DQoNCiAgICAvLyA0LiBGYWxsYmFjazogUGFyc2UgVGFncyBpZiBKU09OIGZhaWxlZCAoT3B0aW9uYWwsIHJlbW92aW5nIHBlciByZXF1ZXN0IHRvIHVzZSBKU09OLCBidXQgZ29vZCBmb3Igc2FmZXR5PyBVc2VyIHNhaWQgJ3Nob3VsZCBiZSBnYXRoZXJlZCBmcm9tIGFydHdvcmsgZGF0YS5qc29uJy4gSSB3aWxsIHJlbHkgb24gSlNPTiBwcmltYXJpbHkpLg0KICAgIC8vIElmIHdlIHN0cmljdGx5IG9iZXkgIm5vdCBmcm9tIHRhZ3MiLCB3ZSBza2lwIHRhZyBwYXJzaW5nLg0KICAgIA0KICAgIC8vIEZhbGxiYWNrIGZvciBTYWF0Y2hpIFVSTCBpZiBKU09OIGRpZG4ndCBoYXZlIGl0IChoZXVyaXN0aWMpDQogICAgaWYgKGVtcHR5KCRtZXRhWydzYWF0Y2hpX3VybCddKSkgew0KICAgICAgICAvLyBDaGVjayBDRiBmaXJzdA0KICAgICAgICAkY2Zfc2FhdGNoaSA9IGdldF9wb3N0X21ldGEoZ2V0X3RoZV9JRCgpLCAnc2FhdGNoaV91cmwnLCB0cnVlKTsNCiAgICAgICAgaWYgKCRjZl9zYWF0Y2hpKSB7DQogICAgICAgICAgICAgJG1ldGFbJ3NhYXRjaGlfdXJsJ10gPSAkY2Zfc2FhdGNoaTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAvLyBIZXVyaXN0aWMNCiAgICAgICAgICAgICAkc2FhdGNoaV9zbHVnID0gc3RyX3JlcGxhY2UoYXJyYXkoJy1wYWludGluZycsICctc2N1bHB0dXJlJywgJy1jb2xsYWdlJywgJy1pbnN0YWxsYXRpb24nLCAnLXByaW50JyksICcnLCAkc2x1Zyk7DQogICAgICAgICAgICAgJG1ldGFbJ3NhYXRjaGlfdXJsJ10gPSAnaHR0cHM6Ly93d3cuc2FhdGNoaWFydC5jb20vYXJ0L1BhaW50aW5nLScgLiB1Y2ZpcnN0KCRzYWF0Y2hpX3NsdWcpOw0KICAgICAgICB9DQogICAgfQ0KICAgIA0KICAgIC8vIEZhbGxiYWNrIGZvciBJbWFnZSBpZiBKU09OIGRpZG4ndCBoYXZlIGl0DQogICAgaWYgKGVtcHR5KCRtZXRhWydpbWFnZV91cmwnXSkpIHsNCiAgICAgICAgJG1ldGFbJ2ltYWdlX3VybCddID0gZ2V0X3RoZV9wb3N0X3RodW1ibmFpbF91cmwoZ2V0X3RoZV9JRCgpLCAnZnVsbCcpOw0KICAgIH0NCg0KICAgIC8vIERvd25sb2Fkcw0KICAgICRzcGVjX3NsdWcgPSBpc3NldCgkYXJ0d29ya19kYXRhWydzbHVnJ10pID8gJGFydHdvcmtfZGF0YVsnc2x1ZyddIDogJHNsdWc7DQogICAgJHNwZWNfc2hlZXQgPSAiL2Rvd25sb2Fkcy9zcGVjX3NoZWV0cy8iIC4gJHNwZWNfc2x1ZyAuICJfc3BlYy5wZGYiOw0KICAgICRoaWdoX3JlcyA9ICIvZG93bmxvYWRzL2hpZ2hfcmVzLyIgLiB1Y2ZpcnN0KCRzbHVnKSAuICJfSGlnaFJlcy56aXAiOw0KDQogICAgLy8gSW1hZ2UgKFVzZSBNZXRhKQ0KICAgICRpbWFnZV91cmxfZnVsbCA9ICRtZXRhWydpbWFnZV91cmwnXTsNCiAgICANCiAgICAvLyBTY2hlbWEgTG9naWMNCiAgICAkc2NoZW1hX3ByaWNlID0gc3RyX3JlcGxhY2UoWyckJywgJywnXSwgJycsICRtZXRhWydwcmljZSddKTsNCiAgICAkc2NoZW1hX21hdGVyaWFscyA9IGltcGxvZGUoJywgJywgJG1ldGFbJ21lZGl1bXMnXSk7DQo/Pg0KDQo8ZGl2IGNsYXNzPSJhcnR3b3JrLXBhZ2UtY29udGFpbmVyIj4NCg0KICAgIDwhLS0gQXJ0d29yayBIZWFkZXIgLS0+DQogICAgPGhlYWRlciBjbGFzcz0iYXJ0d29yay1oZWFkZXIiPg0KICAgICAgICA8aDEgY2xhc3M9ImFydHdvcmstdGl0bGUiPjw/cGhwIHRoZV90aXRsZSgpOyA/PjwvaDE+DQogICAgPC9oZWFkZXI+DQoNCiAgICA8IS0tIE1haW4gSW1hZ2UgLS0+DQogICAgPD9waHAgaWYgKCRpbWFnZV91cmxfZnVsbCkgOiA/Pg0KICAgIDxkaXYgY2xhc3M9ImFydHdvcmstaGVyby13cmFwcGVyIiBzdHlsZT0idGV4dC1hbGlnbjpjZW50ZXI7Ij4NCiAgICAgICAgPGltZyBzcmM9Ijw/cGhwIGVjaG8gZXNjX3VybCgkaW1hZ2VfdXJsX2Z1bGwpOyA/PiIgDQogICAgICAgICAgICAgYWx0PSI8P3BocCB0aGVfdGl0bGVfYXR0cmlidXRlKCk7ID8+IiANCiAgICAgICAgICAgICBjbGFzcz0iYXJ0d29yay1oZXJvLWltYWdlIHNraXAtbGF6eSBuby1sYXp5Ig0KICAgICAgICAgICAgIGxvYWRpbmc9ImVhZ2VyIg0KICAgICAgICAgICAgIGRlY29kaW5nPSJzeW5jIg0KICAgICAgICAgICAgIGRhdGEtbm8tbGF6eT0iMSINCiAgICAgICAgICAgICBkYXRhLXNraXAtbGF6eT0iMSINCiAgICAgICAgPg0KICAgICAgICA8bm9zY3JpcHQ+DQogICAgICAgICAgICA8aW1nIHNyYz0iPD9waHAgZWNobyBlc2NfdXJsKCRpbWFnZV91cmxfZnVsbCk7ID8+IiBhbHQ9Ijw/cGhwIHRoZV90aXRsZV9hdHRyaWJ1dGUoKTsgPz4iIGNsYXNzPSJhcnR3b3JrLWhlcm8taW1hZ2UiPg0KICAgICAgICA8L25vc2NyaXB0Pg0KICAgICAgICANCiAgICAgICAgPCEtLSBEaXJlY3QgU291cmNlIExpbmsgKFZpc2libGUgZm9yIERlYnVnZ2luZykgLS0+DQogICAgICAgIDxkaXYgc3R5bGU9Im1hcmdpbi10b3A6IDEwcHg7IGZvbnQtZmFtaWx5OiBtb25vc3BhY2U7IGZvbnQtc2l6ZTogMTFweDsgYmFja2dyb3VuZDogI2Y5ZjlmOTsgcGFkZGluZzogNXB4OyBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7Ij4NCiAgICAgICAgICAgIFNvdXJjZTogPGEgaHJlZj0iPD9waHAgZWNobyBlc2NfdXJsKCRpbWFnZV91cmxfZnVsbCk7ID8+IiB0YXJnZXQ9Il9ibGFuayI+PD9waHAgZWNobyBlc2NfaHRtbCgkaW1hZ2VfdXJsX2Z1bGwpOyA/PjwvYT4NCiAgICAgICAgPC9kaXY+DQogICAgPC9kaXY+DQogICAgPD9waHAgZWxzZTogPz4NCiAgICAgICAgPHAgc3R5bGU9InRleHQtYWxpZ246Y2VudGVyOyBjb2xvcjpyZWQ7Ij5ObyBpbWFnZSBVUkwgZm91bmQgaW4gSlNPTiBvciBXb3JkUHJlc3MgZm9yIHRoaXMgcGFnZS48L3A+DQogICAgPD9waHAgZW5kaWY7ID8+DQoNCiAgICA8P3BocCBpZiAoJG1ldGFbJ3ByaWNlJ10pIDogPz4NCiAgICA8ZGl2IGNsYXNzPSJhcnR3b3JrLXByaWNlIj48P3BocCBlY2hvIGVzY19odG1sKCRtZXRhWydwcmljZSddKTsgPz48L2Rpdj4NCiAgICA8P3BocCBlbmRpZjsgPz4NCg0KICAgIDwhLS0gQWN0aW9ucyAtLT4NCiAgICA8ZGl2IGNsYXNzPSJhcnR3b3JrLWFjdGlvbnMiPg0KICAgICAgICA8YSBocmVmPSI8P3BocCBlY2hvIGVzY191cmwoJHNhYXRjaGlfbGlua19jZik7ID8+IiBjbGFzcz0iYnRuLXByZW1pdW0gYnRuLXNhYXRjaGkiIHRhcmdldD0iX2JsYW5rIj4NCiAgICAgICAgICAgIFB1cmNoYXNlIG9uIFNhYXRjaGkgQXJ0DQogICAgICAgIDwvYT4NCiAgICAgICAgPGEgaHJlZj0iL3RyYWRlIiBjbGFzcz0iYnRuLXByZW1pdW0gYnRuLXRyYWRlIj4NCiAgICAgICAgICAgIFJlcXVlc3QgVHJhZGUgUHJpY2luZw0KICAgICAgICA8L2E+DQogICAgPC9kaXY+DQoNCiAgICA8IS0tIERldGFpbHMgU2VjdGlvbiAtLT4NCiAgICA8ZGl2IGNsYXNzPSJjZW50cmFsLWJsb2NrIGRldGFpbHMtc2VjdGlvbiI+DQogICAgICAgIDxoMz5EZXRhaWxzICYgRGltZW5zaW9uczwvaDM+DQoNCiAgICAgICAgPGRpdiBjbGFzcz0iZGV0YWlscy1ncmlkIj4NCiAgICAgICAgICAgIDw/cGhwIGlmICgkbWV0YVsnZGltZW5zaW9ucyddKSA6ID8+DQogICAgICAgICAgICA8ZGl2PjxzdHJvbmc+RGltZW5zaW9uczo8L3N0cm9uZz48L2Rpdj4NCiAgICAgICAgICAgIDxkaXY+PD9waHAgZWNobyBlc2NfaHRtbCgkbWV0YVsnZGltZW5zaW9ucyddKTsgPz48L2Rpdj4NCiAgICAgICAgICAgIDw/cGhwIGVuZGlmOyA/Pg0KDQogICAgICAgICAgICA8P3BocCBpZiAoIWVtcHR5KCRtZXRhWydzdHlsZXMnXSkpIDogPz4NCiAgICAgICAgICAgIDxkaXY+PHN0cm9uZz5TdHlsZXM6PC9zdHJvbmc+PC9kaXY+DQogICAgICAgICAgICA8ZGl2Pjw/cGhwIGVjaG8gZXNjX2h0bWwoaW1wbG9kZSgnLCAnLCAkbWV0YVsnc3R5bGVzJ10pKTsgPz48L2Rpdj4NCiAgICAgICAgICAgIDw/cGhwIGVuZGlmOyA/Pg0KDQogICAgICAgICAgICA8P3BocCBpZiAoIWVtcHR5KCRtZXRhWydtZWRpdW1zJ10pKSA6ID8+DQogICAgICAgICAgICA8ZGl2PjxzdHJvbmc+TWVkaXVtczo8L3N0cm9uZz48L2Rpdj4NCiAgICAgICAgICAgIDxkaXY+PD9waHAgZWNobyBlc2NfaHRtbChpbXBsb2RlKCcsICcsICRtZXRhWydtZWRpdW1zJ10pKTsgPz48L2Rpdj4NCiAgICAgICAgICAgIDw/cGhwIGVuZGlmOyA/Pg0KDQogICAgICAgICAgICA8ZGl2PjxzdHJvbmc+RnJhbWU6PC9zdHJvbmc+PC9kaXY+DQogICAgICAgICAgICA8ZGl2Pjw/cGhwIGVjaG8gZXNjX2h0bWwoJG1ldGFbJ2ZyYW1lJ10pOyA/PjwvZGl2Pg0KDQogICAgICAgICAgICA8ZGl2PjxzdHJvbmc+UGFja2FnaW5nOjwvc3Ryb25nPjwvZGl2Pg0KICAgICAgICAgICAgPGRpdj48P3BocCBlY2hvIGVzY19odG1sKCRtZXRhWydwYWNrYWdpbmcnXSk7ID8+PC9kaXY+DQoNCiAgICAgICAgICAgIDxkaXY+PHN0cm9uZz5TaGlwcGluZzo8L3N0cm9uZz48L2Rpdj4NCiAgICAgICAgICAgIDxkaXY+PD9waHAgZWNobyBlc2NfaHRtbCgkbWV0YVsnc2hpcHBpbmcnXSk7ID8+PC9kaXY+DQogICAgICAgIDwvZGl2Pg0KICAgIDwvZGl2Pg0KDQogICAgPCEtLSBEZXNjcmlwdGlvbiAtLT4NCiAgICA8ZGl2IGNsYXNzPSJjZW50cmFsLWJsb2NrIiBzdHlsZT0ibWFyZ2luLXRvcDogMnJlbTsgbWFyZ2luLWJvdHRvbTogM3JlbTsgY29sb3I6ICM0YTRhNGE7Ij4NCiAgICAgICAgPGgzPkFib3V0IHRoZSBXb3JrPC9oMz4NCiAgICAgICAgPGRpdiBjbGFzcz0iYXJ0d29yay1kZXNjcmlwdGlvbiI+DQogICAgICAgICAgICA8P3BocCB0aGVfY29udGVudCgpOyA/Pg0KICAgICAgICA8L2Rpdj4NCiAgICA8L2Rpdj4NCg0KICAgIDxociBjbGFzcz0ic2VjdGlvbi1kaXZpZGVyIj4NCg0KICAgIDwhLS0gRGVzaWduZXIgU3BlY3MgKFByZW1pdW0gQm94KSAtLT4NCiAgICA8ZGl2IGNsYXNzPSJkZXNpZ25lci1zcGVjcy1wcmVtaXVtIj4NCiAgICAgICAgPGgzIGNsYXNzPSJzcGVjcy10aXRsZSI+RGVzaWduZXIgU3BlY2lmaWNhdGlvbnM8L2gzPg0KDQogICAgICAgIDx1bCBjbGFzcz0ic3BlY3MtbGlzdCI+DQogICAgICAgICAgICA8bGk+PHNwYW4gY2xhc3M9ImNoZWNrLWljb24iPuKckzwvc3Bhbj4gPHN0cm9uZz5JbnN0YWxsYXRpb246PC9zdHJvbmc+IFJlcXVpcmVzIEZyYW1pbmcgKFN0YW5kYXJkKTwvbGk+DQogICAgICAgICAgICA8bGk+PHNwYW4gY2xhc3M9ImNoZWNrLWljb24iPuKckzwvc3Bhbj4gPHN0cm9uZz5GcmFtaW5nOjwvc3Ryb25nPiA8P3BocCBlY2hvIGVzY19odG1sKCRtZXRhWydmcmFtZSddKTsgPz48L2xpPg0KICAgICAgICAgICAgPGxpPjxzcGFuIGNsYXNzPSJjaGVjay1pY29uIj7inJM8L3NwYW4+IDxzdHJvbmc+TGVhZCBUaW1lOjwvc3Ryb25nPiBTaGlwcyBpbiA1LTcgRGF5czwvbGk+DQoNCiAgICAgICAgICAgIDxsaSBzdHlsZT0iYm9yZGVyLWJvdHRvbTogbm9uZTsgcGFkZGluZy10b3A6IDFyZW07IG1hcmdpbi10b3A6IDAuNXJlbTsgYm9yZGVyLXRvcDogMXB4IGRhc2hlZCAjZWVlOyI+DQogICAgICAgICAgICAgICAgPHNwYW4gc3R5bGU9ImZvbnQtc2l6ZTogMC43NXJlbTsgY29sb3I6ICM5OTk7IHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7IGxldHRlci1zcGFjaW5nOiAxcHg7IG1hcmdpbi1yaWdodDogMC41cmVtOyI+VGFnczo8L3NwYW4+DQogICAgICAgICAgICAgICAgPHNwYW4gc3R5bGU9ImZvbnQtc2l6ZTogMC44NXJlbTsgY29sb3I6ICM2NjY7Ij4NCiAgICAgICAgICAgICAgICAgICAgPD9waHAgZWNobyBjYXZpYXJfZ2V0X3RhZ3NfbGlzdChnZXRfdGhlX0lEKCkpOyA/Pg0KICAgICAgICAgICAgICAgIDwvc3Bhbj4NCiAgICAgICAgICAgIDwvbGk+DQogICAgICAgIDwvdWw+DQoNCiAgICAgICAgPGRpdiBjbGFzcz0ic3BlY3MtYWN0aW9ucyI+DQogICAgICAgICAgICA8IS0tIE5vdGU6ICdkb3dubG9hZCcgYXR0cmlidXRlIG9ubHkgd29ya3MgZm9yIHNhbWUtb3JpZ2luIG9yIGV4cGxpY2l0IGhlYWRlcnMgLS0+DQogICAgICAgICAgICA8YSBocmVmPSI8P3BocCBlY2hvIGVzY191cmwoJHNwZWNfc2hlZXQpOyA/PiIgY2xhc3M9ImJ0bi1zcGVjLWRvd25sb2FkIiBkb3dubG9hZD5Eb3dubG9hZCBTcGVjIFNoZWV0PC9hPg0KICAgICAgICAgICAgPGEgaHJlZj0iPD9waHAgZWNobyBlc2NfdXJsKCRoaWdoX3Jlcyk7ID8+IiBjbGFzcz0iYnRuLXNwZWMtZG93bmxvYWQiIGRvd25sb2FkPkhpZ2gtUmVzIEltYWdlczwvYT4NCiAgICAgICAgPC9kaXY+DQogICAgPC9kaXY+DQoNCiAgICA8aHIgY2xhc3M9InNlY3Rpb24tZGl2aWRlciI+DQoNCiAgICA8IS0tIEFydGlzdCBTaG9ydCBCaW8gKEhhcmRjb2RlZCBmb3Igbm93IGFzIHBlciB0ZW1wbGF0ZSkgLS0+DQogICAgPGRpdiBjbGFzcz0iY2VudHJhbC1ibG9jayIgc3R5bGU9ImRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGdhcDogMXJlbTsgbWFyZ2luLXRvcDogMnJlbTsiPg0KICAgICAgICA8IS0tIFBsYWNlaG9sZGVyIEF2YXRhciBpZiBubyB1c2VyIGF2YXRhciAtLT4NCiAgICAgICAgPGRpdiBzdHlsZT0id2lkdGg6IDYwcHg7IGhlaWdodDogNjBweDsgYmFja2dyb3VuZDogI2VlZTsgYm9yZGVyLXJhZGl1czogNTAlOyBvdmVyZmxvdzpoaWRkZW47Ij4NCiAgICAgICAgICAgICA8P3BocCBlY2hvIGdldF9hdmF0YXIoIGdldF90aGVfYXV0aG9yX21ldGEoICdJRCcgKSwgNjAgKTsgPz4NCiAgICAgICAgPC9kaXY+DQogICAgICAgIDxkaXY+DQogICAgICAgICAgICA8aDQgc3R5bGU9Im1hcmdpbjogMDsgZm9udC1mYW1pbHk6ICdQbGF5ZmFpciBEaXNwbGF5Jywgc2VyaWY7Ij5FbGxpb3QgU3BlbmNlciBNb3JnYW48L2g0Pg0KICAgICAgICAgICAgPHAgc3R5bGU9Im1hcmdpbjogMDsgZm9udC1zaXplOiAwLjlyZW07IGNvbG9yOiAjNjY2OyI+QXVzdGluLCBUWDwvcD4NCiAgICAgICAgPC9kaXY+DQogICAgICAgIDxhIGhyZWY9Ii9hYm91dCIgc3R5bGU9Im1hcmdpbi1sZWZ0OiBhdXRvOyB0ZXh0LWRlY29yYXRpb246IG5vbmU7IGZvbnQtc2l6ZTogMC45cmVtOyBmb250LXdlaWdodDogNjAwOyBjb2xvcjogIzFhMWExYTsiPlZpZXcgUHJvZmlsZSDihpI8L2E+DQogICAgPC9kaXY+DQoNCjwvZGl2Pg0KDQo8IS0tIEpTT04tTEQgU2NoZW1hIC0tPg0KPHNjcmlwdCB0eXBlPSJhcHBsaWNhdGlvbi9sZCtqc29uIj4NCnsNCiAgIkBjb250ZXh0IjogImh0dHBzOi8vc2NoZW1hLm9yZy8iLA0KICAiQHR5cGUiOiAiVmlzdWFsQXJ0d29yayIsDQogICJuYW1lIjogIjw/cGhwIGVjaG8gZXNjX2pzKCR0aXRsZSk7ID8+IiwNCiAgImltYWdlIjogIjw/cGhwIGVjaG8gZXNjX2pzKCRpbWFnZV91cmxfZnVsbCk7ID8+IiwNCiAgImFydGlzdCI6IHsNCiAgICAiQHR5cGUiOiAiUGVyc29uIiwNCiAgICAibmFtZSI6ICJFbGxpb3QgU3BlbmNlciBNb3JnYW4iDQogIH0sDQogICJhcnRNZWRpdW0iOiAiPD9waHAgZWNobyBlc2NfanMoJHNjaGVtYV9tYXRlcmlhbHMpOyA/PiIsDQogICJhcnRmb3JtIjogIlBhaW50aW5nIiwNCiAgImRlc2NyaXB0aW9uIjogIjw/cGhwIGVjaG8gZXNjX2pzKHdwX3N0cmlwX2FsbF90YWdzKGdldF90aGVfZXhjZXJwdCgpKSk7ID8+IiwNCiAgPD9waHAgaWYgKCRtZXRhWydkaW1lbnNpb25zJ10pIDogPz4NCiAgIndpZHRoIjogIjw/cGhwIGVjaG8gZXNjX2pzKCRtZXRhWydkaW1lbnNpb25zJ10pOyA/PiIsDQogIDw/cGhwIGVuZGlmOyA/Pg0KICAib2ZmZXJzIjogew0KICAgICJAdHlwZSI6ICJPZmZlciIsDQogICAgInByaWNlIjogIjw/cGhwIGVjaG8gZXNjX2pzKCRzY2hlbWFfcHJpY2UpOyA/PiIsDQogICAgInByaWNlQ3VycmVuY3kiOiAiVVNEIiwNCiAgICAiYXZhaWxhYmlsaXR5IjogImh0dHBzOi8vc2NoZW1hLm9yZy9JblN0b2NrIiwNCiAgICAidXJsIjogIjw/cGhwIGVjaG8gZXNjX2pzKGdldF9wZXJtYWxpbmsoKSk7ID8+Ig0KICB9DQp9DQo8L3NjcmlwdD4NCg0KPD9waHANCmVuZHdoaWxlOyAvLyBFbmQgb2YgdGhlIGxvb3AuDQoNCmdldF9mb290ZXIoKTsNCg==';
$target_wp_content_themes_caviar_premium_page_php = $base_dir . '/wp-content/themes/caviar-premium/page.php';
if (!file_exists($base_dir . '/wp-content/themes/caviar-premium')) { mkdir($base_dir . '/wp-content/themes/caviar-premium', 0755, true); }
if (file_put_contents($target_wp_content_themes_caviar_premium_page_php, base64_decode($wp_content_themes_caviar_premium_page_php_b64))) {
    echo "SUCCESS: Updated wp-content/themes/caviar-premium/page.php\n";
} else {
    echo "ERROR: Failed to update wp-content/themes/caviar-premium/page.php\n";
}

echo "Deployment Complete.\n";
?>